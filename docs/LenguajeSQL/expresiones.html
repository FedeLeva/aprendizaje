<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Expresiones y funciones | Guias</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Descripcion">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/aprendizaje/assets/css/0.styles.5e6ce45c.css" as="style"><link rel="preload" href="/aprendizaje/assets/js/app.995f5a2e.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/2.c431ec36.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/35.c6553481.js" as="script"><link rel="prefetch" href="/aprendizaje/assets/js/10.ebb9a2d4.js"><link rel="prefetch" href="/aprendizaje/assets/js/11.2f8e45c5.js"><link rel="prefetch" href="/aprendizaje/assets/js/12.9873a2f3.js"><link rel="prefetch" href="/aprendizaje/assets/js/13.1cc2ebda.js"><link rel="prefetch" href="/aprendizaje/assets/js/14.ac7318bb.js"><link rel="prefetch" href="/aprendizaje/assets/js/15.65795f28.js"><link rel="prefetch" href="/aprendizaje/assets/js/16.e127c599.js"><link rel="prefetch" href="/aprendizaje/assets/js/17.38e9d24d.js"><link rel="prefetch" href="/aprendizaje/assets/js/18.fe1f2117.js"><link rel="prefetch" href="/aprendizaje/assets/js/19.78aa11ec.js"><link rel="prefetch" href="/aprendizaje/assets/js/20.a278704f.js"><link rel="prefetch" href="/aprendizaje/assets/js/21.7018fded.js"><link rel="prefetch" href="/aprendizaje/assets/js/22.903b3da0.js"><link rel="prefetch" href="/aprendizaje/assets/js/23.702acea2.js"><link rel="prefetch" href="/aprendizaje/assets/js/24.5264c57a.js"><link rel="prefetch" href="/aprendizaje/assets/js/25.26964830.js"><link rel="prefetch" href="/aprendizaje/assets/js/26.1a1a38e4.js"><link rel="prefetch" href="/aprendizaje/assets/js/27.d8bab02d.js"><link rel="prefetch" href="/aprendizaje/assets/js/28.9b0ea1f4.js"><link rel="prefetch" href="/aprendizaje/assets/js/29.a7fafec7.js"><link rel="prefetch" href="/aprendizaje/assets/js/3.735a6bdd.js"><link rel="prefetch" href="/aprendizaje/assets/js/30.b2fca6e8.js"><link rel="prefetch" href="/aprendizaje/assets/js/31.0de90fbf.js"><link rel="prefetch" href="/aprendizaje/assets/js/32.7be88abe.js"><link rel="prefetch" href="/aprendizaje/assets/js/33.9add958a.js"><link rel="prefetch" href="/aprendizaje/assets/js/34.84cda2e0.js"><link rel="prefetch" href="/aprendizaje/assets/js/36.6683ceca.js"><link rel="prefetch" href="/aprendizaje/assets/js/37.92230209.js"><link rel="prefetch" href="/aprendizaje/assets/js/38.d5c9d1ca.js"><link rel="prefetch" href="/aprendizaje/assets/js/39.6953788c.js"><link rel="prefetch" href="/aprendizaje/assets/js/4.7b66cd35.js"><link rel="prefetch" href="/aprendizaje/assets/js/40.13e06b26.js"><link rel="prefetch" href="/aprendizaje/assets/js/41.0717abbc.js"><link rel="prefetch" href="/aprendizaje/assets/js/42.91c3fc37.js"><link rel="prefetch" href="/aprendizaje/assets/js/43.13dcaab4.js"><link rel="prefetch" href="/aprendizaje/assets/js/44.8510d30b.js"><link rel="prefetch" href="/aprendizaje/assets/js/45.fe3c843d.js"><link rel="prefetch" href="/aprendizaje/assets/js/46.fc238d92.js"><link rel="prefetch" href="/aprendizaje/assets/js/47.1868bb9b.js"><link rel="prefetch" href="/aprendizaje/assets/js/48.9c9b68b0.js"><link rel="prefetch" href="/aprendizaje/assets/js/49.1487e3fd.js"><link rel="prefetch" href="/aprendizaje/assets/js/5.a396fb32.js"><link rel="prefetch" href="/aprendizaje/assets/js/50.7d9912b5.js"><link rel="prefetch" href="/aprendizaje/assets/js/51.743ca850.js"><link rel="prefetch" href="/aprendizaje/assets/js/52.5092ad73.js"><link rel="prefetch" href="/aprendizaje/assets/js/53.19e883ce.js"><link rel="prefetch" href="/aprendizaje/assets/js/54.6b8ebc03.js"><link rel="prefetch" href="/aprendizaje/assets/js/55.fce9b1af.js"><link rel="prefetch" href="/aprendizaje/assets/js/56.0338c760.js"><link rel="prefetch" href="/aprendizaje/assets/js/57.49d8ebf0.js"><link rel="prefetch" href="/aprendizaje/assets/js/58.bd068987.js"><link rel="prefetch" href="/aprendizaje/assets/js/59.bdfef050.js"><link rel="prefetch" href="/aprendizaje/assets/js/6.27888615.js"><link rel="prefetch" href="/aprendizaje/assets/js/60.96fce938.js"><link rel="prefetch" href="/aprendizaje/assets/js/61.94e11dfb.js"><link rel="prefetch" href="/aprendizaje/assets/js/7.06129e92.js"><link rel="prefetch" href="/aprendizaje/assets/js/8.b6deb1ab.js"><link rel="prefetch" href="/aprendizaje/assets/js/9.7e901376.js">
    <link rel="stylesheet" href="/aprendizaje/assets/css/0.styles.5e6ce45c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/aprendizaje/" class="home-link router-link-active"><!----> <span class="site-name">Guias</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/aprendizaje/LenguajeSQL/" aria-current="page" class="sidebar-link">SQL</a></li><li><a href="/aprendizaje/LenguajeSQL/select.html" class="sidebar-link">Select</a></li><li><a href="/aprendizaje/LenguajeSQL/where.html" class="sidebar-link">Where</a></li><li><a href="/aprendizaje/LenguajeSQL/filtro.html" class="sidebar-link">Distinct  / Order By / Limit / Offset</a></li><li><a href="/aprendizaje/LenguajeSQL/join.html" class="sidebar-link">Join</a></li><li><a href="/aprendizaje/LenguajeSQL/expresiones.html" aria-current="page" class="active sidebar-link">Expresiones y funciones</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/aprendizaje/LenguajeSQL/expresiones.html#expresiones-funciones" class="sidebar-link">Expresiones/funciones</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/LenguajeSQL/expresiones.html#as" class="sidebar-link">As</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/LenguajeSQL/expresiones.html#funciones-de-grupo" class="sidebar-link">Funciones de grupo</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/LenguajeSQL/expresiones.html#group-by" class="sidebar-link">Group By</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/LenguajeSQL/expresiones.html#having" class="sidebar-link">Having</a></li></ul></li><li><a href="/aprendizaje/LenguajeSQL/modificar.html" class="sidebar-link">Manipulacion de tablas</a></li><li><a href="/aprendizaje/LenguajeSQL/subconsulta.html" class="sidebar-link">SubConsultas</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="expresiones-y-funciones"><a href="#expresiones-y-funciones" class="header-anchor">#</a> Expresiones y funciones</h1> <h2 id="expresiones-funciones"><a href="#expresiones-funciones" class="header-anchor">#</a> Expresiones/funciones</h2> <p>Se puede usar expresiones para escribir una lógica más compleja que se aplica en los valores devuelto por una consulta. Estas expresiones pueden usar funciones matemáticas y de cadena junto con aritmética básica para transformar valores cuando se ejecuta la consulta, como se muestra en este ejemplo de física.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> particle_speed <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token keyword">AS</span> half_particle_speed
<span class="token keyword">FROM</span> physics_data
<span class="token keyword">WHERE</span> ABS<span class="token punctuation">(</span>particle_position<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10.0</span> <span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">;</span>	

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">funcion ABS()</p> <p>La función ABS () devuelve el valor absoluto (positivo) de un número.</p> <p>El valor absoluto de un número consiste en su valor, sin importar su signo. Cuando tomamos el valor absoluto de un número, éste es siempre positivo o cero</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Se pueden usar funciones y operaciones aritméticas en las consultas</p></div> <h2 id="as"><a href="#as" class="header-anchor">#</a> As</h2> <p>Cada base de datos tiene sus propias funciones matemáticas, de cadena y de fecha que se pueden usar en una consulta, que puede encontrar en sus propios documentos respectivos.
El uso de expresiones puede ahorrar tiempo y un posprocesamiento adicional de los datos de resultado, pero también puede hacer que la consulta sea más difícil de leer, por lo que recomendamos que cuando se usen expresiones en SELECT, también se les asigne un alias descriptivo. usando la  palabra clave AS.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> col_expression <span class="token keyword">AS</span> expr_description<span class="token punctuation">,</span> …
<span class="token keyword">FROM</span> mytable<span class="token punctuation">;</span>

</code></pre></div><p>Además de las expresiones, las columnas regulares e incluso las tablas también pueden tener alias para facilitar su referencia en la salida y como parte de la simplificación de consultas más complejas.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">AS</span> better_column_name<span class="token punctuation">,</span> …
<span class="token keyword">FROM</span> a_long_widgets_table_name <span class="token keyword">AS</span> mywidgets
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> widget_sales
  <span class="token keyword">ON</span> mywidgets<span class="token punctuation">.</span>id <span class="token operator">=</span> widget_sales<span class="token punctuation">.</span>widget_id<span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Se utiliza el punto para acceder a una columna especifica de una tabla en particular.</p> <p>Sirve para evitar ambiguedades cuando dos tablan tiene una columna con el mismo nombre</p> <p>tabla.columna</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> title<span class="token punctuation">,</span> <span class="token punctuation">(</span>domestic_sales <span class="token operator">+</span> international_sales<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000000</span> <span class="token keyword">AS</span> gross_sales_millions
<span class="token keyword">FROM</span> movies
  <span class="token keyword">JOIN</span> boxoffice
    <span class="token keyword">ON</span> movies<span class="token punctuation">.</span>id <span class="token operator">=</span> boxoffice<span class="token punctuation">.</span>movie_id<span class="token punctuation">;</span>

</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token keyword">SELECT</span> title<span class="token punctuation">,</span> rating <span class="token operator">*</span> <span class="token number">10</span> <span class="token keyword">AS</span> rating_percent
<span class="token keyword">FROM</span> movies
  <span class="token keyword">JOIN</span> boxoffice
    <span class="token keyword">ON</span> movies<span class="token punctuation">.</span>id <span class="token operator">=</span> boxoffice<span class="token punctuation">.</span>movie_id<span class="token punctuation">;</span>

</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> title<span class="token punctuation">,</span> <span class="token keyword">year</span>
<span class="token keyword">FROM</span> movies
<span class="token keyword">WHERE</span> <span class="token keyword">year</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="funciones-de-grupo"><a href="#funciones-de-grupo" class="header-anchor">#</a> Funciones de grupo</h2> <p>SQL también admite el uso de expresiones (o funciones) agregadas que  permiten resumir información sobre un grupo de filas (ENTIDADES).</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> AGG_FUNC<span class="token punctuation">(</span>column_or_expression<span class="token punctuation">)</span> <span class="token keyword">AS</span> aggregate_description<span class="token punctuation">,</span> …
<span class="token keyword">FROM</span> mytable
<span class="token keyword">WHERE</span> constraint_expression<span class="token punctuation">;</span>

</code></pre></div><p>Sin una agrupación especificada, cada función agregada se ejecutará en todo el conjunto de filas de la consulta y devolverá un solo valor. Y al igual que las expresiones normales, asignar un alias a sus funciones agregadas garantiza que los resultados sean más fáciles de leer y procesar.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>La función se aplica a un conjunto de filas y devuelve un valor(una fila).</p></div> <h3 id="aqui-hay-algunas-funciones-agregadas-comunes-que-usaremos-en-nuestros-ejemplos"><a href="#aqui-hay-algunas-funciones-agregadas-comunes-que-usaremos-en-nuestros-ejemplos" class="header-anchor">#</a> Aquí hay algunas funciones agregadas comunes que usaremos en nuestros ejemplos:</h3> <table><thead><tr><th style="text-align:center;">Funcion</th> <th style="text-align:center;">Descripcion</th></tr></thead> <tbody><tr><td style="text-align:center;">COUNT(*) , COUNT(Columna)</td> <td style="text-align:center;">Si no se especifica ningun nombre de columna  ,se utiliza para contar el número de filas en el grupo  . De lo contrario , cuenta el número de filas en el grupo con valores NO NULL de la columna especificada</td></tr> <tr><td style="text-align:center;">MIN(Columna)</td> <td style="text-align:center;">Encuentra el valor numérico más pequeño de la columna especificada     de todas las filas del grupo</td></tr> <tr><td style="text-align:center;">MAX(Columna)</td> <td style="text-align:center;">Encuentra el valor numérico más grande de la columna especificada     de todas las filas del grupo</td></tr> <tr><td style="text-align:center;">AVG(Columna)</td> <td style="text-align:center;">Encuentra el valor numérico promedio en la columna especificada   del grupo de filas</td></tr> <tr><td style="text-align:center;">SUM(Columna)</td> <td style="text-align:center;">Devuelve la suma de todos los valores numéricos de la columna especificada del grupo de filas</td></tr></tbody></table> <h2 id="group-by"><a href="#group-by" class="header-anchor">#</a> Group By</h2> <p>Además de aplicar una función agregada en todas las filas de una tabla, se  puede aplicar las funciones agregadas a grupos  de datos dentro de ese grupo (es decir, ventas de taquilla para películas de acción y comedias).</p> <p>Esto generaría tantos resultados como grupos definidos por la cláusula GROUP BY.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> AGG_FUNC<span class="token punctuation">(</span>column_or_expression<span class="token punctuation">)</span> <span class="token keyword">AS</span> aggregate_description<span class="token punctuation">,</span> …
<span class="token keyword">FROM</span> mytable
<span class="token keyword">WHERE</span> constraint_expression
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">column</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Group By</p> <p>La cláusula GROUP BY funciona agrupando filas que tienen el mismo valor en la columna especificada.</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">max</span><span class="token punctuation">(</span>Years_employed<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> role<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>years_employed<span class="token punctuation">)</span> <span class="token keyword">as</span> Average_years_employed
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> role<span class="token punctuation">;</span>

</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> building<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>years_employed<span class="token punctuation">)</span> <span class="token keyword">as</span> Total_years_employed
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> building<span class="token punctuation">;</span>

</code></pre></div><h2 id="having"><a href="#having" class="header-anchor">#</a> Having</h2> <p>si la cláusula  GROUP BY se ejecuta después de la cláusula WHERE (que filtra las filas), ¿cómo filtramos exactamente las filas agrupadas(grupo)?</p> <p>Afortunadamente, SQL nos permite hacer esto agregando una  cláusula HAVING adicional que se usa específicamente con la  cláusula GROUP BY para permitirnos filtrar grupos de filas.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>WHERE = Filtra las filas</p> <p>Los que pasen el WHERE, forman grupos (segun la columna especificada)</p> <p>HAVING = Filtra los grupos (conjuntos de filas).</p> <p>Para que el grupo no se descarte, la condición debe ser true.</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> group_by_column<span class="token punctuation">,</span> AGG_FUNC<span class="token punctuation">(</span>column_expression<span class="token punctuation">)</span> <span class="token keyword">AS</span> aggregate_result_alias<span class="token punctuation">,</span> …
<span class="token keyword">FROM</span> mytable
<span class="token keyword">WHERE</span> condition
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">column</span>
<span class="token keyword">HAVING</span> group_condition<span class="token punctuation">;</span>

</code></pre></div><p>HAVING se escribe de la misma forma que WHERE y se aplican a las filas agrupadas.  A menudo es necesario poder aplicar restricciones adicionales para entender rápidamente los datos.</p> <div class="custom-block tip"><p class="custom-block-title">¿Sabías?</p> <p>Si no está utilizando la cláusula <code>GROUP BY</code>, una cláusula simple como <code>WHERE</code> será suficiente.</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> role<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Number_of_artists
<span class="token keyword">FROM</span> employees
<span class="token keyword">WHERE</span> role <span class="token operator">=</span> <span class="token string">&quot;Artist&quot;</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> role<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> role<span class="token punctuation">;</span>


</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> role<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>years_employed<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> role
<span class="token keyword">HAVING</span> role <span class="token operator">=</span> <span class="token string">&quot;Engineer&quot;</span><span class="token punctuation">;</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/aprendizaje/LenguajeSQL/join.html" class="prev">
        Join
      </a></span> <span class="next"><a href="/aprendizaje/LenguajeSQL/modificar.html">
        Manipulacion de tablas
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/aprendizaje/assets/js/app.995f5a2e.js" defer></script><script src="/aprendizaje/assets/js/2.c431ec36.js" defer></script><script src="/aprendizaje/assets/js/35.c6553481.js" defer></script>
  </body>
</html>
