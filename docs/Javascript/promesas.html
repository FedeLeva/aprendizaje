<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Promesas, Async, Await , API | Guias</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Descripcion">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/aprendizaje/assets/css/0.styles.0c7306d5.css" as="style"><link rel="preload" href="/aprendizaje/assets/js/app.48c1f9ec.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/2.c431ec36.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/31.914b9374.js" as="script"><link rel="prefetch" href="/aprendizaje/assets/js/10.ebb9a2d4.js"><link rel="prefetch" href="/aprendizaje/assets/js/11.7f6678e6.js"><link rel="prefetch" href="/aprendizaje/assets/js/12.94178c81.js"><link rel="prefetch" href="/aprendizaje/assets/js/13.7fd153b2.js"><link rel="prefetch" href="/aprendizaje/assets/js/14.ac7318bb.js"><link rel="prefetch" href="/aprendizaje/assets/js/15.0dc76b53.js"><link rel="prefetch" href="/aprendizaje/assets/js/16.e127c599.js"><link rel="prefetch" href="/aprendizaje/assets/js/17.38e9d24d.js"><link rel="prefetch" href="/aprendizaje/assets/js/18.917bc518.js"><link rel="prefetch" href="/aprendizaje/assets/js/19.95f44b8e.js"><link rel="prefetch" href="/aprendizaje/assets/js/20.980fa4da.js"><link rel="prefetch" href="/aprendizaje/assets/js/21.7018fded.js"><link rel="prefetch" href="/aprendizaje/assets/js/22.e33a4cdc.js"><link rel="prefetch" href="/aprendizaje/assets/js/23.e516d08e.js"><link rel="prefetch" href="/aprendizaje/assets/js/24.edd49cff.js"><link rel="prefetch" href="/aprendizaje/assets/js/25.26964830.js"><link rel="prefetch" href="/aprendizaje/assets/js/26.466ededc.js"><link rel="prefetch" href="/aprendizaje/assets/js/27.d8bab02d.js"><link rel="prefetch" href="/aprendizaje/assets/js/28.9898f043.js"><link rel="prefetch" href="/aprendizaje/assets/js/29.f3457f72.js"><link rel="prefetch" href="/aprendizaje/assets/js/3.abdf777b.js"><link rel="prefetch" href="/aprendizaje/assets/js/30.162ed83d.js"><link rel="prefetch" href="/aprendizaje/assets/js/32.dcf54feb.js"><link rel="prefetch" href="/aprendizaje/assets/js/33.9add958a.js"><link rel="prefetch" href="/aprendizaje/assets/js/34.961d4adc.js"><link rel="prefetch" href="/aprendizaje/assets/js/35.183d4b13.js"><link rel="prefetch" href="/aprendizaje/assets/js/36.b2c46711.js"><link rel="prefetch" href="/aprendizaje/assets/js/37.4486e40c.js"><link rel="prefetch" href="/aprendizaje/assets/js/38.d5c9d1ca.js"><link rel="prefetch" href="/aprendizaje/assets/js/39.2b76f93e.js"><link rel="prefetch" href="/aprendizaje/assets/js/4.7e57564e.js"><link rel="prefetch" href="/aprendizaje/assets/js/40.13e06b26.js"><link rel="prefetch" href="/aprendizaje/assets/js/41.3689e6d9.js"><link rel="prefetch" href="/aprendizaje/assets/js/42.3240a50e.js"><link rel="prefetch" href="/aprendizaje/assets/js/43.6a5bf7a5.js"><link rel="prefetch" href="/aprendizaje/assets/js/44.81a48c1e.js"><link rel="prefetch" href="/aprendizaje/assets/js/45.5fec4f41.js"><link rel="prefetch" href="/aprendizaje/assets/js/46.847b7777.js"><link rel="prefetch" href="/aprendizaje/assets/js/47.1a152208.js"><link rel="prefetch" href="/aprendizaje/assets/js/48.d89da42f.js"><link rel="prefetch" href="/aprendizaje/assets/js/5.a538946e.js"><link rel="prefetch" href="/aprendizaje/assets/js/6.27888615.js"><link rel="prefetch" href="/aprendizaje/assets/js/7.06129e92.js"><link rel="prefetch" href="/aprendizaje/assets/js/8.81d4deb1.js"><link rel="prefetch" href="/aprendizaje/assets/js/9.7e901376.js">
    <link rel="stylesheet" href="/aprendizaje/assets/css/0.styles.0c7306d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/aprendizaje/" class="home-link router-link-active"><!----> <span class="site-name">Guias</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/aprendizaje/Javascript/" aria-current="page" class="sidebar-link">Javascript</a></li><li><a href="/aprendizaje/Javascript/basico.html" class="sidebar-link">JavaScript Basico</a></li><li><a href="/aprendizaje/Javascript/basico-2.html" class="sidebar-link">JavaScript Basico 2</a></li><li><a href="/aprendizaje/Javascript/objeto.html" class="sidebar-link">Objeto</a></li><li><a href="/aprendizaje/Javascript/DOM.html" class="sidebar-link">DOM</a></li><li><a href="/aprendizaje/Javascript/array.html" class="sidebar-link">Array</a></li><li><a href="/aprendizaje/Javascript/formulario.html" class="sidebar-link">Validaciones (Formulario)</a></li><li><a href="/aprendizaje/Javascript/promesas.html" aria-current="page" class="active sidebar-link">Promesas, Async, Await , API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#callback" class="sidebar-link">CallBack</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#callback-hell" class="sidebar-link">Callback Hell</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#promesas" class="sidebar-link">Promesas</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#hell-de-las-promesas" class="sidebar-link">Hell de las Promesas</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#settimeout" class="sidebar-link">setTimeout()</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#async-await" class="sidebar-link">async await</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#try-catch" class="sidebar-link">Try catch</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#promise-all" class="sidebar-link">Promise.all</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#fetch-api" class="sidebar-link">fetch API</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#json" class="sidebar-link">json()</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#¿que-son-las-apis" class="sidebar-link">¿Qué son las APIs?</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#apis-en-javascript-del-lado-cliente" class="sidebar-link">APIs en JavaScript del lado cliente</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#apis-de-navegador-mas-comunes" class="sidebar-link">APIs de navegador más comunes</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#apis-populares-de-terceros" class="sidebar-link">APIs populares de terceros</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#¿que-es-api-rest" class="sidebar-link">¿Que es API REST?</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/Javascript/promesas.html#¿que-es-restful" class="sidebar-link">¿Qué es Restful?</a></li></ul></li><li><a href="/aprendizaje/Javascript/ajax.html" class="sidebar-link">AJAX Y FETCH</a></li><li><a href="/aprendizaje/Javascript/poo.html" class="sidebar-link">JS POO</a></li><li><a href="/aprendizaje/Javascript/modulos.html" class="sidebar-link">Export/Import/LocalStorage</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="promesas-async-await-api"><a href="#promesas-async-await-api" class="header-anchor">#</a> Promesas, Async, Await , API</h1> <h2 id="callback"><a href="#callback" class="header-anchor">#</a> CallBack</h2> <ul><li>Es una función que se pasa a otra función como un argumento, que luego se invoca dentro de la función externa para completar algún tipo de rutina o acción.</li> <li>Cada vez se ocupan menos.</li> <li>Pasar una función como argumento.</li> <li>Es una función que se pasa como argumento a otra función (externa).</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Tener en cuenta los parametros de la funcion callback</p></div> <p>Ejemplo de una funcion callback con 1 parametro:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qui est esse&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;est rerum tempore vitae\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\nqui aperiam non debitis possimus qui neque nisi nulla&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ea molestias quasi exercitationem repellat qui ipsa sit aut&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;et iusto sed quo iure\nvoluptatem occaecati omnis eligendi aut ad\nvoluptatem doloribus vel accusantium quis pariatur\nmolestiae porro eius odio et labore et velit aut&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Creamos una funcion flecha</span>
<span class="token keyword">const</span> <span class="token function-variable function">findPostById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">callback</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// La llamamos</span>
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="manejar-los-errores"><a href="#manejar-los-errores" class="header-anchor">#</a> Manejar los Errores</h3> <div class="custom-block warning"><p class="custom-block-title">Problema</p> <p>Si la ID buscada no está, aparece un error.</p></div> <p>Solución:</p> <p>Siempre en los callback se manda como primer argumento el error y en el segundo argumento la respuesta satisfactoria (funciono correctamente).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Las funciones callback deben tener dos argumentos, por lo tanto.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Creamos una funcion flecha</span>
<span class="token keyword">const</span> <span class="token function-variable function">findPostById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Existe el post?</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Si lo encontro</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token punctuation">,</span> post<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Si no lo encuentra</span>
        <span class="token comment">// En el error</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&quot;No se encontro el post con id &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// La llamamos</span>
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err <span class="token punctuation">,</span> post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Si existe el error</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="callback-hell"><a href="#callback-hell" class="header-anchor">#</a> Callback Hell</h2> <p>Cuando hay muchas validaciones (callback anidados (error/correcto))</p> <p>Cuando hay un callback dentro de otro callback y así consecutivamente.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// La llamamos</span>
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> post2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post2<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err <span class="token punctuation">,</span> post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           <span class="token comment">// Return de una linea</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>

          <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err <span class="token punctuation">,</span> post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

       <span class="token punctuation">}</span><span class="token punctuation">)</span>
     

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="promesas"><a href="#promesas" class="header-anchor">#</a> Promesas</h2> <p>Para solucionar el callback hell , aparecieron las promesas.</p> <p>Es una promesa, donde el otro espera dos cosas , que  cumpla la promesa o que no la cumpla.</p> <p>En caso de que se cumpla la promesa sucede algo y en caso que no, sucede otra cosa.</p> <p>Una Promise (promesa en castellano) es un objeto que representa la terminación(éxito) o el fracaso de una operación asíncrona.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Creamos una funcion flecha</span>
<span class="token keyword">const</span> <span class="token function-variable function">findPostById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">;</span>
   <span class="token comment">// Devolvemos una promesa (nueva)</span>
   <span class="token comment">// La promesa tiene un callback con dos argumentos , la respuesta sastifactoria y la negativa</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sastifactoria <span class="token punctuation">,</span> negativa</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token comment">// Si existe el post  </span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
           <span class="token comment">// Respuesta sastifactoria</span>
           <span class="token comment">// Tiene un argumento</span>
        <span class="token function">sastifactoria</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token comment">// Respuesta negativa</span>
          <span class="token function">negativa</span><span class="token punctuation">(</span><span class="token string">&quot;no se encontro id   &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

   <span class="token punctuation">}</span><span class="token punctuation">)</span>

   
  

<span class="token punctuation">}</span>

<span class="token comment">// Llamamos a la funcion y devuelve una promesa</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Se usa la propiedad then para obtener la respuesta sastifactoria</span>
<span class="token comment">// Se requiere un callback en el then con los mismos argumentos que la respuesta sastifactoria</span>
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	
<span class="token comment">// Se usa la propiedad catch para obtener la respuesta negativa , la cual tambien necesita un callback con los mismos argumentos que la respuesta negativa.</span>
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Se puede hacer de esta manera tambien:</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// Creamos una funcion flecha</span>
  <span class="token comment">// Devolvemos una promesa (resolve = respuesta sastifactoria , reject = respuesta negativa)</span>
 <span class="token comment">// Devuelve una promesa la función flecha</span>
  <span class="token keyword">const</span> <span class="token function-variable function">findPostById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token comment">// Si existe el post</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token comment">// Respuesta sastifactoria</span>
                 <span class="token comment">// Tiene un argumento</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
               <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                   <span class="token comment">// Si no existe el post</span>
                   <span class="token comment">// Respuesta negativa</span>
                   <span class="token comment">// Tiene un argumento</span>
                  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;no se encontro id   &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Si no se necesita parámetros, se devuelve directamente la promesa sin necesidad de la función flecha</p></div> <h2 id="hell-de-las-promesas"><a href="#hell-de-las-promesas" class="header-anchor">#</a> Hell de las Promesas</h2> <p>Muchas promesas anidadas</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Como se puede ver, el then() puede devolver una promesa y se trata con otro then</span>
<span class="token comment">// un catch es suficiente para tratar todas las respuestas negativas</span>
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="settimeout"><a href="#settimeout" class="header-anchor">#</a> setTimeout()</h2> <h3 id="tiene-dos-parametros"><a href="#tiene-dos-parametros" class="header-anchor">#</a> Tiene dos parámetros.</h3> <ol><li>Una función</li> <li>El tiempo en milisegundo</li></ol> <p>setTimeout ejecutara la función especificada (1 parametro)  después de x(2 parámetro) tiempo.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// La funcion se ejecuta despues de 2 segundos</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span>  <span class="token punctuation">(</span>post<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
               <span class="token function">resolve</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> 
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;No encontrado por id: &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="async-await"><a href="#async-await" class="header-anchor">#</a> async await</h2> <p>Vamos a suponer que demora un tiempo tratar una base de datos.</p> <p>Para eso usaremos la función setTimeout().</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">findPostById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span>  <span class="token punctuation">(</span>post<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
               <span class="token function">resolve</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> 
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;No encontrado por id: &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Las promesas son asíncronas. Se empiezan a ejecutar sin detener el código.</p> <p>No me voy a quedar esperando a que el otro cumpla la promesa o no.</p> <p>Mientras se espera una respuesta (de la promesa), se sigue ejecutando el resto.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">findPostById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> post <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span>  <span class="token punctuation">(</span>post<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
               <span class="token function">resolve</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> 
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;No encontrado por id: &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    
<span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fin del codigo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Regla 1</p> <p>Hay que utilizar funciones async.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>el await no puede funcionar sin un async.</p> <p>con la palabra await se espera a que se ejecute la instrucción(promesa) para luego seguir con el resto del código.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">buscar</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">findPostById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">buscar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fin del codigo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Ojo</p> <p>el await debe estar adentro de un async para funcionar.</p> <p>el async y el await funciona solo con promesas</p></div> <ul><li>async : La declaración de función async define una función asíncrona</li> <li>await: El operador await es usado para esperar a una Promise. Sólo puede ser usado dentro de una función async function.</li></ul> <h2 id="try-catch"><a href="#try-catch" class="header-anchor">#</a> Try catch</h2> <h3 id="manejar-errores"><a href="#manejar-errores" class="header-anchor">#</a> Manejar Errores</h3> <p>Se utiliza try catch</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span> 
intenta ejecutar esto
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
Si falla lo que contiene el <span class="token keyword">try</span><span class="token punctuation">,</span> se ejecuta esto
<span class="token punctuation">}</span>

</code></pre></div><p>se puede usar el finally a lo ultimo para ejecutar un código al final (se ejecuta si o si)</p> <p>Se usa para la barra de cargar</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">buscar</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">findPostById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;se ejecuta si o si&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   
   
<span class="token punctuation">}</span>
<span class="token function">buscar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fin del codigo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">buscar</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> postUno <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> postDos <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//está demorando 4 segundos </span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>postUno<span class="token punctuation">.</span>title<span class="token punctuation">,</span> postDos<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">buscar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="promise-all"><a href="#promise-all" class="header-anchor">#</a> Promise.all</h2> <p>Pero si quieres que demore menos, cuando estas esperando promesa que no dependen entre ellas.</p> <p>para eso se utiliza Promise.all que recibe las promesas que se quieren ejecutar.</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> <span class="token function-variable function">buscar</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// Ejecutamos dos promesas juntas y devuelve los resultados en un array</span>
            <span class="token keyword">const</span> resPosts <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token function">findPostById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
          
    
            
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resPosts<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resPosts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resPosts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token function">buscar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;final del codigo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>el await sirve para esperar a una promesa.</p></div> <div class="custom-block warning"><p class="custom-block-title">Advertencia</p> <p>Solo te manda la respuesta (te devuelve el array) si todas las promesas funcionan correctamente.</p> <p>Si uno falla, va a saltar al catch y no va a seguir con el código en cuestión (no devuelve el array).</p></div> <h2 id="fetch-api"><a href="#fetch-api" class="header-anchor">#</a> fetch API</h2> <p>La API Fetch proporciona una interfaz para recuperar recursos (incluso a través de la red). Resultará familiar a cualquiera que haya usado XMLHttpRequest, pero la nueva API ofrece un conjunto de características más potente y flexible.</p> <ul><li><p>El método fetch() toma un argumento obligatorio, la ruta de acceso al recurso que desea recuperar.</p></li> <li><p>Devuelve una Promise que contiene la Response</p></li> <li><p>Una vez que Response es recuperada, hay varios métodos disponibles para definir cuál es el contenido del cuerpo y como se debe manejar.</p> <p><a href="https://jsonplaceholder.typicode.com/" target="_blank" rel="noopener noreferrer">API que vamos a usar en los ejemplos<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// lA url CON TODOS LOS POST</span>
<span class="token comment">// const url = 'https://jsonplaceholder.typicode.com/posts';</span>

<span class="token comment">// La url con el post que tiene la id 1</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.typicode.com/posts/1'</span><span class="token punctuation">;</span>

<span class="token comment">//El fetch recibe la url del recurso y devuelve una promesa</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token comment">// Te muestra el response</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="metodos-del-response"><a href="#metodos-del-response" class="header-anchor">#</a> Metodos del response</h3> <h2 id="json"><a href="#json" class="header-anchor">#</a> json()</h2> <p>Te transforma la respuesta en json y te devuelve una promesa(con el contenido de la respuesta en formato json).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//El fetch recibe la url del recurso y devuelve una promesa</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token comment">// Te muestra el response</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="completo"><a href="#completo" class="header-anchor">#</a> Completo</h3> <p>Tiene el catch(maneja los errores) y el finally(se ejecuta al final)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//El fetch recibe la url del recurso y devuelve una promesa</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token comment">// Te muestra el response</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;finalizo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Podemos acceder a la url porque es una petición GET.</p> <p>Podes configurar las cabeceras, métodos, verbos, etc con fetch pero por defecto lo hace GET.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.typicode.com/posts/1'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">buscarID</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// Es importante el await porque data depende de res</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">buscarID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.typicode.com/posts/'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">buscarID</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// Es importante el await porque data depende de res</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">buscarID</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="¿que-son-las-apis"><a href="#¿que-son-las-apis" class="header-anchor">#</a> ¿Qué son las APIs?</h2> <p>Interfaces de Programacion de Aplicaciones (APIs por sus siglas en inglés)</p> <p>API son construcciones disponibles en los lenguajes de programación que permiten a los desarrolladores crear funcionalidades complejas de una manera simple. Estas abstraen el código más complejo para proveer una sintaxis más fácil de usar en su lugar.</p> <p>Si quisieras programar gráficos 3D, sería mucho más facil hacerlo usando una API escrita en un lenguaje de alto nivel como JavaScript o Python, en lugar de intentar escribir código de bajo nivel (por ejemplo: C o C++) que controle directamente la GPU del equipo u otras funciones gráficas</p> <div class="custom-block tip"><p class="custom-block-title">API</p> <p>Es cuando queremos conectarnos a un recurso.</p> <p>A través del “recurso”, obtenemos funcionalidades que pueden estar escrito en otro lenguaje.</p> <p>Esas funcionalidades puede usar utilizar Google maps , habilitar la cámara del teléfono , brindar información o manipularla  , etc.</p> <p>API es una forma de comunicar dos recursos con un estándar.</p></div> <h2 id="apis-en-javascript-del-lado-cliente"><a href="#apis-en-javascript-del-lado-cliente" class="header-anchor">#</a> APIs en JavaScript del lado cliente</h2> <p>JavaScript del lado cliente, particularmente, tiene muchas APIs disponibles — estas no son parte del lenguaje en sí, sino que están construidas sobre el núcleo de este lenguaje de programación, proporcionándote superpoderes adicionales para usar en tu código. Por lo general, se dividen en dos categorías:</p> <ul><li>Las APIs de navegador: están integradas en tu navegador web, Por ejemplo, la API de Geolocalización proporciona algunas construcciones simples de JavaScript para obtener datos de ubicación con los que, por ejemplo, trazar tu ubicación en un mapa de Google. Realmente, el navegador está haciendo uso de códigos de bajo nivel complejos en segundo plano (por ejemplo, C++) para comunicarse con el hardware GPS del dispositivo (o lo que esté disponible para determinar los datos de posición), recuperar datos de posición y devolverlos al entorno del navegador para su uso en tu código. Pero una vez más, la API se encarga de abstraer esta complejidad.
Ej: fetch API , DOM , para acceder a la cámara , etc.</li> <li>Las APIs de terceros: no están incluídas por defecto en el navegador, y por lo general es necesario obtener el código e información desde algún lugar de la Web. Por ejemplo, la API de Twitter permite hacer cosas como mostrar tus últimos tweets en un sitio web.
Es la que accedemos a sus recursos
Ej: La url que usamos,</li></ul> <h2 id="apis-de-navegador-mas-comunes"><a href="#apis-de-navegador-mas-comunes" class="header-anchor">#</a> APIs de navegador más comunes</h2> <ul><li>APIs para manipular documentos cargados en el navegador. El ejemplo más obvio es la API DOM</li> <li>APIs que obtienen datos del servidor, comunmente usadas para actualizar pequeñas secciones de una página web. Fetch API</li> <li>Las APIs para dibujar y manipular graficos: Las más populares son Canvas y WebGL</li> <li>APIS de audio y vídeo como HTMLMediaElement, la Web Audio API, y WebRTC</li> <li>Las APIs de dispositivos: geolocalización, notificaciones de sistema, vibración de hardware, etc</li> <li>Las APIS de almacenamiento en el lado del cliente: Web Storage API (sessionStorage, localStorage), IndexedDB API</li></ul> <h2 id="apis-populares-de-terceros"><a href="#apis-populares-de-terceros" class="header-anchor">#</a> APIs populares de terceros</h2> <ul><li>Google maps</li> <li>Facebook, Twitter, Instagram, Discord, Youtube, etc</li> <li>jsonplaceholde</li></ul> <h2 id="¿que-es-api-rest"><a href="#¿que-es-api-rest" class="header-anchor">#</a> ¿Que es API REST?</h2> <div class="custom-block tip"><p class="custom-block-title">REST</p> <p>Es un estándar</p> <p>Un paso a paso que hay que seguir para que sea una API REST.</p></div> <p>REST: &quot;Representational State Transfer&quot; o traducido a &quot;Transferencia de presentación de estado&quot;.</p> <p>Cuando queremos comunicar nuestro mundo del Frontend con el Backend (por ejemplo con Node.js), necesitamos alguna técnica.</p> <p>Aquí es donde nosotros podemos construir nuestra propia API para que nuestras aplicaciones se comuniquen de manera efectiva.</p> <p>Para que la comunicación no sea un despelote existe el término de REST, que es un estandar para la construcción de APIS. una técnica de arquitectura de software usada para construir APIs que permitan comunicar a nuestro servidor con sus clientes usando el protocolo HTTP mediante URIs lo suficientemente inteligentes para poder satisfacer la necesidad del cliente.</p> <p>Por ende API REST en simples palabras sería: Una forma de entregar recursos para su utilización (comunicación) estandarizado y basado en arquitectura REST.</p> <p>Para que sea REST:</p> <ul><li>REST es STATELESS: TOKEN para cada petición realizada a la API. (trabaja con token)</li> <li>Crea URIs únicas que permiten al cliente entender y utilizar lo que está exponiendo. api.anexsoft.com/users (tiene uris únicas)</li> <li>Tiene que responder a verbos Http: GET, POST, PUT, DELETE (trabajo con los verbos conocidos)</li></ul> <h2 id="¿que-es-restful"><a href="#¿que-es-restful" class="header-anchor">#</a> ¿Qué es Restful?</h2> <p>REST es el concepto, RESTFul es la implementación y al crear un RESTFul creamos una API, la cual una API es un conjunto de funciones o procedimientos para que sea utilizado por otro software.</p> <div class="custom-block tip"><p class="custom-block-title">Restful</p> <p>Si ya esta en producción y ya se puede comunicar con otros software , es una API Restful</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/aprendizaje/Javascript/formulario.html" class="prev">
        Validaciones (Formulario)
      </a></span> <span class="next"><a href="/aprendizaje/Javascript/ajax.html">
        AJAX Y FETCH
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/aprendizaje/assets/js/app.48c1f9ec.js" defer></script><script src="/aprendizaje/assets/js/2.c431ec36.js" defer></script><script src="/aprendizaje/assets/js/31.914b9374.js" defer></script>
  </body>
</html>
