<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Proyecto | Guias</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Descripcion">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/aprendizaje/assets/css/0.styles.434ab0ef.css" as="style"><link rel="preload" href="/aprendizaje/assets/js/app.f1543609.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/2.c431ec36.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/56.0843ee84.js" as="script"><link rel="prefetch" href="/aprendizaje/assets/js/10.ebb9a2d4.js"><link rel="prefetch" href="/aprendizaje/assets/js/11.7f6678e6.js"><link rel="prefetch" href="/aprendizaje/assets/js/12.94178c81.js"><link rel="prefetch" href="/aprendizaje/assets/js/13.95d0f2b6.js"><link rel="prefetch" href="/aprendizaje/assets/js/14.6e683a1f.js"><link rel="prefetch" href="/aprendizaje/assets/js/15.0dc76b53.js"><link rel="prefetch" href="/aprendizaje/assets/js/16.e127c599.js"><link rel="prefetch" href="/aprendizaje/assets/js/17.38e9d24d.js"><link rel="prefetch" href="/aprendizaje/assets/js/18.917bc518.js"><link rel="prefetch" href="/aprendizaje/assets/js/19.a7f4a9f4.js"><link rel="prefetch" href="/aprendizaje/assets/js/20.980fa4da.js"><link rel="prefetch" href="/aprendizaje/assets/js/21.3dee1d1e.js"><link rel="prefetch" href="/aprendizaje/assets/js/22.5e4685fa.js"><link rel="prefetch" href="/aprendizaje/assets/js/23.e516d08e.js"><link rel="prefetch" href="/aprendizaje/assets/js/24.e1eea224.js"><link rel="prefetch" href="/aprendizaje/assets/js/25.26964830.js"><link rel="prefetch" href="/aprendizaje/assets/js/26.466ededc.js"><link rel="prefetch" href="/aprendizaje/assets/js/27.1f8bcfc3.js"><link rel="prefetch" href="/aprendizaje/assets/js/28.59420c31.js"><link rel="prefetch" href="/aprendizaje/assets/js/29.00dd2b28.js"><link rel="prefetch" href="/aprendizaje/assets/js/3.826a461f.js"><link rel="prefetch" href="/aprendizaje/assets/js/30.162ed83d.js"><link rel="prefetch" href="/aprendizaje/assets/js/31.914b9374.js"><link rel="prefetch" href="/aprendizaje/assets/js/32.dcf54feb.js"><link rel="prefetch" href="/aprendizaje/assets/js/33.9add958a.js"><link rel="prefetch" href="/aprendizaje/assets/js/34.961d4adc.js"><link rel="prefetch" href="/aprendizaje/assets/js/35.183d4b13.js"><link rel="prefetch" href="/aprendizaje/assets/js/36.b2c46711.js"><link rel="prefetch" href="/aprendizaje/assets/js/37.1e88eb19.js"><link rel="prefetch" href="/aprendizaje/assets/js/38.76485511.js"><link rel="prefetch" href="/aprendizaje/assets/js/39.2b76f93e.js"><link rel="prefetch" href="/aprendizaje/assets/js/4.d769db63.js"><link rel="prefetch" href="/aprendizaje/assets/js/40.13e06b26.js"><link rel="prefetch" href="/aprendizaje/assets/js/41.d1f1644f.js"><link rel="prefetch" href="/aprendizaje/assets/js/42.c441fa36.js"><link rel="prefetch" href="/aprendizaje/assets/js/43.c6a9e4fd.js"><link rel="prefetch" href="/aprendizaje/assets/js/44.c9fdf34e.js"><link rel="prefetch" href="/aprendizaje/assets/js/45.ac1f7545.js"><link rel="prefetch" href="/aprendizaje/assets/js/46.41c15994.js"><link rel="prefetch" href="/aprendizaje/assets/js/47.801d7715.js"><link rel="prefetch" href="/aprendizaje/assets/js/48.b04ca52a.js"><link rel="prefetch" href="/aprendizaje/assets/js/49.9a809317.js"><link rel="prefetch" href="/aprendizaje/assets/js/5.a396fb32.js"><link rel="prefetch" href="/aprendizaje/assets/js/50.425afa5e.js"><link rel="prefetch" href="/aprendizaje/assets/js/51.cb98c0b0.js"><link rel="prefetch" href="/aprendizaje/assets/js/52.6031d4b6.js"><link rel="prefetch" href="/aprendizaje/assets/js/53.20ccf08a.js"><link rel="prefetch" href="/aprendizaje/assets/js/54.95dde82a.js"><link rel="prefetch" href="/aprendizaje/assets/js/55.2b0adee8.js"><link rel="prefetch" href="/aprendizaje/assets/js/57.d0be692a.js"><link rel="prefetch" href="/aprendizaje/assets/js/58.38ed085f.js"><link rel="prefetch" href="/aprendizaje/assets/js/59.8a8a2036.js"><link rel="prefetch" href="/aprendizaje/assets/js/6.27888615.js"><link rel="prefetch" href="/aprendizaje/assets/js/60.02eed353.js"><link rel="prefetch" href="/aprendizaje/assets/js/61.638fccbf.js"><link rel="prefetch" href="/aprendizaje/assets/js/62.6b368ae7.js"><link rel="prefetch" href="/aprendizaje/assets/js/7.06129e92.js"><link rel="prefetch" href="/aprendizaje/assets/js/8.9737c9fc.js"><link rel="prefetch" href="/aprendizaje/assets/js/9.7e901376.js">
    <link rel="stylesheet" href="/aprendizaje/assets/css/0.styles.434ab0ef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/aprendizaje/" class="home-link router-link-active"><!----> <span class="site-name">Guias</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/aprendizaje/React/" aria-current="page" class="sidebar-link">React</a></li><li><a href="/aprendizaje/React/introduccion.html" class="sidebar-link">Introduccion</a></li><li><a href="/aprendizaje/React/formulario.html" class="sidebar-link">Formulario</a></li><li><a href="/aprendizaje/React/todoApp.html" class="sidebar-link">App todo</a></li><li><a href="/aprendizaje/React/api.html" class="sidebar-link">Consumir API</a></li><li><a href="/aprendizaje/React/affect.html" class="sidebar-link">React Router v6</a></li><li><a href="/aprendizaje/React/context.html" class="sidebar-link">Context API</a></li><li><a href="/aprendizaje/React/reducer.html" class="sidebar-link">Reducer</a></li><li><a href="/aprendizaje/React/redux.html" class="sidebar-link">Redux</a></li><li><a href="/aprendizaje/React/proyecto.html" aria-current="page" class="active sidebar-link">Proyecto</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#vite" class="sidebar-link">Vite</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#react-router-v6" class="sidebar-link">React Router v6</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#navbar" class="sidebar-link">Navbar</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#context" class="sidebar-link">Context</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#ruta-protegida" class="sidebar-link">Ruta Protegida</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#hook-usenavigate" class="sidebar-link">hook useNavigate</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#firebase-9" class="sidebar-link">FireBase 9</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#auth" class="sidebar-link">Auth</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#createuserwithemailandpassword" class="sidebar-link">createUserWithEmailAndPassword</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#signinwithemailandpassword" class="sidebar-link">signInWithEmailAndPassword</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#signout" class="sidebar-link">signOut</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#onauthstatechanged" class="sidebar-link">onAuthStateChanged</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#loading-y-redirrecion" class="sidebar-link">Loading y Redirrecion</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#react-hook-form" class="sidebar-link">React hook form</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#refactorizar" class="sidebar-link">Refactorizar</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#useref" class="sidebar-link">useRef</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#forwardref" class="sidebar-link">forwardRef</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#forwardref-proyecto" class="sidebar-link">forwardRef Proyecto</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#children" class="sidebar-link">Children</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#login" class="sidebar-link">Login</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#problemas" class="sidebar-link">Problemas</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#tailwindcss-flowbite" class="sidebar-link">TailwindCSS &amp; flowbite</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#outlet" class="sidebar-link">Outlet</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#navbar-jsx" class="sidebar-link">Navbar.jsx</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#ruta-protegida-2" class="sidebar-link">Ruta protegida #2</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#ruta-404" class="sidebar-link">Ruta 404</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#button-loading" class="sidebar-link">Button loading</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#firestore-bd" class="sidebar-link">Firestore BD</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#getdocs" class="sidebar-link">getDocs</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#where" class="sidebar-link">Where</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#add-doc" class="sidebar-link">Add Doc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#loading-parametro-set-de-usestate" class="sidebar-link">Loading (Parametro set de useState)</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#delete-doc" class="sidebar-link">Delete doc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#update-doc" class="sidebar-link">Update Doc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#problemas-botones" class="sidebar-link">PROBLEMAS BOTONES</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#hook-form-home" class="sidebar-link">Hook Form Home</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#card-flowbite" class="sidebar-link">Card flowbite</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#handleclickcopy" class="sidebar-link">handleClickCopy</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#redirect-params-en-la-url-getdoc" class="sidebar-link">Redirect (params en la url) / getDoc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#regla-de-seguridad" class="sidebar-link">Regla de seguridad</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/proyecto.html#deploy" class="sidebar-link">Deploy</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proyecto"><a href="#proyecto" class="header-anchor">#</a> Proyecto</h1> <h2 id="vite"><a href="#vite" class="header-anchor">#</a> Vite</h2> <ul><li><a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer">Sitio web<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Vite se define como una herramienta de frontend que te ayudará a crear proyectos (sin atarte a ningún framework concreto) y que su desarrollo y construcción final sea lo más sencilla posible.</li> <li>Está desarrollada por Evan You, el creador de Vue.</li> <li>Actualmente, Vite soporta tanto proyectos vanilla (sin utilizar frameworks), como proyectos utilizando Vue, React, Preact o Lit-element (tanto en versión Javascript, como Typescript).</li> <li><a href="https://lenguajejs.com/automatizadores/vite/guia-tutorial-inicial-de-vite/" target="_blank" rel="noopener noreferrer">guia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vitejs/awesome-vite#templates" target="_blank" rel="noopener noreferrer">template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer">comunidad<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token comment"># npm 6.x</span>
npm create vite@latest my<span class="token operator">-</span>vue<span class="token operator">-</span>app

<span class="token comment"># yarn</span>
yarn create vite my<span class="token operator">-</span>vue<span class="token operator">-</span>app <span class="token operator">--</span>template vue

<span class="token comment"># pnpm</span>
pnpm create vite my<span class="token operator">-</span>vue<span class="token operator">-</span>app <span class="token operator">--</span> <span class="token operator">--</span>template vue

</code></pre></div><h3 id="crear-proyecto"><a href="#crear-proyecto" class="header-anchor">#</a> Crear proyecto</h3> <p>Omiti el my-vue-app</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm create vite@latest 
</code></pre></div><p>Complete lo campos</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Cuidado con el antivirus, que a veces te detecta alguna dependencia como “peligrosa”</p></div> <div class="language-powershell extra-class"><pre class="language-powershell"><code>cd carpeta proyecto
npm i o npm install
npm run dev
</code></pre></div><h3 id="estructura-del-archivo"><a href="#estructura-del-archivo" class="header-anchor">#</a> Estructura del archivo</h3> <ul><li>main.jsx = index.js</li> <li>el index.html esta en la carpeta raiz y no en public</li></ul> <h2 id="react-router-v6"><a href="#react-router-v6" class="header-anchor">#</a> React Router v6</h2> <ul><li><a href="https://reactrouter.com/docs/en/v6/getting-started/installation" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Los router se pueden trabajar con otras herramientas , pero nosotros vamos a usar React-Router</li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install react<span class="token operator">-</span>router<span class="token operator">-</span>dom@6
</code></pre></div><p>Eliminamos el logo y el App.css</p> <p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token constant">APP</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Renderizamos BrowserRouter alrededor de toda la aplicación , para que pueda usar el sistema de router</p></div> <p>main.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* Acceso al router */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

</code></pre></div><h3 id="carpeta-routes"><a href="#carpeta-routes" class="header-anchor">#</a> carpeta Routes</h3> <ul><li>Creamos la carpeta routes  en src  , que va a contener componentes que se van a mostrar en las rutas.</li> <li>La carpeta tambien puede llamarse views</li></ul> <p>src/routes/Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><p>src/routes/Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login

</code></pre></div><p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./routes/Home&quot;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&quot;./routes/Login&quot;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* Adentro de Routes , solo pueden ir las rutas , no codigo JSX como el h1 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* Adentro de routes creamos las rutas 
      Cada &lt;Route&gt;&lt;/Route&gt; es una ruta */</span><span class="token punctuation">}</span>
      
        <span class="token punctuation">{</span><span class="token comment">/* path=ruta element=componente a renderizar en el path */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><h2 id="navbar"><a href="#navbar" class="header-anchor">#</a> Navbar</h2> <ul><li>Es un componente por lo tanto va en la carpeta components de src</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Todo lo que es reutilizable va en components</li> <li>Las rutas no son reutilizable.</li></ul></div> <p>src/components/Navbar.jsx</p> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Los NavLink no refrescan la pagina</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Navbar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* NavLink es como la etiqueta &lt;a&gt;&lt;/a&gt;
                el props &quot;to&quot; es como el atributo &quot;href&quot; */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Inicio<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Navbar

</code></pre></div><h3 id="navlink"><a href="#navlink" class="header-anchor">#</a> NavLink</h3> <ul><li>Al hacer click en el enlace, se le añadirá la clase active.</li> <li>Cuando el link pertenece activo (estás viendo el contenido del enlace), contiene la clase active.</li> <li>Sirve para mostrarle al usuario en que pagina(link) esta</li></ul> <h3 id="link"><a href="#link" class="header-anchor">#</a> Link</h3> <ul><li>No destaca/resalta la pagina en la que esta el usuario , no utiliza ni añade la clase active.</li></ul> <p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>Navbar<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* Adentro de Routes , solo pueden ir las rutas , no codigo JSX como el h1 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>

</code></pre></div><h2 id="context"><a href="#context" class="header-anchor">#</a> Context</h2> <p>Creamos la carpeta context , donde va a estar el context.</p> <p>src/context/UserProvider.jsx</p> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Tiene la estructura de un componente</li> <li>El context se exporta con una exportación con nombre.</li> <li>El provider se exporta por defecto.</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span>  <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

 <span class="token comment">// Creamos el contexto</span>
 <span class="token keyword">export</span> <span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">UserProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>UserContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* children =    Todos los componentes hijos */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UserProvider<span class="token punctuation">;</span>

</code></pre></div><p>main.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>UserProvider<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* Acceso al router */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserProvider<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

</code></pre></div><p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Obtenemos el valor de la props value del Provider del context</span>
  <span class="token comment">// useContext(context)</span>
 <span class="token keyword">const</span> <span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">}</span> <span class="token operator">=</span>  <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      user<span class="token operator">?</span> <span class="token string">&quot;En linea&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Offline&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Acceder<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login

</code></pre></div><p>NavBar.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../context/userProvider&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Navbar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// Obtenemos el valor de la props value del Provider del context</span>
  <span class="token comment">// useContext(context)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token comment">/* NavLink es como la etiqueta &lt;a&gt;&lt;/a&gt;
                el props &quot;to&quot; es como el atributo &quot;href&quot; */</span><span class="token punctuation">}</span>
                <span class="token punctuation">{</span>
                     user <span class="token operator">?</span>     <span class="token punctuation">(</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Inicio<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                     <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                     <span class="token punctuation">)</span> <span class="token operator">:</span>  <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span>
            
           
               
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Navbar

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Explicacion</p> <ul><li>Todo lo que contiene el props value de Provider se comparte con todos los  componentes hijos de este.</li> <li>Con el useContext accedemos al props value.</li> <li>Con el provider especificamos que componentes tienen acceso al props value.</li></ul></div> <h2 id="ruta-protegida"><a href="#ruta-protegida" class="header-anchor">#</a> Ruta Protegida</h2> <p>components/RequireAuth.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">RequireAuth</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Si no existe el usuario</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Redirrecionamos  al login</span>
      <span class="token keyword">return</span>  <span class="token operator">&lt;</span>Navigate to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
 <span class="token comment">// Entramos a la ruta protegida</span>
  <span class="token keyword">return</span> children
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RequireAuth

</code></pre></div><p>Ahora envolvemos la ruta protegida con el componente RequireAuth
App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> Navbar <span class="token keyword">from</span> <span class="token string">&quot;./components/Navbar&quot;</span>
<span class="token keyword">import</span> RequireAuth <span class="token keyword">from</span> <span class="token string">&quot;./components/RequireAuth&quot;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./routes/Home&quot;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&quot;./routes/Login&quot;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> element<span class="token operator">=</span><span class="token punctuation">{</span>
          <span class="token comment">/* Ruta protegida (Home) */</span> 
          <span class="token operator">&lt;</span>RequireAuth <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>RequireAuth<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>


      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Explicacion</p> <p>A la ruta home solo se puede acceder si user es true (o existe)</p></div> <h2 id="hook-usenavigate"><a href="#hook-usenavigate" class="header-anchor">#</a> hook useNavigate</h2> <ul><li>Con el hook useNavigate podemos realizar redirecciones.</li></ul> <p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

 <span class="token keyword">const</span> <span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">}</span> <span class="token operator">=</span>  <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>
 <span class="token comment">// Creamos el navigate</span>
 <span class="token keyword">const</span> navegate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">const</span> <span class="token function-variable function">handleClickLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Redireccionamos a la ruta &quot;/&quot;(raiz)</span>
     <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      user<span class="token operator">?</span> <span class="token string">&quot;En linea&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Offline&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClickLogin <span class="token punctuation">}</span><span class="token operator">&gt;</span>Acceder<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login

</code></pre></div><h2 id="firebase-9"><a href="#firebase-9" class="header-anchor">#</a> FireBase 9</h2> <ul><li>Es un backend que ofrece muchos servicios: Autenticacion ,   dos tipos de BD ,  hosting , te permite trabajar con archivos , te brinda  funciones para manipular el backend , etc.</li> <li>Es gratis, pero tiene un limite de recursos a utilizar.</li> <li>Mientras mas recursos/servicios uses, más te van a cobrar.</li> <li><a href="https://firebase.google.com/" target="_blank" rel="noopener noreferrer">Link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="en-firebase"><a href="#en-firebase" class="header-anchor">#</a> En Firebase</h3> <ol><li>Creamos una cuenta</li> <li>Entramos a la consola</li> <li>Creamos un proyecto sin habilitar Google analytics</li> <li>En  Autenticacion -- Get Started (comenzar) habilitamos Email/Password y guardamos</li></ol> <ul><li>Lo mas simple es la cuenta de Google y Email/Password</li></ul> <ol start="5"><li>En la pagina de inicio (Descripcion(Overview) del proyecto) , accedemos a app web y registramos una aplicacion</li></ol> <p>Si hiciste todos los pasos correctos , te aparecera la instalacion de firebase con npm y un trozo de codigo</p> <h3 id="en-el-proyecto"><a href="#en-el-proyecto" class="header-anchor">#</a> En el proyecto</h3> <ol><li>Instalamos todos los modulos necesario para trabajar con firebase.</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install firebase
</code></pre></div><ol start="2"><li>Copiamos el código  que nos da firebase al registrar la app</li></ol> <ul><li>El código es publico.</li></ul> <ol start="3"><li>En src creamos un archivo llamado firebase.js y pegamos el codigo</li></ol> <p>Quedaria asi(Varia entre proyectos)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Import the functions you need from the SDKs you need</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// TODO: Add SDKs for Firebase products that you want to use</span>
<span class="token comment">// https://firebase.google.com/docs/web/setup#available-libraries</span>

<span class="token comment">// Your web app's Firebase configuration</span>
<span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  apiKey<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  authDomain<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  projectId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  storageBucket<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize Firebase</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="en-firebase-2"><a href="#en-firebase-2" class="header-anchor">#</a> En Firebase</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>En el apartado de  configuración del Proyecto esta toda la guia de lo que hicimos en el proyecto</p></div> <ol><li>En Autenticacion - Users creamos un usuario</li></ol> <p>Email: usuario@tes.com contraseña: 123123</p> <h3 id="en-el-proyecto-2"><a href="#en-el-proyecto-2" class="header-anchor">#</a> En el proyecto</h3> <p>src/index.css</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span>80%<span class="token punctuation">;</span>
  
<span class="token punctuation">}</span>

<span class="token selector">code</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> source-code-pro<span class="token punctuation">,</span> Menlo<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">'Courier New'</span><span class="token punctuation">,</span>
    monospace<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="auth"><a href="#auth" class="header-anchor">#</a> Auth</h2> <ul><li><a href="https://firebase.google.com/docs/auth/web/start?hl=es-419" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>De auth vienen todas las autenticaciones</li> <li>Tiene toda la configuración de firebase(app) para manipular la autenticación en la aplicación</li> <li>Gracias a auth, firebase sabe en que parte debe crear los usuarios.
FireBase sabe en que proyecto/aplicación debe crear el usuario</li> <li>Se crea con el metodo getAuth que recibe la app de FireBase</li></ul> <p>firebase.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// Your web app's Firebase configuration</span>
<span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  apiKey<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  authDomain<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  projectId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  storageBucket<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize Firebase</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>auth<span class="token punctuation">}</span>

</code></pre></div><h2 id="createuserwithemailandpassword"><a href="#createuserwithemailandpassword" class="header-anchor">#</a> createUserWithEmailAndPassword</h2> <ul><li>El método createUserWithEmailAndPassword de firebase sirve para  crear un usuario</li> <li>Recibe el auth para saber en que aplicación/proyecto debe crear el usuario.</li> <li>Devuelve una promesa</li> <li><a href="https://firebase.google.com/docs/auth/web/start?hl=es-419" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>context/UserProvider</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span>  <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebase'</span><span class="token punctuation">;</span>

 <span class="token comment">// Creamos el contexto</span>
 <span class="token keyword">export</span> <span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token keyword">const</span> <span class="token function-variable function">registerUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
 <span class="token comment">// Creamos un usuario  con el email y el password pasado por parametro</span>
 <span class="token comment">// Devuelve al usuario creado</span>
 <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">UserProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>UserContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser <span class="token punctuation">,</span> registerUser<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* children =    Todos los componentes hijos */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UserProvider<span class="token punctuation">;</span>

</code></pre></div><p>routes/Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">[</span>email <span class="token punctuation">,</span> setEmail<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>password <span class="token punctuation">,</span> setPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>registerUser<span class="token punctuation">}</span> <span class="token operator">=</span>  <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>
  
    useContext
    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//Creamos un usuario</span>
           <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form  onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>  placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>email<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setEmail</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>  placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>password<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setPassword</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Los mensajes de errores están en la propiedad code de error(e).  Son códigos de respuesta.</li> <li>Si no se puede crear el usuario  ya sea porque ya existe o no pasa alguna validación de firebase , pasa al catch.</li> <li>En el catch , el error tiene la propiedad code , la cual devuelve el código de respuesta(el mensaje del error)</li></ul></div> <p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/register'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Register <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>

</code></pre></div><h2 id="signinwithemailandpassword"><a href="#signinwithemailandpassword" class="header-anchor">#</a> signInWithEmailAndPassword</h2> <ul><li><a href="https://firebase.google.com/docs/auth/web/start?hl=es-419#sign_in_existing_users" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>El método signInWithEmailAndPassword de firebase sirve para iniciar sesion con un usuario existente</li> <li>Recibe el auth para especificar en que aplicación se esta por autenticar el usuario.</li> <li>Devuelve una promesa</li></ul> <p>context/UserProvider.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> signInWithEmailAndPassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span>  <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebase'</span><span class="token punctuation">;</span>

 <span class="token comment">// Creamos el contexto</span>
 <span class="token keyword">export</span> <span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 
<span class="token keyword">const</span> <span class="token function-variable function">UserProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">registerUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// Creamos un usuario  con el email y el password pasado por parametro</span>
      <span class="token comment">// Devuelve al usuario creado</span>
      <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      

      <span class="token keyword">const</span> <span class="token function-variable function">loginUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  
        <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span>email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      

      
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>UserContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser <span class="token punctuation">,</span> registerUser <span class="token punctuation">,</span> loginUser<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* children =    Todos los componentes hijos */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UserProvider<span class="token punctuation">;</span>

</code></pre></div><p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>email <span class="token punctuation">,</span> setEmail<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>password <span class="token punctuation">,</span> setPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> <span class="token punctuation">{</span>loginUser<span class="token punctuation">}</span> <span class="token operator">=</span>  <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>
 <span class="token comment">// Creamos el navigate</span>
 <span class="token keyword">const</span> navegate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Accedemos a un usuario</span>
     <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form  onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>  placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>email<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setEmail</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>  placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>password<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setPassword</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Si el usuario existe y la contraseña coincide , inicia sesion.
En caso contrario , pasa al catch.</li> <li>En el catch, el error tiene la propiedad code que devuelve el código de respuesta (contiene el mensaje de error).</li></ul></div> <h2 id="signout"><a href="#signout" class="header-anchor">#</a> signOut</h2> <ul><li><a href="https://firebase.google.com/docs/auth/web/password-auth?hl=es-419#sign_in_a_user_with_an_email_address_and_password" target="_blank" rel="noopener noreferrer">link (debajo de todo)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>El método signOut de firebase sirve para cerrar la sesion</li> <li>El método signOut recibe el auth</li> <li>Devuelve una promesa</li></ul> <p>UserProvider.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> signOut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span>  <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebase'</span><span class="token punctuation">;</span>

 <span class="token comment">// Creamos el contexto</span>
 <span class="token keyword">export</span> <span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 
<span class="token keyword">const</span> <span class="token function-variable function">UserProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">registerUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// Creamos un usuario  con el email y el password pasado por parametro</span>
      <span class="token comment">// Devuelve al usuario creado</span>
      <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      

      <span class="token keyword">const</span> <span class="token function-variable function">loginUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  
        <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span>email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      
        <span class="token keyword">const</span> <span class="token function-variable function">signOutUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span>
    

      
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>UserContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser <span class="token punctuation">,</span> registerUser <span class="token punctuation">,</span> loginUser <span class="token punctuation">,</span> signOutUser<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* children =    Todos los componentes hijos */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UserProvider<span class="token punctuation">;</span>

</code></pre></div><p>Navbar.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../context/userProvider&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Navbar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// Obtenemos el valor de la props value del Provider del context</span>
  <span class="token comment">// useContext(context)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>user <span class="token punctuation">,</span> signOutUser<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickLogOut</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">await</span> <span class="token function">signOutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token comment">/* NavLink es como la etiqueta &lt;a&gt;&lt;/a&gt;
                el props &quot;to&quot; es como el atributo &quot;href&quot; */</span><span class="token punctuation">}</span>
                <span class="token punctuation">{</span>
                     user <span class="token operator">?</span>     <span class="token punctuation">(</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Inicio <span class="token operator">|</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                     <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClickLogOut<span class="token punctuation">}</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                     <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span>Login <span class="token operator">|</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">|</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                     <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> 
                <span class="token punctuation">}</span>
            
           
               
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Navbar

</code></pre></div><h2 id="onauthstatechanged"><a href="#onauthstatechanged" class="header-anchor">#</a> onAuthStateChanged</h2> <ul><li>Nos brinda datos del usuario</li> <li><a href="https://firebase.google.com/docs/auth/web/start?hl=es-419#set_an_authentication_state_observer_and_get_user_data" target="_blank" rel="noopener noreferrer">Link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>El método onAuthStateChanged de firebase sirve para obtener datos del usuario que inicio sesion en la aplicación.</li> <li>Nos devuelve el usuario activo , el que ya hizo el login.</li> <li>Recibe el auth y un callback que contiene/recibe al usuario activo como parámetro.</li></ul> <p>UserProvider.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> onAuthStateChanged<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> signOut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span>  <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebase'</span><span class="token punctuation">;</span>

 <span class="token comment">// Creamos el contexto</span>
 <span class="token keyword">export</span> <span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 
<span class="token keyword">const</span> <span class="token function-variable function">UserProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> unsuscribe <span class="token operator">=</span> <span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> <span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span> 
          <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">unsuscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">[</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">registerUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// Creamos un usuario  con el email y el password pasado por parametro</span>
      <span class="token comment">// Devuelve al usuario creado</span>
      <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      

      <span class="token keyword">const</span> <span class="token function-variable function">loginUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  
        <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span>email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      
        <span class="token keyword">const</span> <span class="token function-variable function">signOutUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span>
    

      
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>UserContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser <span class="token punctuation">,</span> registerUser <span class="token punctuation">,</span> loginUser <span class="token punctuation">,</span> signOutUser<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* children =    Todos los componentes hijos */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UserProvider<span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Te devuelve la información del usuario desde la API de firebase.</p></div> <h3 id="cambio"><a href="#cambio" class="header-anchor">#</a> Cambio</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> onAuthStateChanged<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> signOut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span>  <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebase'</span><span class="token punctuation">;</span>

 <span class="token comment">// Creamos el contexto</span>
 <span class="token keyword">export</span> <span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 
<span class="token keyword">const</span> <span class="token function-variable function">UserProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>user <span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> unsuscribe <span class="token operator">=</span> <span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             
             <span class="token keyword">const</span>  <span class="token punctuation">{</span>email <span class="token punctuation">,</span> photoURL <span class="token punctuation">,</span> displayName <span class="token punctuation">,</span> uid<span class="token punctuation">}</span> <span class="token operator">=</span> user<span class="token punctuation">;</span>
             <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>email <span class="token punctuation">,</span> photoURL <span class="token punctuation">,</span> displayName <span class="token punctuation">,</span> uid<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
           
          <span class="token punctuation">}</span><span class="token punctuation">)</span> 
     
          <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">unsuscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">registerUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// Creamos un usuario  con el email y el password pasado por parametro</span>
      <span class="token comment">// Devuelve al usuario creado</span>
      <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth <span class="token punctuation">,</span> email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      

      <span class="token keyword">const</span> <span class="token function-variable function">loginUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email <span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  
        <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span>email <span class="token punctuation">,</span> password<span class="token punctuation">)</span>
      
        <span class="token keyword">const</span> <span class="token function-variable function">signOutUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span>
    

      
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>UserContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>user <span class="token punctuation">,</span> setUser <span class="token punctuation">,</span> registerUser <span class="token punctuation">,</span> loginUser <span class="token punctuation">,</span> signOutUser<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* children =    Todos los componentes hijos */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UserProvider<span class="token punctuation">;</span>

</code></pre></div><p>Navbar.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token comment">/* NavLink es como la etiqueta &lt;a&gt;&lt;/a&gt;
                el props &quot;to&quot; es como el atributo &quot;href&quot; */</span><span class="token punctuation">}</span>
             
                <span class="token punctuation">{</span>
                     user <span class="token operator">?</span>     <span class="token punctuation">(</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span><span class="token operator">&gt;</span>Inicio <span class="token operator">|</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                         <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClickLogOut<span class="token punctuation">}</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                     <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                     <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span>Login <span class="token operator">|</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">|</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                     <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> 
                <span class="token punctuation">}</span>
            
           
               
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>

</code></pre></div><h2 id="loading-y-redirrecion"><a href="#loading-y-redirrecion" class="header-anchor">#</a> Loading y Redirrecion</h2> <ul><li>Como el proceso de consultar información del usuario activo demora, implementamos un loading.</li></ul> <p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> Navbar <span class="token keyword">from</span> <span class="token string">&quot;./components/Navbar&quot;</span>
<span class="token keyword">import</span> RequireAuth <span class="token keyword">from</span> <span class="token string">&quot;./components/RequireAuth&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./context/userProvider&quot;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./routes/Home&quot;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&quot;./routes/Login&quot;</span>
<span class="token keyword">import</span> Register <span class="token keyword">from</span> <span class="token string">&quot;./routes/Register&quot;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
   
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/register'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Register <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> element<span class="token operator">=</span><span class="token punctuation">{</span>
          <span class="token comment">/* Ruta protegida (Home) */</span>
          <span class="token operator">&lt;</span>RequireAuth <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>RequireAuth<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes <span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><ul><li>Redireccion en el login</li></ul> <p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Creamos el navigate</span>
  <span class="token keyword">const</span> navegate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Accedemos a un usuario</span>
      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><h2 id="react-hook-form"><a href="#react-hook-form" class="header-anchor">#</a> React hook form</h2> <ul><li><a href="https://react-hook-form.com/get-started/" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Es un hook</li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install react<span class="token operator">-</span>hook<span class="token operator">-</span>form
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Register : Para registrar un input</li> <li>handleSubmit  : Maneja el evento submit</li> <li>formState : Nos trae los errores</li> <li>watch : Averiguar</li></ul> <p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook form hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot;)} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><h3 id="validaciones"><a href="#validaciones" class="header-anchor">#</a> Validaciones</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot; , {validaciones})} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

       <span class="token punctuation">{</span>
        <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo email.</span>
         errors<span class="token punctuation">.</span>email <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Campo obligatorio<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
       <span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Explicacion</p> <ul><li>Si no se cumple la validación, se genera un error.</li> <li>Para acceder al error de un input es con  errors.nombreinput</li> <li>El nombreinput es el nombre que le asignaron al registrarlo con el register</li></ul></div> <ul><li><a href="https://react-hook-form.com/api/useform" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="validaciones-con-mensajes-personalizados"><a href="#validaciones-con-mensajes-personalizados" class="header-anchor">#</a> Validaciones con mensajes personalizados:</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot; , {validaciones})} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> required<span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">,</span> message<span class="token operator">:</span><span class="token string">'Campo obligatorio'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

       <span class="token punctuation">{</span>
        <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo email.</span>
         <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
         errors<span class="token punctuation">.</span>email <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
       <span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* Validacion de minimo 6 caracteres */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span>minLength<span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span><span class="token number">6</span> <span class="token punctuation">,</span> message<span class="token operator">:</span><span class="token string">&quot;Minimo 6 caracteres&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo password.</span>
            <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
            errors<span class="token punctuation">.</span>password <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><h3 id="expresiones-regulares"><a href="#expresiones-regulares" class="header-anchor">#</a> Expresiones regulares</h3> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token operator">:</span>
              <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Campo obligatorio'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token punctuation">{</span>
               value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
               message<span class="token operator">:</span><span class="token string">&quot;Formato de email incorrecto&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre></div><h3 id="validacion-personalizada"><a href="#validacion-personalizada" class="header-anchor">#</a> Validacion personalizada</h3> <ul><li>Usaremos <a href="https://react-hook-form.com/api/useform/getvalues" target="_blank" rel="noopener noreferrer">getValues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> para obtener los valores del input registrado en tiempo real.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>condición &amp;&amp; = Verifica que sea true</li> <li>condición || = Verifica que sea false</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> getValues <span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot; , {validaciones})} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token operator">:</span>
              <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Campo obligatorio'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token punctuation">{</span>
               value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
               message<span class="token operator">:</span><span class="token string">&quot;Formato de email incorrecto&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>
          <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo email.</span>
          <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
          errors<span class="token punctuation">.</span>email <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* Validacion de minimo 6 caracteres */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
          minLength<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;Minimo 6 caracteres&quot;</span> <span class="token punctuation">}</span>
          
          
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
          <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo password.</span>
          <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
          errors<span class="token punctuation">.</span>password <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span>validate<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// equals puede llamarse como quiera , seria el nombre de la funcion que se ejecutaria para validar</span>

          <span class="token comment">// value es igual al valor del campo</span>

          <span class="token comment">// Para acceder al valor de un input  </span>
          <span class="token comment">//getValue(&quot;nombrecampo&quot;) </span>
          <span class="token comment">//nombrecampo = el nombre con el cual se registro </span>
          
          <span class="token function-variable function">equals</span><span class="token operator">:</span>  <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">===</span> <span class="token function">getValues</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;No coincide la contraseña&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
         <span class="token punctuation">{</span>
          <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo password.</span>
          <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
          errors<span class="token punctuation">.</span>repassword <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><h3 id="validacion-espacio-en-blanco"><a href="#validacion-espacio-en-blanco" class="header-anchor">#</a> Validacion espacio en blanco</h3> <ul><li>Es con trim</li> <li>La negación de String.trim() devuelve true si contiene espacio en blancos.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">'        '</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;contiene espacio en blanco&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
          minLength<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;Minimo 6 caracteres&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">,</span>
          validate<span class="token operator">:</span> <span class="token punctuation">{</span>
                 <span class="token comment">// v es igual al valor del campo</span>
                 <span class="token function-variable function">trim</span> <span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Escribe algo&quot;</span><span class="token punctuation">;</span>
                   <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          
          
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Si Devuelve true, significa que la validacion paso.</p></div> <h3 id="validaciones-firebase"><a href="#validaciones-firebase" class="header-anchor">#</a> Validaciones firebase</h3> <ul><li><a href="https://firebase.google.com/docs/auth/admin/errors" target="_blank" rel="noopener noreferrer">Codigo de errores<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Usamos <a href="https://react-hook-form.com/api/useform/seterror" target="_blank" rel="noopener noreferrer">setError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> para crear errores manualmente.</li> <li>setError(input_registrado ,objeto con el error)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> getValues<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token string">'123123'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/email-already-in-use'</span><span class="token operator">:</span>
          <span class="token comment">// setError(nombre_input_registrado , {error})</span>
          <span class="token comment">// Podes ignorar la propiedad type del error para que aparezca directamente en el errors.nombre_input_registrado</span>
          <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&quot;Usuario ya registrado&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/invalid-email&quot;</span><span class="token operator">:</span>
          <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            message<span class="token operator">:</span> <span class="token string">&quot;Formato email no válido&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Intentelo mas tarde'</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot; , {validaciones})} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token operator">:</span>
              <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Campo obligatorio'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token punctuation">{</span>
              value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
              message<span class="token operator">:</span> <span class="token string">&quot;Formato de email incorrecto&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>
          <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo email.</span>
          <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
          errors<span class="token punctuation">.</span>email <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* Validacion de minimo 6 caracteres */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          minLength<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;Minimo 6 caracteres&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          validate<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// v es igual al valor del campo</span>
            <span class="token function-variable function">trim</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Escribe algo&quot;</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
          <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo password.</span>
          <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
          errors<span class="token punctuation">.</span>password <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          validate<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// equals puede llamarse como quiera , seria el nombre de la funcion que se ejecutaria para validar</span>

            <span class="token comment">// value es igual al valor del campo</span>

            <span class="token comment">// Para acceder al valor de un input  </span>
            <span class="token comment">//getValue(&quot;nombrecampo&quot;) </span>
            <span class="token comment">//nombrecampo = el nombre con el cual se registro </span>

            <span class="token function-variable function">equals</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">===</span> <span class="token function">getValues</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;No coincide la contraseña&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
          <span class="token comment">//  Si existe un error(si no cumple las validaciones) en el campo password.</span>
          <span class="token comment">// message corresponde con la propiedad message de la validacion</span>
          errors<span class="token punctuation">.</span>repassword <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><h2 id="refactorizar"><a href="#refactorizar" class="header-anchor">#</a> Refactorizar</h2> <h3 id="anadimos-errores-de-firebase"><a href="#anadimos-errores-de-firebase" class="header-anchor">#</a> Añadimos errores de firebase.</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> getValues<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token string">'123123'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/email-already-in-use'</span><span class="token operator">:</span>
          <span class="token comment">// setError(nombre_input_registrado , {error})</span>
          <span class="token comment">// Podes ignorar la propiedad type del error para que aparezca directamente en el errors.nombre_input_registrado</span>
          <span class="token comment">// Estamos creando &quot;firebase&quot; (errors.firebase)</span>
          <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&quot;Usuario ya registrado&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/invalid-email&quot;</span><span class="token operator">:</span>
          <span class="token comment">// Estamos creando &quot;firebase&quot; (errors.firebase)</span>
          <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            message<span class="token operator">:</span> <span class="token string">&quot;Formato email no válido&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Intentelo mas tarde'</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
     <span class="token punctuation">{</span> errors<span class="token punctuation">.</span>firebase <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> 
<span class="token punctuation">}</span>

</code></pre></div><h3 id="switch"><a href="#switch" class="header-anchor">#</a> Switch</h3> <ul><li>Creamos la Carpeta utils o lib/api</li> <li>En esta carpeta van las utilidades.</li></ul> <p>utils/erroresFirebase.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Almacenamos todos los errores (codigo) de firebase</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">erroresFirebase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/email-already-in-use'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Usuario ya registrado&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/invalid-email&quot;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Formato email no válido&quot;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">'Intentelo mas tarde'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> erroresFirebase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/erroresFirebase&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><h3 id="componente-error"><a href="#componente-error" class="header-anchor">#</a> Componente error</h3> <p>components/FormError.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">FormError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* Si existe un error(si no cumple las validaciones) 
    message corresponde con la propiedad message de la validacion   
          */</span><span class="token punctuation">}</span>
            <span class="token punctuation">{</span>error <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FormError

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">&quot;../components/FormError&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot; , {validaciones})} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token operator">:</span>
              <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Campo obligatorio'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token punctuation">{</span>
              value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
              message<span class="token operator">:</span> <span class="token string">&quot;Formato de email incorrecto&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

         <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* Validacion de minimo 6 caracteres */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          minLength<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;Minimo 6 caracteres&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          validate<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// v es igual al valor del campo</span>
            <span class="token function-variable function">trim</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Escribe algo&quot;</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          validate<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// equals puede llamarse como quiera , seria el nombre de la funcion que se ejecutaria para validar</span>

            <span class="token comment">// value es igual al valor del campo</span>

            <span class="token comment">// Para acceder al valor de un input  </span>
            <span class="token comment">//getValue(&quot;nombrecampo&quot;) </span>
            <span class="token comment">//nombrecampo = el nombre con el cual se registro </span>

            <span class="token function-variable function">equals</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">===</span> <span class="token function">getValues</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;No coincide la contraseña&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

</code></pre></div><h3 id="validaciones-2"><a href="#validaciones-2" class="header-anchor">#</a> Validaciones</h3> <p>utils/formValidate.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">formValidate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        required<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Campo obligatorio'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        patternEmail<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&quot;Formato de email incorrecto&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        minLength6<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;Minimo 6 caracteres&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// v es igual al valor del campo</span>
        validateTrim<span class="token operator">:</span> <span class="token punctuation">{</span>

            <span class="token function-variable function">trim</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Escribe algo&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function">validateEquals</span><span class="token punctuation">(</span><span class="token parameter">getValues</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">equals</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">===</span> <span class="token function">getValues</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;No coincide la contraseña&quot;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/formValidate&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternEmail <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">&quot;../components/FormError&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> erroresFirebase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/erroresFirebase&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/formValidate&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternEmail <span class="token punctuation">,</span> minLength6 <span class="token punctuation">,</span> validateTrim <span class="token punctuation">,</span> validateEquals <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> getValues<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token string">'123123'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Registramos los inputs */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* {...register(&quot;nombredelcampo&quot; , {validaciones})} */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

         <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          minLength<span class="token operator">:</span> minLength6<span class="token punctuation">,</span>
          validate<span class="token operator">:</span> validateTrim

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          validate<span class="token operator">:</span> <span class="token function">validateEquals</span><span class="token punctuation">(</span>getValues<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><h2 id="useref"><a href="#useref" class="header-anchor">#</a> useRef</h2> <ul><li><a href="https://es.reactjs.org/docs/hooks-reference.html#useref" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Es un hook de React</li> <li>Nos permite acceder a todas las propiedades de un elemento(input , etc)</li> <li>Sería como el document.getElementById , ósea es la forma de seleccionar un elemento en React</li> <li>React creo el ref para optimizar lo que hace  document.getElementById</li></ul> <p>Ejemplo:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ExampleRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> inputEl <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">onButtonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// `current` = input</span>
        inputEl<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>inputEl<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onButtonClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Focus the<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ExampleRef<span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Al comienzo, ref es null  ya que cuando se inicializa todavia no existe ningún elemento.</li> <li>Al renderizarse el componente, el valor de ref es una referencia al input.</li> <li>Con el atributo(props) ref asignamos el valor de ref.</li> <li>Con la referencia al input, podemos manipularla (como el focus del ejemplo).</li> <li>El valor lo contiene la propiedad current del ref.</li></ul></div> <h2 id="forwardref"><a href="#forwardref" class="header-anchor">#</a> forwardRef</h2> <ul><li><a href="https://es.reactjs.org/docs/forwarding-refs.html" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>El Reenvío de refs es una característica opcional que permite a algunos componentes tomar una ref que reciben, y pasarla (en otras palabras, “reenviarla”) a un hijo.</li> <li>Como react no te permite mandar ref a través de props , se utiliza forwardRef  para enviar un ref  a un hijo</li> <li>Se suele utilizar cuando el componente implementa bibliotecas (como el useForm)</li> <li>forwardRef es un método que recibe como parámetro TODO EL COMPONENTE (todo el componente se encierra entre paréntesis)</li> <li>El componente que tiene como parámetro tiene acceso a los props y a la referencia (ref).</li></ul> <p>Ejemplo:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Es un componente</span>
<span class="token keyword">const</span> InputText <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ExampleRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> inputEl <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">onButtonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// `current` apunta al elemento de entrada de texto montado</span>
        inputEl<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>InputText ref<span class="token operator">=</span><span class="token punctuation">{</span>inputEl<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onButtonClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Focus the<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ExampleRef<span class="token punctuation">;</span>

</code></pre></div><h2 id="forwardref-proyecto"><a href="#forwardref-proyecto" class="header-anchor">#</a> forwardRef Proyecto</h2> <div class="custom-block tip"><p class="custom-block-title">Explicacion</p> <p>Explicacion de lo que pasa en useForm en la linea:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>Esta creando las props onChange , onBlur , ref y name (este ultimo lo hace con el valor que le pasamos entre los paréntesis).</li></ul></div> <p>components/FormInput.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> FormInput <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>type <span class="token punctuation">,</span> placeholder <span class="token punctuation">,</span> onChange <span class="token punctuation">,</span> onBlur <span class="token punctuation">,</span> name<span class="token punctuation">}</span> <span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span>  placeholder<span class="token operator">=</span><span class="token punctuation">{</span>placeholder<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> onBlur<span class="token operator">=</span><span class="token punctuation">{</span>onBlur<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FormInput

</code></pre></div><p>Register.jsx</p> <div class="custom-block tip"><p class="custom-block-title">Recordatorio</p> <p>Los props lo pasa el …register (incluyendo el ref)</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">&quot;../components/FormError&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormInput <span class="token keyword">from</span> <span class="token string">&quot;../components/FormInput&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> erroresFirebase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/erroresFirebase&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/formValidate&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternEmail<span class="token punctuation">,</span> minLength6<span class="token punctuation">,</span> validateTrim<span class="token punctuation">,</span> validateEquals <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> getValues<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token string">'123123'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            minLength<span class="token operator">:</span> minLength6<span class="token punctuation">,</span>
            validate<span class="token operator">:</span> validateTrim
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            validate<span class="token operator">:</span> <span class="token function">validateEquals</span><span class="token punctuation">(</span>getValues<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><h2 id="children"><a href="#children" class="header-anchor">#</a> Children</h2> <ul><li>Es una props , que representa los componentes hijos.</li></ul> <p>FormInput.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> FormInput <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>type <span class="token punctuation">,</span> placeholder <span class="token punctuation">,</span> onChange <span class="token punctuation">,</span> onBlur <span class="token punctuation">,</span> name <span class="token punctuation">,</span> children<span class="token punctuation">}</span> <span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span>  placeholder<span class="token operator">=</span><span class="token punctuation">{</span>placeholder<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> onBlur<span class="token operator">=</span><span class="token punctuation">{</span>onBlur<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>children<span class="token punctuation">}</span>

     <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FormInput

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            minLength<span class="token operator">:</span> minLength6<span class="token punctuation">,</span>
            validate<span class="token operator">:</span> validateTrim
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            validate<span class="token operator">:</span> <span class="token function">validateEquals</span><span class="token punctuation">(</span>getValues<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

</code></pre></div><h2 id="login"><a href="#login" class="header-anchor">#</a> Login</h2> <p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hook-form'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">'../components/FormError'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormInput <span class="token keyword">from</span> <span class="token string">'../components/FormInput'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> erroresFirebase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/erroresFirebase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/formValidate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> loginUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternEmail<span class="token punctuation">,</span> minLength6<span class="token punctuation">,</span> validateTrim <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Creamos el navigate</span>
  <span class="token keyword">const</span> navegate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span>  formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Iniciamos sesion</span>
      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            minLength<span class="token operator">:</span> minLength6<span class="token punctuation">,</span>
            validate<span class="token operator">:</span> validateTrim
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login

</code></pre></div><p>utils/erroresFirebase.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Almacenamos todos los errores (codigo) de firebase</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">erroresFirebase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/email-already-in-use'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Usuario ya registrado&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/invalid-email&quot;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Formato email no válido&quot;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/user-not-found&quot;</span><span class="token operator">:</span>
              <span class="token keyword">return</span> <span class="token string">&quot;Usuario no registrado&quot;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/wrong-password&quot;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Contraseña incorrecta&quot;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token string">'Intentelo mas tarde'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="problemas"><a href="#problemas" class="header-anchor">#</a> Problemas</h2> <h3 id="problema-usuario-ya-registrado"><a href="#problema-usuario-ya-registrado" class="header-anchor">#</a> Problema &quot;usuario ya registrado&quot;</h3> <ul><li>Una vez que aparece el error “usuario ya registrado” , no te permite crear un usuario en el register</li> <li>Eso pasa porque “No se limpia” los errores (setError) de firebase.</li> <li>Linea que genera el error:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setError</span><span class="token punctuation">(</span><span class="token string">&quot;firebase&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="solucion"><a href="#solucion" class="header-anchor">#</a> Solucion</h4> <ul><li>Que los errores pertenezcan a un input registrado, para que se vayan limpiando a medida que se modifica los inputs.</li></ul> <p>utils/erroresFirebase.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Almacenamos todos los errores (codigo) de firebase</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">erroresFirebase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/email-already-in-use'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span><span class="token string">&quot;email&quot;</span> <span class="token punctuation">,</span> message <span class="token operator">:</span> <span class="token string">&quot;Usuario ya registrado&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/invalid-email&quot;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span><span class="token string">&quot;email&quot;</span> <span class="token punctuation">,</span> message <span class="token operator">:</span> <span class="token string">&quot;Formato email no válido&quot;</span> <span class="token punctuation">}</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/user-not-found&quot;</span><span class="token operator">:</span>
              <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span><span class="token string">&quot;email&quot;</span> <span class="token punctuation">,</span> message <span class="token operator">:</span><span class="token string">&quot;Usuario no registrado&quot;</span><span class="token punctuation">}</span>
        <span class="token keyword">case</span> <span class="token string">&quot;auth/wrong-password&quot;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span><span class="token string">&quot;password&quot;</span> <span class="token punctuation">,</span> message <span class="token operator">:</span><span class="token string">&quot;Contraseña incorrecta&quot;</span>
    <span class="token punctuation">}</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span><span class="token string">&quot;email&quot;</span> <span class="token punctuation">,</span> message <span class="token operator">:</span><span class="token string">'Intentelo mas tarde'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>code <span class="token punctuation">,</span> message<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>code <span class="token punctuation">,</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Iniciamos sesion</span>
      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>code <span class="token punctuation">,</span> message<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>code <span class="token punctuation">,</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><h3 id="optimizar-register"><a href="#optimizar-register" class="header-anchor">#</a> Optimizar register:</h3> <p>Register.jsx</p> <ul><li>Para que pueda comparar dos valores que no sean password.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            validate<span class="token operator">:</span> <span class="token function">validateEquals</span><span class="token punctuation">(</span><span class="token function">getValues</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

</code></pre></div><p>utils/formValidate.js</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">validateEquals</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">equals</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> value <span class="token operator">||</span> <span class="token string">&quot;No coincide la contraseña&quot;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>

</code></pre></div><h2 id="tailwindcss-flowbite"><a href="#tailwindcss-flowbite" class="header-anchor">#</a> TailwindCSS &amp; flowbite</h2> <ul><li><a href="https://tailwindcss.com/" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Es un framework de css</li> <li>Tiene clases dinámica</li> <li>Es como Bootstrap, pero más avanzado.</li></ul> <h3 id="tailwind-vs-bootstrap"><a href="#tailwind-vs-bootstrap" class="header-anchor">#</a> Tailwind vs Bootstrap</h3> <ul><li>Bootstrap tiene componentes predefinidos. Dentro de una clase hay miles de propiedades css.</li> <li>Tailwind  es mucho más personalizado , cada clase tiene una propiedad</li> <li>Velocidad == Bootstrap || Personalización == Tailwind</li></ul> <h3 id="tailwind"><a href="#tailwind" class="header-anchor">#</a> Tailwind</h3> <ul><li>Un componente es un conjunto de clases</li> <li><a href="https://flowbite.com/" target="_blank" rel="noopener noreferrer">Modulo que ofrece un conjunto de componentes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://tailwindcomponents.com/cheatsheet/" target="_blank" rel="noopener noreferrer">Lista de clases y las propiedades que contienen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://flowbite.com/docs/getting-started/react/" target="_blank" rel="noopener noreferrer">Como comenzar con react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block tip"><p class="custom-block-title">vite</p> <p>Vite limpia las clases de Tailwind/flowbite y solo compilara las que use el proyecto.</p></div> <h3 id="instalacion-de-tailwind-y-flowbite"><a href="#instalacion-de-tailwind-y-flowbite" class="header-anchor">#</a> Instalacion de tailwind y flowbite</h3> <ol><li>Instalamos tailwind</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install <span class="token operator">-</span>D tailwindcss postcss autoprefixer
npx tailwindcss init <span class="token operator">-</span>p

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>La última línea creara dos archivos: postcss.config.js y Tailwind.config.js</p></div> <ol start="2"><li>Configuracion de tailwind</li></ol> <p>tailwind.config.js:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token punctuation">[</span> 
    <span class="token string">&quot;./src/**/*.{js,jsx,ts,tsx}&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  theme<span class="token operator">:</span> <span class="token punctuation">{</span>
    extend<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Se esta haciendo un seguimiento a js , jsx , ts , tsx</p></div> <ol start="3"><li>Importar tailwind en el index.css</li></ol> <p>src/index.css</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@tailwind</span> base<span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@tailwind</span> components<span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@tailwind</span> utilities<span class="token punctuation">;</span></span>

</code></pre></div><ol start="4"><li>Instalamos flowbite</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install flowbite
</code></pre></div><ol start="5"><li>Configuramos tailwind para trabajar con flowbite</li></ol> <p>tailwind.config.js:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token punctuation">[</span> 
    <span class="token string">&quot;./src/**/*.{js,jsx,ts,tsx}&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;./node_modules/flowbite/**/*.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  theme<span class="token operator">:</span> <span class="token punctuation">{</span>
    extend<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'flowbite/plugin'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><ol start="6"><li>Importamos el javascript de flowbite en el proyecto</li></ol> <p>main.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> UserProvider <span class="token keyword">from</span> <span class="token string">'./context/userProvider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'flowbite'</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="empezamos-con-el-diseno-del-proyecto"><a href="#empezamos-con-el-diseno-del-proyecto" class="header-anchor">#</a> Empezamos con el diseño del proyecto</h3> <ul><li><a href="https://transform.tools/html-to-jsx" target="_blank" rel="noopener noreferrer">Transformar html en jsx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="titulo"><a href="#titulo" class="header-anchor">#</a> titulo</h3> <p>components/Title.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">Title</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>text<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">&quot;text-center my-5 text-4xl&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Title

</code></pre></div><h3 id="input"><a href="#input" class="header-anchor">#</a> input</h3> <p>components/FormInput.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> FormInput <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>type <span class="token punctuation">,</span> placeholder <span class="token punctuation">,</span> onChange <span class="token punctuation">,</span> onBlur <span class="token punctuation">,</span> name <span class="token punctuation">,</span> label <span class="token punctuation">,</span> children <span class="token punctuation">,</span> error<span class="token punctuation">}</span> <span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

   <span class="token keyword">const</span> errorClassLabel <span class="token operator">=</span> error<span class="token operator">?</span> <span class="token string">&quot;block mb-2 text-sm font-medium text-red-700 dark:text-red-500&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300&quot;</span><span class="token punctuation">;</span>
   <span class="token keyword">const</span> errorClassInput <span class="token operator">=</span> error<span class="token operator">?</span> <span class="token string">&quot;bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 block w-full p-2.5 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;mb-6&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label
  htmlFor<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>
  className<span class="token operator">=</span><span class="token punctuation">{</span>errorClassLabel<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span>  placeholder<span class="token operator">=</span><span class="token punctuation">{</span>placeholder<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> onBlur<span class="token operator">=</span><span class="token punctuation">{</span>onBlur<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span>
     className<span class="token operator">=</span><span class="token punctuation">{</span>errorClassInput<span class="token punctuation">}</span>
     <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
   
     <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FormInput

</code></pre></div><h3 id="boton"><a href="#boton" class="header-anchor">#</a> Boton</h3> <p>components/Button.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">Button</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> text <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>button
            type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
            className<span class="token operator">=</span><span class="token string">&quot;focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Button

</code></pre></div><h3 id="error-de-formulario"><a href="#error-de-formulario" class="header-anchor">#</a> Error de formulario</h3> <p>components/FormError.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">FormError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* Si existe un error(si no cumple las validaciones) 
    message corresponde con la propiedad message de la validacion   
          */</span><span class="token punctuation">}</span>
            <span class="token punctuation">{</span>error <span class="token operator">&amp;&amp;</span>  <span class="token punctuation">(</span><span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mt-2 text-sm text-red-600 dark:text-red-500&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;font-medium&quot;</span><span class="token operator">&gt;</span>Oops<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token punctuation">{</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FormError

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;../components/Button&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">&quot;../components/FormError&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormInput <span class="token keyword">from</span> <span class="token string">&quot;../components/FormInput&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> erroresFirebase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/erroresFirebase&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/formValidate&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternEmail<span class="token punctuation">,</span> minLength6<span class="token punctuation">,</span> validateTrim<span class="token punctuation">,</span> validateEquals <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> registerUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>

  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> getValues<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token string">'123123'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>code <span class="token punctuation">,</span> message<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>code <span class="token punctuation">,</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Register&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>

          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu correo&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            minLength<span class="token operator">:</span> minLength6<span class="token punctuation">,</span>
            validate<span class="token operator">:</span> validateTrim
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu password&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;repassword&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            validate<span class="token operator">:</span> <span class="token function">validateEquals</span><span class="token punctuation">(</span><span class="token function">getValues</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Repite tu password&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>repassword<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;Register&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Register

</code></pre></div><p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hook-form'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">'../components/Button'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">'../components/FormError'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormInput <span class="token keyword">from</span> <span class="token string">'../components/FormInput'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">'../components/Title'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../context/userProvider'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> erroresFirebase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/erroresFirebase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/formValidate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> loginUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternEmail<span class="token punctuation">,</span> minLength6<span class="token punctuation">,</span> validateTrim <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Creamos el navigate</span>
  <span class="token keyword">const</span> navegate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// useForm({valores iniciales})</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span>  formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> setError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
        email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Iniciamos sesion</span>
      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>code <span class="token punctuation">,</span> message<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>code <span class="token punctuation">,</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Login&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>firebase<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* El hook hace las validaciones , si esta todo bien invoca la funcion onSubmit */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> patternEmail
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu correo&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>email<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            minLength<span class="token operator">:</span> minLength6<span class="token punctuation">,</span>
            validate<span class="token operator">:</span> validateTrim
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu contraseña&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>password<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;Login&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login

</code></pre></div><h2 id="outlet"><a href="#outlet" class="header-anchor">#</a> Outlet</h2> <ul><li>Nos sirve para hacer que dos componentes compartan el mismo layout</li> <li>Se hace con Outlet de react router</li> <li>Nos permite que varios componentes compartan el mismo layout</li></ul> <p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutContainerForm<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/register'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Register <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/home'</span> element<span class="token operator">=</span><span class="token punctuation">{</span>
          <span class="token comment">/* Ruta protegida (Home) */</span>
          <span class="token operator">&lt;</span>RequireAuth <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>RequireAuth<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes <span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

</code></pre></div><p>components/LayoutContainerForm.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">const</span> <span class="token function-variable function">LayoutContainerForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Outlet<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> LayoutContainerForm

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>En Outlet se va a renderizar el componente hijo (que pueden ser Register o Login)</p></div> <h3 id="le-aplicamos-diseno"><a href="#le-aplicamos-diseno" class="header-anchor">#</a> Le aplicamos diseño</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">const</span> <span class="token function-variable function">LayoutContainerForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;w-96 mx-auto mt-10&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Outlet<span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> LayoutContainerForm

</code></pre></div><h2 id="navbar-jsx"><a href="#navbar-jsx" class="header-anchor">#</a> Navbar.jsx</h2> <ul><li><a href="https://flowbite.com/docs/components/navbar/" target="_blank" rel="noopener noreferrer">navbar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Control + D = Siguiente ocurrencia.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../context/userProvider&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Navbar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Obtenemos el valor de la props value del Provider del context</span>
    <span class="token comment">// useContext(context)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> signOutUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleClickLogOut</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> <span class="token function">signOutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> classButtonBlue <span class="token operator">=</span> <span class="token string">&quot;text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-3  dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> classButtonRed <span class="token operator">=</span> <span class="token string">&quot;text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-3  dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>nav className<span class="token operator">=</span><span class="token string">&quot;bg-white border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-800&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;container flex flex-wrap justify-between items-center mx-auto&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;flex items-center&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;self-center text-xl font-semibold whitespace-nowrap dark:text-white&quot;</span><span class="token operator">&gt;</span>URLShort App<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>

                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex md:order-2&quot;</span><span class="token operator">&gt;</span>
                        <span class="token punctuation">{</span>
                            user <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> className<span class="token operator">=</span><span class="token punctuation">{</span>classButtonBlue<span class="token punctuation">}</span><span class="token operator">&gt;</span>Inicio <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClickLogOut<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token punctuation">{</span>classButtonRed<span class="token punctuation">}</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> className<span class="token operator">=</span><span class="token punctuation">{</span>classButtonBlue<span class="token punctuation">}</span><span class="token operator">&gt;</span>Login <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span> className<span class="token operator">=</span><span class="token punctuation">{</span>classButtonBlue<span class="token punctuation">}</span><span class="token operator">&gt;</span>Register <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>

                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>



            <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Navbar

</code></pre></div><h2 id="ruta-protegida-2"><a href="#ruta-protegida-2" class="header-anchor">#</a> Ruta protegida #2</h2> <ul><li>Vamos a hacerlo de la misma manera que el Layout (Outlet)</li></ul> <p>routes/Perfil.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">Perfil</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Perfil<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Perfil

</code></pre></div><h3 id="creamos-la-carpeta-layouts-en-components"><a href="#creamos-la-carpeta-layouts-en-components" class="header-anchor">#</a> Creamos la carpeta layouts en components</h3> <ul><li>RequireAuth lo movemos a components/layouts/ y le cambiamos el nombre a LayoutRequireAuth</li> <li>El LayoutContainerForm deberia estar en esta carpeta también.</li></ul> <p>components/layouts/LayoutRequireAuth.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Navigate<span class="token punctuation">,</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../context/userProvider'</span>

<span class="token keyword">const</span> <span class="token function-variable function">LayoutRequireAuth</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Si no existe el usuario</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Redirrecionamos  al login</span>
      <span class="token keyword">return</span>  <span class="token operator">&lt;</span>Navigate to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
 <span class="token comment">// Entramos a la ruta protegida</span>
  <span class="token keyword">return</span>   <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;container mx-auto&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>Outlet<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>  
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> LayoutRequireAuth

</code></pre></div><p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> LayoutContainerForm <span class="token keyword">from</span> <span class="token string">&quot;./components/LayoutContainerForm&quot;</span>
<span class="token keyword">import</span> LayoutRequireAuth <span class="token keyword">from</span> <span class="token string">&quot;./components/layouts/LayoutRequireAuth&quot;</span>
<span class="token keyword">import</span> Navbar <span class="token keyword">from</span> <span class="token string">&quot;./components/Navbar&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./context/userProvider&quot;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./routes/Home&quot;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&quot;./routes/Login&quot;</span>
<span class="token keyword">import</span> Perfil <span class="token keyword">from</span> <span class="token string">&quot;./routes/Perfil&quot;</span>
<span class="token keyword">import</span> Register <span class="token keyword">from</span> <span class="token string">&quot;./routes/Register&quot;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>UserContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutRequireAuth<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* Rutas protegidas */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Route  path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/perfil&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Perfil <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutContainerForm <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/register'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Register <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes <span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><h2 id="ruta-404"><a href="#ruta-404" class="header-anchor">#</a> Ruta 404</h2> <p>routes/NotFound.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">NotFound</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>

    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;404&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> NotFound

</code></pre></div><p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutRequireAuth <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/perfil&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Perfil <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutContainerForm <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/register'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Register <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Ruta 404
        Cualquier ruta  que no coincida con las anteriores */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NotFound<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes <span class="token operator">&gt;</span>

</code></pre></div><h2 id="button-loading"><a href="#button-loading" class="header-anchor">#</a> Button loading</h2> <p>components/ButtonLoading.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">ButtonLoading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>button
            disabled
            type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span>
            className<span class="token operator">=</span><span class="token string">&quot;py-2.5 px-5 mr-2 text-sm font-medium text-gray-900 bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:outline-none focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 inline-flex items-center&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>svg
                role<span class="token operator">=</span><span class="token string">&quot;status&quot;</span>
                className<span class="token operator">=</span><span class="token string">&quot;inline w-4 h-4 mr-2 text-gray-200 animate-spin dark:text-gray-600&quot;</span>
                viewBox<span class="token operator">=</span><span class="token string">&quot;0 0 100 101&quot;</span>
                fill<span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
                xmlns<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2000/svg&quot;</span>
            <span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>path
                    d<span class="token operator">=</span><span class="token string">&quot;M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z&quot;</span>
                    fill<span class="token operator">=</span><span class="token string">&quot;currentColor&quot;</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>path
                    d<span class="token operator">=</span><span class="token string">&quot;M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z&quot;</span>
                    fill<span class="token operator">=</span><span class="token string">&quot;#1C64F2&quot;</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
            Loading<span class="token operator">...</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ButtonLoading<span class="token punctuation">;</span>

</code></pre></div><p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>loading <span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Iniciamos sesion</span>
      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>code <span class="token punctuation">,</span> message<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>code <span class="token punctuation">,</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span> 
          loading <span class="token operator">?</span> <span class="token operator">&lt;</span>ButtonLoading<span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">:</span>   <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;Login&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
      
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">const</span> <span class="token punctuation">[</span>loading <span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">//  data = un objeto con los input registrados</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Creamos un usuario</span>
      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Redirreciono al home</span>
      <span class="token function">navegate</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>code <span class="token punctuation">,</span> message<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">erroresFirebase</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>code <span class="token punctuation">,</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>  loading <span class="token operator">?</span> <span class="token operator">&lt;</span>ButtonLoading<span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">:</span>  <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;Register&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span>
       
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

</code></pre></div><h2 id="firestore-bd"><a href="#firestore-bd" class="header-anchor">#</a> Firestore BD</h2> <ul><li>Firebase tiene dos BD.</li> <li>RealTime se invento primero y luego surgio FireStore</li> <li>Ambas trabajan en tiempo real.</li></ul> <h3 id="realtime"><a href="#realtime" class="header-anchor">#</a> RealTime</h3> <ul><li>Es  parecido a Json</li> <li>Podemos trabajar a través de una REST API en un futuro</li></ul> <h3 id="firestore"><a href="#firestore" class="header-anchor">#</a> Firestore</h3> <ul><li>Trabaja a través de documento</li></ul> <h3 id="sitio-de-firebase"><a href="#sitio-de-firebase" class="header-anchor">#</a> Sitio de Firebase</h3> <ol><li>FireStore Database – Create database – en test mode (dura 30 dias) – habilitar</li> <li>Inicia una colección (Iniciar colección = Crear colección)</li></ol> <div class="custom-block tip"><p class="custom-block-title">Explicacion como si fuera relacional</p> <ul><li>Una colección es igual a una tabla.</li> <li>Collection ID = nombre de la tabla</li></ul></div> <ol start="3"><li>Agregamos un documento en la colección.</li></ol> <div class="custom-block tip"><p class="custom-block-title">Explicacion como si fuera relacional</p> <ul><li>Un documento es igual a una fila de la tabla.</li> <li>Podes generar una ID aleatoria en Document ID</li> <li>Los campos(fields) de un documento serian las columnas de una fila</li> <li>A diferencia de una BD relacional, dos filas pueden tener diferentes campos(columnas) de datos (en una fila el campo es name y en otra el campo es nombre)</li> <li>Cada campo(columna) contiene un nombre, el tipo de dato y el valor.</li></ul></div> <p>Ejemplo(campo &quot;valor&quot;):</p> <p>nanoid &quot;xM6S6Z&quot;</p> <p>origin &quot;https://firebase.google.com/docs/firestore/quickstart?hl=es#initialize&quot;</p> <p>uid &quot;&quot;</p> <p>Guardar</p> <div class="custom-block tip"><p class="custom-block-title">proyecto de crear un short de una url</p> <ul><li>El Document ID es igual al nanoid</li> <li>nanoid: Es el id del documento y el short de la url</li> <li>origin : La url a la que va a redirrecionar el short. El short apunta a esta url.</li> <li>uid : La ID del usuario que creo el short</li></ul></div> <h3 id="en-el-proyecto-3"><a href="#en-el-proyecto-3" class="header-anchor">#</a> En el proyecto</h3> <ul><li><a href="https://firebase.google.com/docs/firestore/quickstart?hl=es" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ol><li>Instalar firebase(ya lo hicimos)</li> <li>Importamos Firestore y lo configuramos en firebase.js</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// Your web app's Firebase configuration</span>
<span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  apiKey<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  authDomain<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  projectId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  storageBucket<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize Firebase</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// getFirestore(appFirebase)</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">getFirestore</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>auth <span class="token punctuation">,</span> db<span class="token punctuation">}</span>

</code></pre></div><h2 id="getdocs"><a href="#getdocs" class="header-anchor">#</a> getDocs</h2> <ul><li>getDocs es un método para leer todos los documentos de una colección.</li> <li>Para manipular los documentos creamos un hook.</li> <li><a href="https://firebase.google.com/docs/firestore/quickstart?hl=es#read_data" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>hooks/useFirestore.js</p> <ul><li>El hook sirve para reutilizar lógica.</li> <li>Utilizamos la constante db para especificar en que proyecto debe usar la BD. (LO MISMO QUE AUTH)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../firebase&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useFirestore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//  getDocs(metodo collection)</span>
      <span class="token comment">//  collection(db , &quot;nombre_collecion&quot;)</span>
      <span class="token comment">// db = configuracion de la bd   de firebase.js</span>
      <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// A la propiedad docs le podemos añadir el metodo map() del array</span>
     <span class="token keyword">const</span> dataDB <span class="token operator">=</span>  query<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token comment">// doc tiene la propiedad id (devuelve la id) y el metodo data (devuelve la informacion)</span>
        doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token function">setData</span><span class="token punctuation">(</span>dataDB<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
       data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useFirestore&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><h2 id="where"><a href="#where" class="header-anchor">#</a> Where</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Las reglas de seguridad de firebase no son filtros , el where lo añadis vos.</p></div> <p>useFirestore.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../firebase&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useFirestore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Creamos una referencia con el metodo collection</span>
      <span class="token keyword">const</span> dataRef <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// query(referencia , metodo where )</span>
      <span class="token comment">//where(campo a filtrar , &quot;==&quot; , valor);</span>
      <span class="token comment">// where campo_a_filtro == valor</span>
      <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>dataRef <span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;EV8w1BcEXiTkoyXqlrwF2jBdy4u2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// Ejecutamos la consulta con el where</span>
      <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> dataDB <span class="token operator">=</span>  querySnapshot<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token function">setData</span><span class="token punctuation">(</span>dataDB<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
       data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="informacion-del-usuario-activo"><a href="#informacion-del-usuario-activo" class="header-anchor">#</a> Informacion del usuario activo</h3> <ul><li>Se encuentra en el auth.currentUser.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../firebase&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="para-hacer-el-filtro-dinamicamente"><a href="#para-hacer-el-filtro-dinamicamente" class="header-anchor">#</a> Para hacer el filtro dinámicamente</h3> <p>Entonces cambiamos una parte del código de useFirestore.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth<span class="token punctuation">,</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../firebase&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useFirestore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

       <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Creamos una referencia con el metodo collection</span>
      <span class="token keyword">const</span> dataRef <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// query(referencia , metodo where )</span>
      <span class="token comment">//where(campo a filtrar , &quot;==&quot; , valor);</span>
      <span class="token comment">// where campo_a_filtro == valor</span>
      <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>dataRef <span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span> <span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="add-doc"><a href="#add-doc" class="header-anchor">#</a> Add Doc</h2> <ul><li><p><a href="https://firebase.google.com/docs/firestore/manage-data/add-data?hl=es#add_a_document" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.npmjs.com/package/nanoid" target="_blank" rel="noopener noreferrer"> modulo para generar la id<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Podes Agregar un documento con los métodos set y add</p> <ul><li>método set: Añade un documento, especificando la id (no se genera de forma automática) y los datos correspondientes</li> <li>método add: Añade un documento y la id se genera automáticamente</li></ul> <p>useFirestore.js</p></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm i nanoid
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where <span class="token punctuation">,</span> doc<span class="token punctuation">,</span> setDoc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> <span class="token function-variable function">addData</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">try</span><span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
      <span class="token comment">// Creamos un objeto con los datos que se van a guardar</span>
      <span class="token keyword">const</span> newDoc <span class="token operator">=</span> <span class="token punctuation">{</span>
          enabled<span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">,</span>
           nanoid<span class="token operator">:</span>  <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           origin<span class="token operator">:</span>url<span class="token punctuation">,</span>
           uid<span class="token operator">:</span>auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid

      <span class="token punctuation">}</span>
      <span class="token comment">// Creamos la referencia</span>
      <span class="token comment">// doc(db , collecion , id del documento a crear)</span>
      <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db <span class="token punctuation">,</span> <span class="token string">'urls'</span> <span class="token punctuation">,</span> newDoc<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Creamos el documento</span>
      <span class="token comment">//setDoc(referencia , datos del documento)</span>
      <span class="token keyword">await</span> <span class="token function">setDoc</span><span class="token punctuation">(</span>docRef <span class="token punctuation">,</span> newDoc<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>data<span class="token punctuation">,</span> newDoc <span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
       data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> getData <span class="token punctuation">,</span> addData
  <span class="token punctuation">}</span>

</code></pre></div><p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useFirestore&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> getData <span class="token punctuation">,</span> addData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text <span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">addData</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input
        type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;ex: http://youtube.com&quot;</span> 
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span><span class="token constant">ADD</span> <span class="token constant">URL</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><h2 id="loading-parametro-set-de-usestate"><a href="#loading-parametro-set-de-usestate" class="header-anchor">#</a> Loading (Parametro set de useState)</h2> <p>useFirestore.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> setDoc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> nanoid <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;nanoid&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth<span class="token punctuation">,</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../firebase&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useFirestore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



  <span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//usamos un callback en el setLoading cuyo parametro es el valor &quot;actual&quot; (antes de modificarse) del estado</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> getData<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">const</span> dataRef <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>dataRef<span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> dataDB <span class="token operator">=</span> querySnapshot<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token function">setData</span><span class="token punctuation">(</span>dataDB<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
       <span class="token comment">//usamos un callback en el setLoading cuyo parametro es el valor &quot;actual&quot; (antes de modificarse) del estado</span>
       <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> getData<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">addData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//usamos un callback en el setLoading cuyo parametro es el valor &quot;actual&quot; (antes de modificarse) del estado</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> addData<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">const</span> newDoc <span class="token operator">=</span> <span class="token punctuation">{</span>
        enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        nanoid<span class="token operator">:</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        origin<span class="token operator">:</span> url<span class="token punctuation">,</span>
        uid<span class="token operator">:</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid

      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'urls'</span><span class="token punctuation">,</span> newDoc<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> <span class="token function">setDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">,</span> newDoc<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>data<span class="token punctuation">,</span> newDoc<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token comment">//usamos un callback en el setLoading cuyo parametro es el valor &quot;actual&quot; (antes de modificarse) del estado</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> addData<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> getData<span class="token punctuation">,</span> addData
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Button.jsx</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Control + D = Siguiente ocurrencia</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> ButtonLoading <span class="token keyword">from</span> <span class="token string">'./ButtonLoading'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'purple'</span>  <span class="token punctuation">,</span> loading<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>ButtonLoading<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>button
            type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
            className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">focus:outline-none text-white bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-700 hover:bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-800 focus:ring-4 focus:ring-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-600 dark:hover:bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-700 dark:focus:ring-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-900 ml-5</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Button

</code></pre></div><p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;../components/Button&quot;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useFirestore&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> getData <span class="token punctuation">,</span> addData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text <span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>getData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">addData</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input
        type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;ex: http://youtube.com&quot;</span> 
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;ADD URL&quot;</span>  color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>addData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><p>Login.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;Login&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        
      
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

</code></pre></div><p>Register.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;Register&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> 
       
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

</code></pre></div><h2 id="delete-doc"><a href="#delete-doc" class="header-anchor">#</a> Delete doc</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/manage-data/delete-data?hl=es#delete_documents" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Para eliminar un elemento se utiliza la ID del documento.</li></ul> <p>Firestore.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> setDoc<span class="token punctuation">,</span> deleteDoc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">const</span> <span class="token function-variable function">deleteData</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
     
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> <span class="token punctuation">[</span>nanoid<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// Creamos la referencia del documento</span>
      <span class="token comment">// doc(db , collecion , id del documento)</span>
      <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'urls'</span><span class="token punctuation">,</span> nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//Eliminamos</span>
     <span class="token keyword">await</span> <span class="token function">deleteDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>nanoid <span class="token operator">!==</span> nanoid<span class="token punctuation">)</span><span class="token punctuation">)</span>
   
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
     
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> deleteData<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> getData<span class="token punctuation">,</span> addData <span class="token punctuation">,</span> deleteData
  <span class="token punctuation">}</span>

</code></pre></div><p>Button.jsx</p> <ul><li>Los eventos hay que manipularlo en los componentes que lo generan y no en un componente padre.</li> <li>Por lo tanto la mejor opcion es manejarla con props.</li></ul> <p>Button.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> ButtonLoading <span class="token keyword">from</span> <span class="token string">'./ButtonLoading'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'purple'</span>  <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> onclick<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>ButtonLoading<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>button
            onClick<span class="token operator">=</span><span class="token punctuation">{</span>onclick<span class="token punctuation">}</span>
            type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
            className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">focus:outline-none text-white bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-700 hover:bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-800 focus:ring-4 focus:ring-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-600 dark:hover:bg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-700 dark:focus:ring-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-900 ml-5</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Button

</code></pre></div><p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;../components/Button&quot;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useFirestore&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> getData <span class="token punctuation">,</span> addData <span class="token punctuation">,</span> deleteData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text <span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>getData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">addData</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickDelete</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">deleteData</span><span class="token punctuation">(</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;eliminado&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input
        type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;ex: http://youtube.com&quot;</span> 
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;ADD URL&quot;</span>  color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>addData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Eliminar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span>
          loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span><span class="token punctuation">}</span> 
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickDelete</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><h2 id="update-doc"><a href="#update-doc" class="header-anchor">#</a> Update Doc</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/manage-data/add-data?hl=es#update-data" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>useFirestore.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> setDoc<span class="token punctuation">,</span> deleteDoc<span class="token punctuation">,</span> updateDoc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">updateData</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">nanoid <span class="token punctuation">,</span> origin</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> updateData<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// Creamos la referencia del documento</span>
      <span class="token comment">// doc(db , collecion , id del documento)</span>
      <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'urls'</span><span class="token punctuation">,</span> nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//Modificamos</span>
     <span class="token comment">// updateDoc(referencia , {datos a actualizar})</span>
     <span class="token keyword">await</span> <span class="token function">updateDoc</span><span class="token punctuation">(</span>docRef <span class="token punctuation">,</span> <span class="token punctuation">{</span>origin <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>nanoid <span class="token operator">===</span> nanoid <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span>item <span class="token punctuation">,</span> origin<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> item <span class="token punctuation">)</span><span class="token punctuation">)</span>
   
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
     
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token parameter">valorAnterior</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>valorAnterior<span class="token punctuation">,</span> updateData<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> getData<span class="token punctuation">,</span> addData <span class="token punctuation">,</span> deleteData <span class="token punctuation">,</span> updateData
  <span class="token punctuation">}</span>

</code></pre></div><p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;../components/Button&quot;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useFirestore&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> getData <span class="token punctuation">,</span> addData <span class="token punctuation">,</span> deleteData <span class="token punctuation">,</span> updateData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>text <span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>newOriginID <span class="token punctuation">,</span> setNewOriginID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>getData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newOriginID<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>newOriginID <span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setNewOriginID</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> <span class="token function">addData</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickDelete</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token keyword">await</span> <span class="token function">deleteData</span><span class="token punctuation">(</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;eliminado&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickEdit</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    
    <span class="token function">setText</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setNewOriginID</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input
        type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;ex: http://youtube.com&quot;</span> 
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
          newOriginID <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;EDITAR URL&quot;</span>  color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>updateData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token operator">:</span>   <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;ADD URL&quot;</span>  color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>addData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
       
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Eliminar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span>
          loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span><span class="token punctuation">}</span> 
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickDelete</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>    
           <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Editar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span>
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickEdit</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><h2 id="problemas-botones"><a href="#problemas-botones" class="header-anchor">#</a> PROBLEMAS BOTONES</h2> <h3 id="interpolacion-colores-tailwind"><a href="#interpolacion-colores-tailwind" class="header-anchor">#</a> interpolación colores tailwind</h3> <ul><li><p><a href="https://stackoverflow.com/questions/66330112/tailwind-custom-colors-not-complied" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Tailwind no compila las clases definidas con la interpolación (dinámicas)</p></li> <li><p>Tailwind Lee el archivo sin detectar el valor de una variable pasada (ej. color en el proyecto)</p></li> <li><p>TAILWIND solo utiliza las clases que se implementan, si no la detecta en el archivo no la compila y por lo tanto provoca el error que nos estaba pasando.</p></li></ul> <p>Button.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> ButtonLoading <span class="token keyword">from</span> <span class="token string">'./ButtonLoading'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'purple'</span>  <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> onclick<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>ButtonLoading<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token keyword">const</span> classButtonBase <span class="token operator">=</span>
        <span class="token string">&quot;focus:outline-none text-white focus:ring-4 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 ml-5 &quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> classButtonColor<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;indigo&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-indigo-700 hover:bg-indigo-800 focus:ring-indigo-300 dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:ring-indigo-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;pink&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-pink-700 hover:bg-pink-800 focus:ring-pink-300 dark:bg-pink-600 dark:hover:bg-pink-700 dark:focus:ring-pink-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;purple&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-purple-700 hover:bg-purple-800 focus:ring-purple-300 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-red-700 hover:bg-red-800 focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-blue-700 hover:bg-blue-800 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-green-700 hover:bg-green-800 focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classButtonColor <span class="token operator">=</span>
            <span class="token string">&quot;bg-yellow-400 hover:bg-yellow-700 focus:ring-yellow-300 dark:bg-yellow-600 dark:hover:bg-yellow-700 dark:focus:ring-yellow-900&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>button
            onClick<span class="token operator">=</span><span class="token punctuation">{</span>onclick<span class="token punctuation">}</span>
            type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
            className<span class="token operator">=</span><span class="token punctuation">{</span>classButtonBase <span class="token operator">+</span> classButtonColor <span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Button

</code></pre></div><h3 id="separacion-entre-botones"><a href="#separacion-entre-botones" class="header-anchor">#</a> Separacion entre botones</h3> <p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex space-x-2&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Eliminar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span>
          loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span><span class="token punctuation">}</span> 
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickDelete</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>    
           <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Editar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span>
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickEdit</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

</code></pre></div><h2 id="hook-form-home"><a href="#hook-form-home" class="header-anchor">#</a> Hook Form Home</h2> <p>utils/formValidate.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">formValidate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        required<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Campo obligatorio'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        patternEmail<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&quot;Formato de email incorrecto&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        patternURL<span class="token operator">:</span> <span class="token punctuation">{</span> 
            value<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https?:\/\/[\w\-]+(\.[\w\-]+)+[\#?]?.*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&quot;Formato url incorrecto&quot;</span>
        <span class="token punctuation">}</span> <span class="token punctuation">,</span>
        minLength6<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;Minimo 6 caracteres&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// v es igual al valor del campo</span>
        validateTrim<span class="token operator">:</span> <span class="token punctuation">{</span>

            <span class="token function-variable function">trim</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Escribe algo&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">validateEquals</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">equals</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> value <span class="token operator">||</span> <span class="token string">&quot;No coincide la contraseña&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Home.jsx</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>usamos resetField para resetear el campo y setValue  para asignar el valor de un campo</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;../components/Button&quot;</span>
<span class="token keyword">import</span> FormError <span class="token keyword">from</span> <span class="token string">&quot;../components/FormError&quot;</span>
<span class="token keyword">import</span> FormInput <span class="token keyword">from</span> <span class="token string">&quot;../components/FormInput&quot;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../components/Title&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useFirestore&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formValidate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/formValidate&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hook-form'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> required <span class="token punctuation">,</span> patternURL<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span>  formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">,</span> resetField <span class="token punctuation">,</span> setValue <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span>data <span class="token punctuation">,</span> error <span class="token punctuation">,</span> loading <span class="token punctuation">,</span> getData <span class="token punctuation">,</span> addData <span class="token punctuation">,</span> deleteData <span class="token punctuation">,</span> updateData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

 
  <span class="token keyword">const</span> <span class="token punctuation">[</span>newOriginID <span class="token punctuation">,</span> setNewOriginID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>getData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newOriginID<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>newOriginID <span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setNewOriginID</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">addData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  
    <span class="token punctuation">}</span>
    <span class="token comment">// Reseteamos el campo url</span>
    <span class="token comment">// resetField(&quot;nombrecampo&quot;)</span>
    <span class="token function">resetField</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickDelete</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   
    <span class="token keyword">await</span> <span class="token function">deleteData</span><span class="token punctuation">(</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;eliminado&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickEdit</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//Le asignamos un nuevo valor al campo URL</span>
    <span class="token comment">// setValue(&quot;nombrecampo&quot; , nuevo valor)</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span> <span class="token punctuation">,</span> item<span class="token punctuation">.</span>origin<span class="token punctuation">)</span>
    
    <span class="token function">setNewOriginID</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;https://youtube.com&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span> pattern<span class="token operator">:</span> patternURL
           
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu URL&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>url<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>url<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>
          newOriginID <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;EDITAR URL&quot;</span>  color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>updateData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token operator">:</span>   <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;ADD URL&quot;</span>  color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>addData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
       
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex space-x-2&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Eliminar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span>
          loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span><span class="token punctuation">}</span> 
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickDelete</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>    
           <span class="token operator">&lt;</span>Button 
          text<span class="token operator">=</span><span class="token string">&quot;Editar&quot;</span>
          color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span>
          onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickEdit</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><h2 id="card-flowbite"><a href="#card-flowbite" class="header-anchor">#</a> Card flowbite</h2> <p>Home.jsx</p> <ul><li><a href="https://www.w3schools.com/js/js_window_location.asp" target="_blank" rel="noopener noreferrer">Utilizamos window.location <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// window.location.href =  La url en la que estas</span>
  <span class="token keyword">const</span> pathURL  <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pathURL'</span> <span class="token punctuation">,</span> pathURL <span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;https://youtube.com&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span> pattern<span class="token operator">:</span> patternURL

          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu URL&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>url<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>url<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>
          newOriginID <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;EDITAR URL&quot;</span> color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>updateData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;ADD URL&quot;</span> color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>addData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;p-6 bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700 mb-3&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h5 className<span class="token operator">=</span><span class="token string">&quot;mb-2 text-xl font-bold tracking-tight text-gray-900 dark:text-white&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>pathURL<span class="token punctuation">}</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">&quot;mb-3 font-normal text-gray-700 dark:text-gray-400&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex space-x-2&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Button
                text<span class="token operator">=</span><span class="token string">&quot;Eliminar&quot;</span>
                color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span>
                loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span><span class="token punctuation">}</span>
                onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickDelete</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Button
                text<span class="token operator">=</span><span class="token string">&quot;Editar&quot;</span>
                color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span>
                onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickEdit</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

</code></pre></div><h2 id="handleclickcopy"><a href="#handleclickcopy" class="header-anchor">#</a> handleClickCopy</h2> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/clipboard" target="_blank" rel="noopener noreferrer">Navigator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard" target="_blank" rel="noopener noreferrer">ClipBoard object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Home.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> required<span class="token punctuation">,</span> patternURL <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">,</span> resetField<span class="token punctuation">,</span> setValue <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> getData<span class="token punctuation">,</span> addData<span class="token punctuation">,</span> deleteData<span class="token punctuation">,</span> updateData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>newOriginID<span class="token punctuation">,</span> setNewOriginID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>copy<span class="token punctuation">,</span> setCopy<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>getData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading data<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newOriginID<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>newOriginID<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setNewOriginID</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">addData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
    <span class="token comment">// Reseteamos el campo url</span>
    <span class="token comment">// resetField(&quot;nombrecampo&quot;)</span>
    <span class="token function">resetField</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickDelete</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">await</span> <span class="token function">deleteData</span><span class="token punctuation">(</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;eliminado&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickEdit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//Le asignamos un nuevo valor al campo URL</span>
    <span class="token comment">// setValue(&quot;nombrecampo&quot; , nuevo valor)</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>origin<span class="token punctuation">)</span>

    <span class="token function">setNewOriginID</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> pathURL <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickCopy</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//Devuelve una promesa por eso usamos el await</span>
    <span class="token comment">//writeText(texto)</span>
    <span class="token comment">// el texto se copiara en el portapapeles</span>
    <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>pathURL <span class="token operator">+</span> nanoid<span class="token punctuation">)</span>
    <span class="token function">setCopy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>nanoid<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">&quot;Home&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>FormInput
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;https://youtube.com&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            required<span class="token punctuation">,</span> pattern<span class="token operator">:</span> patternURL

          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          label<span class="token operator">=</span><span class="token string">&quot;Ingresa tu URL&quot;</span>
          error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>url<span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>FormError error<span class="token operator">=</span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>url<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>FormInput<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>
          newOriginID <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;EDITAR URL&quot;</span> color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>updateData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>Button text<span class="token operator">=</span><span class="token string">&quot;ADD URL&quot;</span> color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>addData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;p-6 bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700 mb-3&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h5 className<span class="token operator">=</span><span class="token string">&quot;mb-2 text-xl font-bold tracking-tight text-gray-900 dark:text-white&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>pathURL<span class="token punctuation">}</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">&quot;mb-3 font-normal text-gray-700 dark:text-gray-400&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>origin<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex space-x-2&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Button
                text<span class="token operator">=</span><span class="token string">&quot;Eliminar&quot;</span>
                color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span>
                loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span><span class="token punctuation">}</span>
                onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickDelete</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Button
                text<span class="token operator">=</span><span class="token string">&quot;Editar&quot;</span>
                color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span>
                onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickEdit</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Button
                text<span class="token operator">=</span><span class="token punctuation">{</span>copy<span class="token punctuation">[</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">&quot;Copiado&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Copiar&quot;</span><span class="token punctuation">}</span>
                color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span>
                onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClickCopy</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="redirect-params-en-la-url-getdoc"><a href="#redirect-params-en-la-url-getdoc" class="header-anchor">#</a> Redirect (params en la url) / getDoc</h2> <p>App.jsx</p> <div class="custom-block tip"><p class="custom-block-title">Variable en la url</p> <ul><li>Sintaxis  ruta/:nombrevariable</li> <li>Si entramos a ruta/a58d6</li> <li>el valor de nombrevariable es a58d6</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutRequireAuth <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/perfil&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Perfil <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutContainerForm <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/register'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Register <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/login'</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
         <span class="token punctuation">{</span><span class="token comment">/* :nombrevariable */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/:nanoid&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>LayoutRedirect<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route index element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NotFound<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NotFound<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes <span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>

</code></pre></div><p>hooks/useFirestore.js</p> <ul><li><a href="https://firebase.google.com/docs/firestore/query-data/get-data?hl=es#get_a_document" target="_blank" rel="noopener noreferrer">Obtener un documento<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">const</span> <span class="token function-variable function">searchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">nanoid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// Creamos la referencia del documento</span>
      <span class="token comment">// doc(db , collecion , id del documento)</span>
      <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'urls'</span><span class="token punctuation">,</span> nanoid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Buscamos un documento </span>
      <span class="token comment">// where ID = nanoid</span>
      <span class="token keyword">const</span> docSnap <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> docSnap<span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> getData<span class="token punctuation">,</span> addData<span class="token punctuation">,</span> deleteData<span class="token punctuation">,</span> updateData<span class="token punctuation">,</span> searchData
  <span class="token punctuation">}</span>

</code></pre></div><p>layouts/LayoutRedirect.jsx</p> <ul><li>Usamos useParams() para leer los parámetros(variables) de la url.</li> <li>Nos devuelve un objeto donde cada propiedad es un parámetro de la url con su valor correspondiente.</li> <li>Usamos el método exists() que lo contiene el documento extraído de la BD , para comprobar si existe.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">,</span> useParams<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../hooks/useFirestore&quot;</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">&quot;../Title&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">LayoutRedirect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>searchData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>loading <span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Nos devuelve una promesa</span>
        <span class="token function">searchData</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>nanoid<span class="token punctuation">)</span>
        <span class="token comment">// En la respuesta afirmativa , recibimos al documento como parametro.</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">docSnap</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

            <span class="token comment">// Si el documento existe</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>docSnap<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// Redirrecionamos</span>
                window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span>  docSnap<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>origin<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>Title text<span class="token operator">=</span><span class="token string">'Cargando redirrecionamiento...'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;mx-auto container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Outlet<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> LayoutRedirect

</code></pre></div><h2 id="regla-de-seguridad"><a href="#regla-de-seguridad" class="header-anchor">#</a> Regla de seguridad</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/security/get-started?hl=es" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://firebase.google.com/docs/firestore/security/rules-structure?hl=es#basic_readwrite_rules" target="_blank" rel="noopener noreferrer">link 2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://firebase.google.com/docs/firestore/security/rules-conditions?hl=es#authentication" target="_blank" rel="noopener noreferrer">link 3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="firebase"><a href="#firebase" class="header-anchor">#</a> FireBase</h3> <p>FireStore DataBase – Reglas</p> <p>Te aparecía algo asi:</p> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span><span class="token punctuation">{</span>document<span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword">if</span>
          request<span class="token punctuation">.</span>time <span class="token operator">&lt;</span> timestamp<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Usamos la versión 2</li> <li>Usan el match para encontrar algo (Si lo encuentra ejecuta el bloque {})</li> <li>El siguiente código especifica que que se puede leer y escribir en la colección durante  30 dias. (empieza el dia que iniciaste la BD)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword">if</span>
          request<span class="token punctuation">.</span>time <span class="token operator">&lt;</span> timestamp<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">allow</p> <p>Los allow se aplican si se cumple la condicion (se encuentra después del if)</p></div> <div class="custom-block tip"><p class="custom-block-title">Division</p> <ul><li>Una regla read se puede dividir en get y list, mientras que una regla write se puede dividir en create, update y delete</li></ul></div> <h3 id="implementamos-nuestro-match-para-la-coleccion-urls"><a href="#implementamos-nuestro-match-para-la-coleccion-urls" class="header-anchor">#</a> Implementamos nuestro match para la colección urls</h3> <ul><li>request.auth = Te devuelve la sesion del usuario , en caso de no haber devuelve null.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span>urls<span class="token operator">/</span><span class="token punctuation">{</span>document<span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span><span class="token keyword">null</span> 
    <span class="token punctuation">}</span>
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Solo se puede escribir y leer la BD , si existe una sesion del usuario activa.</li></ul></div> <h3 id="separar-los-permisos"><a href="#separar-los-permisos" class="header-anchor">#</a> Separar los permisos</h3> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span>urls<span class="token operator">/</span><span class="token punctuation">{</span>document<span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
    allow read<span class="token operator">:</span> <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      allow  write<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span><span class="token keyword">null</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Todos pueden leer la BD.</li> <li>Solo los que están autenticadas pueden escribir en la BD</li></ul></div> <h3 id="update-delete-create"><a href="#update-delete-create" class="header-anchor">#</a> update , delete , create</h3> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span>urls<span class="token operator">/</span><span class="token punctuation">{</span>document<span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
    allow read<span class="token operator">:</span> <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    allow  create<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    allow <span class="token keyword">delete</span><span class="token punctuation">,</span>update<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>uid <span class="token operator">==</span> resource<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>request.auth = Tiene la información del usuario autenticado y por lo tanto tiene acceso a la propiedad uid que corresponde a la ID del usuario.</li> <li>resource.data = Corresponde a la información del documento . En esta regla se accede al campo uid del documento.</li> <li>Permiso para leer: Todos</li> <li>Permiso para crear : Solo si es autenticado</li> <li>Permiso para eliminar , actualizar: Solo si el uid del documento coincide con el del usuario autenticado.</li></ul></div> <h3 id="permiso-get-y-list"><a href="#permiso-get-y-list" class="header-anchor">#</a> Permiso get y list</h3> <ul><li>get : Permiso para solo un documento</li> <li>list : Permiso para un conjunto de documentos</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span>urls<span class="token operator">/</span><span class="token punctuation">{</span>document<span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
    allow get<span class="token operator">:</span> <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    allow  create<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    allow <span class="token keyword">delete</span><span class="token punctuation">,</span>update <span class="token punctuation">,</span> list<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>uid <span class="token operator">==</span> resource<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Permiso para leer SOLO un documento = Todos</li> <li>Permiso para leer  un  CONJUNTO de documentos (Ej. Seleccionar todos los documentos) : Solo si el uid del documento coincide con el del usuario autenticado.</li></ul></div> <h2 id="deploy"><a href="#deploy" class="header-anchor">#</a> Deploy</h2> <ul><li>Vamos a usar el hosting de firebase</li></ul> <p>El comando nos genera una carpeta llamada dist</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run build
</code></pre></div><p>El comando ejecuta lo que contiene carpeta llamada dist, abriendo la aplicación que se pondría en producción.</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run preview
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Si funciona todo, subimos la carpeta dist al hosting.</p></div> <h3 id="en-firebase-3"><a href="#en-firebase-3" class="header-anchor">#</a> En firebase</h3> <ul><li>Hosting – get started(comenzar)</li></ul> <p>Ejecutamos el comando</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install <span class="token operator">-</span>g firebase<span class="token operator">-</span>tools
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">warning</p> <p>se instala de manera global , no hace falta ubicarse en el proyecto</p></div> <p>Iniciamos Sesion con el comando:</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>firebase login
</code></pre></div><p>Ejecutamos el siguiente comando en el proyecto:</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>firebase init
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Te genera la configuracion del proyecto</li></ul></div> <h4 id="opciones"><a href="#opciones" class="header-anchor">#</a> opciones</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Enter para continuar</li> <li>Espacio para selecionar</li> <li>Le das a  continuar(Enter) para que tome el valor por defecto (entre paréntesis)</li></ul></div> <ol><li>Le das a Si(yes) en comenzar/procesar proyecto</li> <li>Seleccionas los servicios que utilizaste (con el espacio)</li></ol> <ul><li>En este ejemplo Firestore ( y te trae todas las reglas de seguridad) y Hosting (Configure files for FireBase Hosting and optionally …)</li></ul> <ol start="3"><li>Use an existing Project  --- Enter</li> <li>Selecciona el Proyecto de FireBase que vas a hacer deploy – Enter</li> <li>Luego te va a pedir el nombre del archivo que se va a crear con las reglas de seguridad  (por defecto firestore.rules) --  Enter</li> <li>What file should be used for Firestore indexes ? – Enter</li> <li>What do you want to use as your public directory? -- dist</li></ol> <ul><li>Por defecto es public, pero como vamos a subir la carpeta que genera npm run build , ponemos dist (contiene todos los archivos estáticos)</li></ul> <ol start="8"><li>Configure as a single-page-app (rewrite all urls to /index.html)? -- Y</li></ol> <ul><li>Es para reescribir todas las url en el index.html</li> <li>Como es una Single-page Application (todo se renderiza en el index.html , un solo archivo ), le das a si (y)</li></ul> <ol start="9"><li>Set up automatic builds and deploys with Github?  ---- Le das a no (n)</li> <li>File dist/index.html already exists . Overwrite?  ----------- Le das a no (n)</li></ol> <h3 id="¡terminamos-la-configuracion"><a href="#¡terminamos-la-configuracion" class="header-anchor">#</a> ¡Terminamos la configuración!</h3> <p>Si hiciste todo bien en el proyecto se crearon los archivos : firestore.rules , firestore.indexes.json , firebase.json , etc.</p> <p>Y finalmente hacemos el deploy ejecutando el comando en el proyecto</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>firebase deploy
</code></pre></div><p>Y ya tenes un dominio</p> <h3 id="archivo"><a href="#archivo" class="header-anchor">#</a> Archivo</h3> <p>firestore.rules:</p> <ul><li>Estan las reglas de seguridad que modificamos</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span>urls<span class="token operator">/</span><span class="token punctuation">{</span>document<span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
    allow get<span class="token operator">:</span> <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    allow  create<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    allow <span class="token keyword">delete</span><span class="token punctuation">,</span>update <span class="token punctuation">,</span> list<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>uid <span class="token operator">==</span> resource<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>firebase.json</p> <ul><li>Esta la configuración de la carpeta public</li> <li>Esta la sobreescritura de url</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token punctuation">{</span>
  <span class="token string">&quot;firestore&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token string">&quot;firestore.rules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;indexes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;firestore.indexes.json&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;hosting&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;public&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;firebase.json&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;**/.*&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;**/node_modules/**&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;rewrites&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;**&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/index.html&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="en-cada-cambio"><a href="#en-cada-cambio" class="header-anchor">#</a> En cada cambio:</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run build
firebase deploy
</code></pre></div><ul><li>No hace falta hacer el init porque ya esta toda la configuración de firebase.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/aprendizaje/React/redux.html" class="prev">
        Redux
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/aprendizaje/assets/js/app.f1543609.js" defer></script><script src="/aprendizaje/assets/js/2.c431ec36.js" defer></script><script src="/aprendizaje/assets/js/56.0843ee84.js" defer></script>
  </body>
</html>
