<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redux | Guias</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Descripcion">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/aprendizaje/assets/css/0.styles.5e6ce45c.css" as="style"><link rel="preload" href="/aprendizaje/assets/js/app.995f5a2e.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/2.c431ec36.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/57.49d8ebf0.js" as="script"><link rel="prefetch" href="/aprendizaje/assets/js/10.ebb9a2d4.js"><link rel="prefetch" href="/aprendizaje/assets/js/11.2f8e45c5.js"><link rel="prefetch" href="/aprendizaje/assets/js/12.9873a2f3.js"><link rel="prefetch" href="/aprendizaje/assets/js/13.1cc2ebda.js"><link rel="prefetch" href="/aprendizaje/assets/js/14.ac7318bb.js"><link rel="prefetch" href="/aprendizaje/assets/js/15.65795f28.js"><link rel="prefetch" href="/aprendizaje/assets/js/16.e127c599.js"><link rel="prefetch" href="/aprendizaje/assets/js/17.38e9d24d.js"><link rel="prefetch" href="/aprendizaje/assets/js/18.fe1f2117.js"><link rel="prefetch" href="/aprendizaje/assets/js/19.78aa11ec.js"><link rel="prefetch" href="/aprendizaje/assets/js/20.a278704f.js"><link rel="prefetch" href="/aprendizaje/assets/js/21.7018fded.js"><link rel="prefetch" href="/aprendizaje/assets/js/22.903b3da0.js"><link rel="prefetch" href="/aprendizaje/assets/js/23.702acea2.js"><link rel="prefetch" href="/aprendizaje/assets/js/24.5264c57a.js"><link rel="prefetch" href="/aprendizaje/assets/js/25.26964830.js"><link rel="prefetch" href="/aprendizaje/assets/js/26.1a1a38e4.js"><link rel="prefetch" href="/aprendizaje/assets/js/27.d8bab02d.js"><link rel="prefetch" href="/aprendizaje/assets/js/28.9b0ea1f4.js"><link rel="prefetch" href="/aprendizaje/assets/js/29.a7fafec7.js"><link rel="prefetch" href="/aprendizaje/assets/js/3.735a6bdd.js"><link rel="prefetch" href="/aprendizaje/assets/js/30.b2fca6e8.js"><link rel="prefetch" href="/aprendizaje/assets/js/31.0de90fbf.js"><link rel="prefetch" href="/aprendizaje/assets/js/32.7be88abe.js"><link rel="prefetch" href="/aprendizaje/assets/js/33.9add958a.js"><link rel="prefetch" href="/aprendizaje/assets/js/34.84cda2e0.js"><link rel="prefetch" href="/aprendizaje/assets/js/35.c6553481.js"><link rel="prefetch" href="/aprendizaje/assets/js/36.6683ceca.js"><link rel="prefetch" href="/aprendizaje/assets/js/37.92230209.js"><link rel="prefetch" href="/aprendizaje/assets/js/38.d5c9d1ca.js"><link rel="prefetch" href="/aprendizaje/assets/js/39.6953788c.js"><link rel="prefetch" href="/aprendizaje/assets/js/4.7b66cd35.js"><link rel="prefetch" href="/aprendizaje/assets/js/40.13e06b26.js"><link rel="prefetch" href="/aprendizaje/assets/js/41.0717abbc.js"><link rel="prefetch" href="/aprendizaje/assets/js/42.91c3fc37.js"><link rel="prefetch" href="/aprendizaje/assets/js/43.13dcaab4.js"><link rel="prefetch" href="/aprendizaje/assets/js/44.8510d30b.js"><link rel="prefetch" href="/aprendizaje/assets/js/45.fe3c843d.js"><link rel="prefetch" href="/aprendizaje/assets/js/46.fc238d92.js"><link rel="prefetch" href="/aprendizaje/assets/js/47.1868bb9b.js"><link rel="prefetch" href="/aprendizaje/assets/js/48.9c9b68b0.js"><link rel="prefetch" href="/aprendizaje/assets/js/49.1487e3fd.js"><link rel="prefetch" href="/aprendizaje/assets/js/5.a396fb32.js"><link rel="prefetch" href="/aprendizaje/assets/js/50.7d9912b5.js"><link rel="prefetch" href="/aprendizaje/assets/js/51.743ca850.js"><link rel="prefetch" href="/aprendizaje/assets/js/52.5092ad73.js"><link rel="prefetch" href="/aprendizaje/assets/js/53.19e883ce.js"><link rel="prefetch" href="/aprendizaje/assets/js/54.6b8ebc03.js"><link rel="prefetch" href="/aprendizaje/assets/js/55.fce9b1af.js"><link rel="prefetch" href="/aprendizaje/assets/js/56.0338c760.js"><link rel="prefetch" href="/aprendizaje/assets/js/58.bd068987.js"><link rel="prefetch" href="/aprendizaje/assets/js/59.bdfef050.js"><link rel="prefetch" href="/aprendizaje/assets/js/6.27888615.js"><link rel="prefetch" href="/aprendizaje/assets/js/60.96fce938.js"><link rel="prefetch" href="/aprendizaje/assets/js/61.94e11dfb.js"><link rel="prefetch" href="/aprendizaje/assets/js/7.06129e92.js"><link rel="prefetch" href="/aprendizaje/assets/js/8.b6deb1ab.js"><link rel="prefetch" href="/aprendizaje/assets/js/9.7e901376.js">
    <link rel="stylesheet" href="/aprendizaje/assets/css/0.styles.5e6ce45c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/aprendizaje/" class="home-link router-link-active"><!----> <span class="site-name">Guias</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/aprendizaje/React/" aria-current="page" class="sidebar-link">React</a></li><li><a href="/aprendizaje/React/introduccion.html" class="sidebar-link">Introduccion</a></li><li><a href="/aprendizaje/React/formulario.html" class="sidebar-link">Formulario</a></li><li><a href="/aprendizaje/React/todoApp.html" class="sidebar-link">App todo</a></li><li><a href="/aprendizaje/React/api.html" class="sidebar-link">Consumir API</a></li><li><a href="/aprendizaje/React/affect.html" class="sidebar-link">React Router v6</a></li><li><a href="/aprendizaje/React/context.html" class="sidebar-link">Context API</a></li><li><a href="/aprendizaje/React/reducer.html" class="sidebar-link">Reducer</a></li><li><a href="/aprendizaje/React/redux.html" aria-current="page" class="active sidebar-link">Redux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#conceptos" class="sidebar-link">Conceptos</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#sin-react" class="sidebar-link">Sin react</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#store-2" class="sidebar-link">Store</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#suscribirse" class="sidebar-link">Suscribirse</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#migrando-a-react" class="sidebar-link">Migrando a React</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#extension" class="sidebar-link">Extension</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#empezar-con-react-redux" class="sidebar-link">Empezar con  React-redux</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#app-jsx" class="sidebar-link">App.jsx</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#contador" class="sidebar-link">Contador</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#useselector" class="sidebar-link">useSelector</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/React/redux.html#hook-usedispatch" class="sidebar-link">hook useDispatch</a></li></ul></li><li><a href="/aprendizaje/React/proyecto.html" class="sidebar-link">Proyecto</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redux"><a href="#redux" class="header-anchor">#</a> Redux</h1> <ul><li>Es un conjunto de patrones de como debes tratar el estado de tu app.</li></ul> <h2 id="conceptos"><a href="#conceptos" class="header-anchor">#</a> Conceptos</h2> <h3 id="action"><a href="#action" class="header-anchor">#</a> Action</h3> <ul><li>Una acción es un objeto simple de JavaScript  con 2 propiedades</li> <li>Puede pensar en una acción como un evento que describe algo que sucedió en la aplicación .</li> <li>Las acciones(actions) , son los eventos que ocurren en la aplicación según la entrada del usuario y desencadenan actualizaciones en el estado</li></ul> <h4 id="type"><a href="#type" class="header-anchor">#</a> type</h4> <ul><li>Es una propiedad del objeto</li> <li>Debe ser una cadena que le dé a esta acción un nombre descriptivo, como &quot;todos/todoAdded&quot;. Por lo general, escribimos ese tipo de cadena como &quot;domain/eventName&quot;, donde la primera parte es la función o categoría a la que pertenece esta acción, y la segunda parte especifica que sucedió.</li></ul> <h4 id="payload"><a href="#payload" class="header-anchor">#</a> payload</h4> <ul><li>Es una propiedad del objeto</li> <li>Un objeto de acción puede tener otros campos con información adicional sobre lo que sucedió. Por convención, ponemos esa información en un campo llamado payload.</li></ul> <p>Un objeto de action típico podría verse así:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> addTodoAction <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'todos/todoAdded'</span><span class="token punctuation">,</span>
  payload<span class="token operator">:</span> <span class="token string">'Buy milk'</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="dispatcher"><a href="#dispatcher" class="header-anchor">#</a> Dispatcher</h3> <ul><li>Ejecuta una acción que actualizara el State</li> <li>Sirve para enviar acciones</li> <li>La tienda(store) Redux tiene un método llamado dispatch. La única forma de actualizar el estado es llamar a store.dispatch() y pasarle un objeto de acción . La tienda ejecutará su función de reducción y guardará el nuevo valor de estado dentro, y podemos llamar getState()para recuperar el valor actualizado:</li> <li>Puede pensar en enviar acciones como &quot;desencadenar un evento&quot; en la aplicación. Algo sucedió y queremos que la tienda lo sepa. Los reductores actúan como oyentes de eventos, y cuando escuchan una acción que les interesa, actualizan el estado en respuesta.</li></ul> <h3 id="store"><a href="#store" class="header-anchor">#</a> Store</h3> <ul><li>Contiene el state(estado) de la aplicacion que a su vez puede tener varios estados</li> <li>Solo puede existir UN store por aplicación.</li> <li>El estado actual de la aplicación Redux vive en un objeto llamado store</li> <li>La tienda se crea pasando un reductor y tiene un método llamado getStateque devuelve el valor del estado actual</li></ul> <h3 id="subscriber"><a href="#subscriber" class="header-anchor">#</a> Subscriber</h3> <ul><li>Es un manejador de eventos para el State</li></ul> <h3 id="reducers"><a href="#reducers" class="header-anchor">#</a> Reducers</h3> <ul><li>Son funciones que gestionan los actions</li> <li>Un reductor es una función que recibe un state(estado) y un objeto action , decide cómo actualizar el estado si es necesario y devuelve el nuevo estado: (state, action) =&gt; newState</li> <li>Puede pensar en un reductor como un detector de eventos que maneja los eventos en función del tipo de acción (evento) recibido.</li> <li>Los reductores siempre deben seguir unas reglas específicas:
<ul><li>Solo deben calcular el nuevo valor de estado en función de los argumentos State y action</li> <li>No se les permite modificar el existente state. En su lugar, deben realizar actualizaciones inmutables , copiando los valores existentes  en State y realizando cambios en los valores copiados.</li> <li>No deben hacer ninguna lógica asíncrona, calcular valores aleatorios o causar otros &quot;efectos secundarios&quot;.</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Mutable&quot; significa &quot;cambiable&quot;. Si algo es &quot;inmutable&quot;, nunca se puede cambiar.</p></div> <ul><li>La lógica dentro de las funciones del reductor normalmente sigue la misma serie de pasos:</li></ul> <ol><li>Verifique si al reductor le importa esta acción
<ul><li>Si es así, haga una copia del estado, actualice la copia con nuevos valores y devuélvala</li></ul></li> <li>De lo contrario, devuelve el estado existente sin cambios.</li></ol> <h3 id="vista"><a href="#vista" class="header-anchor">#</a> vista</h3> <ul><li>La interfaz de usuario basada en el estado actual</li></ul> <h3 id="estado"><a href="#estado" class="header-anchor">#</a> Estado</h3> <ul><li>El estado , la fuente de verdad que impulsa nuestra aplicación;</li></ul> <h3 id="selectores"><a href="#selectores" class="header-anchor">#</a> Selectores</h3> <ul><li>Los selectores son funciones que saben cómo extraer información específica de un valor de estado de almacenamiento. A medida que una aplicación crece, esto puede ayudar a evitar repetir la lógica, ya que diferentes partes de la aplicación necesitan leer los mismos datos</li></ul> <h3 id="flujo-de-datos-unidireccional"><a href="#flujo-de-datos-unidireccional" class="header-anchor">#</a> flujo de datos unidireccional</h3> <ul><li>El estado describe la condición de la aplicación en un momento específico</li> <li>La interfaz de usuario se representa en función de ese estado</li> <li>Cuando sucede algo (como que un usuario haga clic en un botón), el estado se actualiza en función de lo que ocurrió</li> <li>La interfaz de usuario se vuelve a renderizar en función del nuevo estado</li> <li>Sin embargo, la simplicidad puede colapsar cuando tenemos múltiples componentes que necesitan compartir y usar el mismo estado , especialmente si esos componentes están ubicados en diferentes partes de la aplicación. A veces, esto se puede resolver &quot;elevando el estado&quot; a los componentes principales, pero eso no siempre ayuda.</li> <li>Una forma de resolver esto es extraer el estado compartido de los componentes y colocarlo en una ubicación centralizada fuera del árbol de componentes. Con esto, nuestro árbol de componentes se convierte en una gran &quot;vista&quot;, y cualquier componente puede acceder al estado o desencadenar acciones, sin importar dónde se encuentren en el árbol.</li> <li>Al definir y separar los conceptos involucrados en la administración del estado y hacer cumplir las reglas que mantienen la independencia entre las vistas y los estados, le damos a nuestro código más estructura y mantenibilidad.</li> <li>Esta es la idea básica detrás de Redux: un único lugar centralizado para contener el estado global en su aplicación y patrones específicos a seguir al actualizar ese estado para que el código sea predecible.</li></ul> <h2 id="sin-react"><a href="#sin-react" class="header-anchor">#</a> Sin react</h2> <ul><li>Creamos ul contador con  reducer y actions</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token comment">/*El reducer es una función pura que toma el estado anterior y una acción, y devuelve en nuevo estado. */</span>
   <span class="token keyword">const</span> <span class="token function-variable function">contadorReduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'@counter/incremented'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'@counter/decremented'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'@counter/reset'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> actionIncremented <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'@counter/incremented'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> actionDecremented <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'@counter/decremented'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> actionReset <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'@counter/reset'</span>
<span class="token punctuation">}</span>
    <span class="token comment">// El contador arrranca en 1 y le  suma uno</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">contadorReduce</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token punctuation">,</span> actionIncremented<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// El contador arrranca en 1 y le  resta uno</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">contadorReduce</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> actionDecremented<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// el contador arranca en 5 , pero se resetea y vuelve a 0</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">contadorReduce</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> actionReset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>Aunque se suele utilizer con switch</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">/*El reducer es una función pura que toma el estado anterior y una acción, y devuelve en nuevo estado. */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">contadorReduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">case</span> <span class="token string">'@counter/incremented'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                 <span class="token keyword">case</span> <span class="token string">'@counter/decremented'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                 <span class="token keyword">case</span> <span class="token string">'@counter/reset'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token number">0</span>
 
         <span class="token punctuation">}</span>
 
 
     <span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> actionIncremented <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/incremented'</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">const</span> actionDecremented <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/decremented'</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">const</span> actionReset <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/reset'</span>
     <span class="token punctuation">}</span>
         <span class="token comment">// El contador arrranca en 1 y le  suma uno</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">contadorReduce</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token punctuation">,</span> actionIncremented<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// El contador arrranca en 1 y le  resta uno</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">contadorReduce</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> actionDecremented<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// el contador arranca en 5 , pero se resetea y vuelve a 0</span>
                 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">contadorReduce</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> actionReset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="store-2"><a href="#store-2" class="header-anchor">#</a> Store</h2> <ul><li>Es un objeto que contiene(almacena) los actions y Reducers como si fueran uno solo.</li> <li>Es un objeto que contiene los estados y las diferentes acciones que se puede realizar en el.</li> <li>El store se encarga de llamar a las acciones</li> <li>Permiten:
<ul><li>Actualizar el estado de la app</li> <li>Leer el estado de la app</li> <li>Contener(Almacenar) el estado de la app.</li></ul></li></ul> <p>Lo instalamos</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install redux
</code></pre></div><p>package.json</p> <ul><li>Nos aseguramos que estamos trabajando con type:module</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prueba-2&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;redux&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.2&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
    <span class="token comment">/*El reducer es una función pura que toma el estado anterior y una acción, y devuelve en nuevo estado. */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">contadorReduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">case</span> <span class="token string">'@counter/incremented'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                 <span class="token keyword">case</span> <span class="token string">'@counter/decremented'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                 <span class="token keyword">case</span> <span class="token string">'@counter/reset'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token number">0</span>
 
         <span class="token punctuation">}</span>
 
 
     <span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> actionIncremented <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/incremented'</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">const</span> actionDecremented <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/decremented'</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">const</span> actionReset <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/reset'</span>
     <span class="token punctuation">}</span>

   <span class="token comment">// Creamos un store</span>
   <span class="token comment">// createStore(reducer)</span>
   <span class="token comment">// la Store sabe como debe actualizar el Estado ahora</span>
   <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>contadorReduce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
 
    <span class="token comment">// Le enviamos un evento a la store</span>
     store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>actionIncremented<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Devuelve  Nam ya que nunca le especificamos el valor del estado , nunca lo inicializamos.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
    <span class="token comment">/*El reducer es una función pura que toma el estado anterior y una acción, y devuelve en nuevo estado. */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">contadorReduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">case</span> <span class="token string">'@counter/incremented'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                 <span class="token keyword">case</span> <span class="token string">'@counter/decremented'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                 <span class="token keyword">case</span> <span class="token string">'@counter/reset'</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token number">0</span>
 
         <span class="token punctuation">}</span>
 
 
     <span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> actionIncremented <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/incremented'</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">const</span> actionDecremented <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/decremented'</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">const</span> actionReset <span class="token operator">=</span> <span class="token punctuation">{</span>
         type<span class="token operator">:</span> <span class="token string">'@counter/reset'</span>
     <span class="token punctuation">}</span>

   <span class="token comment">// Creamos un store</span>
   <span class="token comment">// createStore(reducer)</span>
   <span class="token comment">// la Store sabe como debe actualizar el Estado ahora</span>
   <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>contadorReduce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
 
    <span class="token comment">// Le enviamos un evento a la store</span>
    <span class="token comment">// Suma 1</span>
     store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>actionIncremented<span class="token punctuation">)</span>
     <span class="token comment">// Devuelve 1</span>
     <span class="token comment">// Recuperamos el estado</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// Le enviamos un evento a la store</span>
     <span class="token comment">// Suma 1</span>
     store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>actionIncremented<span class="token punctuation">)</span>
     <span class="token comment">// Devuelve 2</span>
    <span class="token comment">// Recuperamos el estado</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="suscribirse"><a href="#suscribirse" class="header-anchor">#</a> Suscribirse</h2> <ul><li>Cada vez que detecta un cambio , ejecutara una funcion.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token comment">/*El reducer es una función pura que toma el estado anterior y una acción, y devuelve en nuevo estado. */</span>
<span class="token keyword">const</span> <span class="token function-variable function">contadorReduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">case</span> <span class="token string">'@counter/incremented'</span><span class="token operator">:</span>
             <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> 
             <span class="token keyword">case</span> <span class="token string">'@counter/decremented'</span><span class="token operator">:</span>
             <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> 
             <span class="token keyword">case</span> <span class="token string">'@counter/reset'</span><span class="token operator">:</span>
             <span class="token keyword">return</span> <span class="token number">0</span>

     <span class="token punctuation">}</span>

 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> actionIncremented <span class="token operator">=</span> <span class="token punctuation">{</span>
     type<span class="token operator">:</span> <span class="token string">'@counter/incremented'</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">const</span> actionDecremented <span class="token operator">=</span> <span class="token punctuation">{</span>
     type<span class="token operator">:</span> <span class="token string">'@counter/decremented'</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">const</span> actionReset <span class="token operator">=</span> <span class="token punctuation">{</span>
     type<span class="token operator">:</span> <span class="token string">'@counter/reset'</span>
 <span class="token punctuation">}</span>

<span class="token comment">// Creamos un store</span>
<span class="token comment">// createStore(reducer)</span>
<span class="token comment">// la Store sabe como debe actualizar el Estado ahora</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>contadorReduce<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//subscribe(callback)</span>
<span class="token comment">//Por cada cambio del estado , ejecuta el callback</span>
store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Recuperamos el estado</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Le enviamos un evento a la store</span>
<span class="token comment">// Suma 1</span>
 store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>actionIncremented<span class="token punctuation">)</span>
 <span class="token comment">// Le enviamos un evento a la store</span>
 <span class="token comment">// Suma 1</span>
 store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>actionIncremented<span class="token punctuation">)</span>

</code></pre></div><h2 id="migrando-a-react"><a href="#migrando-a-react" class="header-anchor">#</a> Migrando a React</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Acordate del type:modules en el package.json</p></div> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install redux
</code></pre></div><p>app.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> actionIncremented <span class="token operator">=</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'@counter/incremented'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> actionDecremented <span class="token operator">=</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'@counter/decremented'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> actionReset <span class="token operator">=</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'@counter/reset'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*El reducer es una función pura que toma el estado anterior y una acción, y devuelve en nuevo estado. */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">contadorReduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'@counter/incremented'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'@counter/decremented'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'@counter/reset'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token number">0</span>
            <span class="token keyword">default</span><span class="token operator">:</span> 
               <span class="token keyword">return</span> state<span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Creamos un store</span>
    <span class="token comment">// createStore(reducer)</span>
    <span class="token comment">// la Store sabe como debe actualizar el Estado ahora</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>contadorReduce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//subscribe(callback)</span>
    <span class="token comment">//Por cada cambio del estado , ejecuta el callback</span>

    store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Recuperamos el estado</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

  

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Si desea que se renderize el DOM lo pones en el index.js y en la suscripción renderizas todo por cada cambio del Estado.</li></ul></div> <h2 id="extension"><a href="#extension" class="header-anchor">#</a> Extension</h2> <ul><li><a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=es" target="_blank" rel="noopener noreferrer">Redux Devtools<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Te permite depurar el codigo y viajar en el tiempo</li></ul> <h3 id="configuracion"><a href="#configuracion" class="header-anchor">#</a> Configuracion</h3> <ul><li>Al crear el store, hay que poner el siguiente valor como segundo parametro</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Creamos un store</span>
    <span class="token comment">// createStore(reducer)</span>
    <span class="token comment">// la Store sabe como debe actualizar el Estado ahora</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>contadorReduce <span class="token punctuation">,</span>
        window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION__ <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION__</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="empezar-con-react-redux"><a href="#empezar-con-react-redux" class="header-anchor">#</a> Empezar con  React-redux</h2> <ul><li><a href="https://react-redux.js.org/" target="_blank" rel="noopener noreferrer">Lo instalas a traves de npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Se utiliza cuando el proyecto es mediano o grande.</li></ul> <h3 id="carpetas-a-crear-en-src"><a href="#carpetas-a-crear-en-src" class="header-anchor">#</a> Carpetas a crear en src</h3> <h4 id="carpeta-actions"><a href="#carpeta-actions" class="header-anchor">#</a> carpeta actions</h4> <h4 id="carpeta-types"><a href="#carpeta-types" class="header-anchor">#</a> carpeta types</h4> <ul><li>index.js va a contener todos los tipos de accion</li></ul> <h4 id="carpeta-reducers"><a href="#carpeta-reducers" class="header-anchor">#</a> carpeta reducers</h4> <ul><li>index.js va a contener todos los reducers</li></ul> <p>reducers/index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>combineReducers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token comment">// junta todos los reducers en uno</span>
<span class="token comment">// recibe un objeto donde cada propiedad es un reducer</span>
<span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>

</code></pre></div><h4 id="carpeta-store"><a href="#carpeta-store" class="header-anchor">#</a> carpeta store</h4> <ul><li>index.js</li> <li>Todos los reducers se almacenan  como uno solo que contiene a todos en la store</li></ul> <p>store/index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'../reducers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>

store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>

</code></pre></div><h2 id="app-jsx"><a href="#app-jsx" class="header-anchor">#</a> App.jsx</h2> <ul><li>Renderizamos el componente Provider de react redux alrededor de toda nuestra app , para compartir el estado.</li> <li>El componente tiene un props cuyo valor es el Store (estado único), para compartirlo con toda la app.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Si el archivo se llama index.js no hace falta especificar el archivo , lo toma solo si seleccionas la carpeta</p></div> <p>components/Contador.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Contador</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Contador<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Contador

</code></pre></div><p>App.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
       <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>Contador<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="contador"><a href="#contador" class="header-anchor">#</a> Contador</h2> <p>type/index.js</p> <ul><li>Va todos los types (tipo de accion)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">&quot;INCREMENT&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT</span> <span class="token operator">=</span> <span class="token string">&quot;DECREMENT&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT_5</span> <span class="token operator">=</span> <span class="token string">&quot;DECREMENT_5&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>actions/ contadorAction.js</p> <ul><li>Son funciones que devuelven un objeto action</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">DECREMENT</span><span class="token punctuation">,</span> <span class="token constant">DECREMENT_5</span><span class="token punctuation">,</span> <span class="token constant">INCREMENT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../types&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sumar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token constant">INCREMENT</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">restar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token constant">DECREMENT</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">restar_5</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token constant">DECREMENT_5</span> <span class="token punctuation">,</span> payload<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>reducers/contadorReducer.js</p> <ul><li>Es la funcion reducer junto con el valor inicial</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">DECREMENT</span><span class="token punctuation">,</span> <span class="token constant">DECREMENT_5</span><span class="token punctuation">,</span> <span class="token constant">INCREMENT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../types&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">contadorReducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState <span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">INCREMENT</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">DECREMENT</span><span class="token operator">:</span> 
            <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">;</span>
        <span class="token keyword">case</span>  <span class="token constant">DECREMENT_5</span><span class="token operator">:</span>
           <span class="token keyword">return</span> state <span class="token operator">-</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>reducers/index.js</p> <ul><li>Aca juntamos todos los reducers, ya que redux  acepta solo UN ESTADO.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>combineReducers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> contadorReducer <span class="token keyword">from</span> <span class="token string">'./contadorReducer'</span><span class="token punctuation">;</span>
<span class="token comment">// junta todos los reducers en uno</span>
<span class="token comment">// recibe un objeto donde cada propiedad es un reducer</span>
<span class="token comment">// el valor de cada propiedad es un reducer</span>
<span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> contador<span class="token operator">:</span> contadorReducer<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>El reducer que creamos al juntar todo , lo lee Store</p></div> <h2 id="useselector"><a href="#useselector" class="header-anchor">#</a> useSelector</h2> <ul><li>Es un hook de react-redux</li> <li>Es como el useState pero para redux</li> <li>useSelector es un Hook que nos permite extraer datos del store de Redux utilizando una función selectora, ésta debe ser pura ya que es potencialmente invocada múltiples veces</li> <li>Contiene un callback que recibe el estado que se almacena en la store y devuelve el estado entero o parte de ese.</li></ul> <p>Contador.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">Contador</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// state es un objeto  , con todas las propiedades  de reducers/index.js</span>
    <span class="token comment">//el parametro state del callback es el estado(store)</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Contador<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* state.contador tiene el reducer del contador (fijarte en el index.js) */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>contador<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Contador

</code></pre></div><h2 id="hook-usedispatch"><a href="#hook-usedispatch" class="header-anchor">#</a> hook useDispatch</h2> <ul><li>Es un hook de react-redux</li> <li>Sirve para enviar acciones  a la Store</li> <li>Cuando se envia una accion a la Store , el Estado se modifica</li></ul> <p>Contador.jsx</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch<span class="token punctuation">,</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> restar<span class="token punctuation">,</span> restar_5<span class="token punctuation">,</span> sumar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actions/contadorAction'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Contador</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">// state es un objeto  , con todas las propiedades  de reducers/index.js</span>
   <span class="token comment">//useSelector(funcion);</span>
   <span class="token comment">//el parametro state del callback es el estado(store)</span>
   <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">)</span>
  <span class="token comment">// useDispatch()</span>
   <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> 
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Contador<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">sumar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">restar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">restar_5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
       <span class="token punctuation">{</span><span class="token comment">/* state.contador tiene el reducer del contador (fijarte en el index.js) */</span><span class="token punctuation">}</span>
       <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>contador<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Contador

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/aprendizaje/React/reducer.html" class="prev">
        Reducer
      </a></span> <span class="next"><a href="/aprendizaje/React/proyecto.html">
        Proyecto
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/aprendizaje/assets/js/app.995f5a2e.js" defer></script><script src="/aprendizaje/assets/js/2.c431ec36.js" defer></script><script src="/aprendizaje/assets/js/57.49d8ebf0.js" defer></script>
  </body>
</html>
