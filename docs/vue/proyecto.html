<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Proyecto #1 | Guias</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Descripcion">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/aprendizaje/assets/css/0.styles.5e6ce45c.css" as="style"><link rel="preload" href="/aprendizaje/assets/js/app.8f0d4037.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/2.c431ec36.js" as="script"><link rel="preload" href="/aprendizaje/assets/js/62.6b368ae7.js" as="script"><link rel="prefetch" href="/aprendizaje/assets/js/10.ebb9a2d4.js"><link rel="prefetch" href="/aprendizaje/assets/js/11.7f6678e6.js"><link rel="prefetch" href="/aprendizaje/assets/js/12.94178c81.js"><link rel="prefetch" href="/aprendizaje/assets/js/13.95d0f2b6.js"><link rel="prefetch" href="/aprendizaje/assets/js/14.6e683a1f.js"><link rel="prefetch" href="/aprendizaje/assets/js/15.0dc76b53.js"><link rel="prefetch" href="/aprendizaje/assets/js/16.ce8572b0.js"><link rel="prefetch" href="/aprendizaje/assets/js/17.87dadc99.js"><link rel="prefetch" href="/aprendizaje/assets/js/18.917bc518.js"><link rel="prefetch" href="/aprendizaje/assets/js/19.a7f4a9f4.js"><link rel="prefetch" href="/aprendizaje/assets/js/20.980fa4da.js"><link rel="prefetch" href="/aprendizaje/assets/js/21.7018fded.js"><link rel="prefetch" href="/aprendizaje/assets/js/22.903b3da0.js"><link rel="prefetch" href="/aprendizaje/assets/js/23.36d87931.js"><link rel="prefetch" href="/aprendizaje/assets/js/24.e1eea224.js"><link rel="prefetch" href="/aprendizaje/assets/js/25.26964830.js"><link rel="prefetch" href="/aprendizaje/assets/js/26.466ededc.js"><link rel="prefetch" href="/aprendizaje/assets/js/27.d8bab02d.js"><link rel="prefetch" href="/aprendizaje/assets/js/28.0a63abdd.js"><link rel="prefetch" href="/aprendizaje/assets/js/29.a3bb7838.js"><link rel="prefetch" href="/aprendizaje/assets/js/3.4615dbf3.js"><link rel="prefetch" href="/aprendizaje/assets/js/30.37abd6b5.js"><link rel="prefetch" href="/aprendizaje/assets/js/31.58728950.js"><link rel="prefetch" href="/aprendizaje/assets/js/32.7c8797ab.js"><link rel="prefetch" href="/aprendizaje/assets/js/33.2d01fb1e.js"><link rel="prefetch" href="/aprendizaje/assets/js/34.84cda2e0.js"><link rel="prefetch" href="/aprendizaje/assets/js/35.183d4b13.js"><link rel="prefetch" href="/aprendizaje/assets/js/36.b2c46711.js"><link rel="prefetch" href="/aprendizaje/assets/js/37.1e88eb19.js"><link rel="prefetch" href="/aprendizaje/assets/js/38.76485511.js"><link rel="prefetch" href="/aprendizaje/assets/js/39.2b76f93e.js"><link rel="prefetch" href="/aprendizaje/assets/js/4.7b66cd35.js"><link rel="prefetch" href="/aprendizaje/assets/js/40.65a94932.js"><link rel="prefetch" href="/aprendizaje/assets/js/41.8efcea3c.js"><link rel="prefetch" href="/aprendizaje/assets/js/42.c441fa36.js"><link rel="prefetch" href="/aprendizaje/assets/js/43.eb3d1ca5.js"><link rel="prefetch" href="/aprendizaje/assets/js/44.60ce2278.js"><link rel="prefetch" href="/aprendizaje/assets/js/45.5fa5df35.js"><link rel="prefetch" href="/aprendizaje/assets/js/46.d7560d20.js"><link rel="prefetch" href="/aprendizaje/assets/js/47.801d7715.js"><link rel="prefetch" href="/aprendizaje/assets/js/48.fb9df337.js"><link rel="prefetch" href="/aprendizaje/assets/js/49.4639b308.js"><link rel="prefetch" href="/aprendizaje/assets/js/5.a396fb32.js"><link rel="prefetch" href="/aprendizaje/assets/js/50.425afa5e.js"><link rel="prefetch" href="/aprendizaje/assets/js/51.17d417db.js"><link rel="prefetch" href="/aprendizaje/assets/js/52.6031d4b6.js"><link rel="prefetch" href="/aprendizaje/assets/js/53.20ccf08a.js"><link rel="prefetch" href="/aprendizaje/assets/js/54.5863fe63.js"><link rel="prefetch" href="/aprendizaje/assets/js/55.b36c4fde.js"><link rel="prefetch" href="/aprendizaje/assets/js/56.e2b66e98.js"><link rel="prefetch" href="/aprendizaje/assets/js/57.d0be692a.js"><link rel="prefetch" href="/aprendizaje/assets/js/58.a0f5720f.js"><link rel="prefetch" href="/aprendizaje/assets/js/59.831ebde0.js"><link rel="prefetch" href="/aprendizaje/assets/js/6.27888615.js"><link rel="prefetch" href="/aprendizaje/assets/js/60.8c9608ce.js"><link rel="prefetch" href="/aprendizaje/assets/js/61.638fccbf.js"><link rel="prefetch" href="/aprendizaje/assets/js/7.06129e92.js"><link rel="prefetch" href="/aprendizaje/assets/js/8.9737c9fc.js"><link rel="prefetch" href="/aprendizaje/assets/js/9.7e901376.js">
    <link rel="stylesheet" href="/aprendizaje/assets/css/0.styles.5e6ce45c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/aprendizaje/" class="home-link router-link-active"><!----> <span class="site-name">Guias</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/aprendizaje/" class="nav-link">
  Inicio
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/aprendizaje/vue/" aria-current="page" class="sidebar-link">Conceptos de Vue</a></li><li><a href="/aprendizaje/vue/proyecto.html" aria-current="page" class="active sidebar-link">Proyecto #1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#iniciamos-el-proyecto-con-vite" class="sidebar-link">Iniciamos el proyecto con vite</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#script-setup" class="sidebar-link">script setup</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#componente-app" class="sidebar-link">Componente App</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#vue-router" class="sidebar-link">vue-router</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#navbar" class="sidebar-link">Navbar</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#pinia" class="sidebar-link">Pinia</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#state-variables-en-componentes" class="sidebar-link">State  / Variables en componentes</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#getter" class="sidebar-link">GETTER</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#actions-eventos" class="sidebar-link">ACTIONS  / Eventos</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#firebase-9" class="sidebar-link">Firebase 9</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#formulario-preventdefault" class="sidebar-link">Formulario / preventDefault()</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#ref" class="sidebar-link">ref</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#validaciones-trim" class="sidebar-link">Validaciones (Trim)</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#register" class="sidebar-link">Register</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#userouter-redirrecion" class="sidebar-link">useRouter (Redirrecion)</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#login" class="sidebar-link">Login</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#logout" class="sidebar-link">Logout</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#redirrecion-con-el-router" class="sidebar-link">Redirrecion con el router</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#loading-atributos-dinamicos" class="sidebar-link">Loading – “Atributos” dinamicos</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#ruta-protegida" class="sidebar-link">Ruta protegida</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#componentes-y-v-if" class="sidebar-link">Componentes y v-if</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#loading-y-v-else" class="sidebar-link">Loading  y v-else</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#verificar-cuenta-correo" class="sidebar-link">Verificar cuenta correo</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#inicializa-cloud-firestore" class="sidebar-link">Inicializa Cloud Firestore</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#creamos-otra-store-leer-doc" class="sidebar-link">Creamos otra store / Leer doc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#where" class="sidebar-link">WHERE</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#v-for" class="sidebar-link">V-for</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#loading" class="sidebar-link">Loading</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#reset-store" class="sidebar-link">Reset Store</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#agregar-doc" class="sidebar-link">Agregar Doc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#borrar-doc-getdoc" class="sidebar-link">Borrar doc / getDoc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#variables-en-url-getdoc" class="sidebar-link">Variables en Url (getDoc)</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#leer-variable-url-onmounted" class="sidebar-link">Leer variable url / onMounted</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#update-doc" class="sidebar-link">Update doc</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#rules" class="sidebar-link">Rules</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#deploy" class="sidebar-link">Deploy</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#ant-design-vue" class="sidebar-link">Ant Design Vue</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#layout" class="sidebar-link">Layout</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#name-del-router" class="sidebar-link">Name del router</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#grid" class="sidebar-link">Grid</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#formulario" class="sidebar-link">Formulario</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#registro-con-repassword" class="sidebar-link">Registro con repassword</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#errores-fire-auth" class="sidebar-link">Errores Fire Auth</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#message" class="sidebar-link">Message</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#register-2" class="sidebar-link">Register</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#componente-addform-renderizar-componente" class="sidebar-link">Componente AddForm / Renderizar componente</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#card" class="sidebar-link">Card</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#confirmar-eliminacion-parametro-en-la-funcion-del-evento" class="sidebar-link">Confirmar Eliminacion / Parametro en la función del evento</a></li><li class="sidebar-sub-header"><a href="/aprendizaje/vue/proyecto.html#editar" class="sidebar-link">Editar</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proyecto-1"><a href="#proyecto-1" class="header-anchor">#</a> Proyecto #1</h1> <h2 id="iniciamos-el-proyecto-con-vite"><a href="#iniciamos-el-proyecto-con-vite" class="header-anchor">#</a> Iniciamos el proyecto con vite</h2> <ul><li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#vite" target="_blank" rel="noopener noreferrer">¿que es vite?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm create vite@latest my<span class="token operator">-</span>vue<span class="token operator">-</span>app <span class="token operator">--</span> <span class="token operator">--</span>template vue
</code></pre></div><ul><li>Es parecido a React</li> <li>La aplicación se monta en el index.html (el div con la id app)</li> <li>El src/main.js crea la aplicación y la renderiza en el div del index.html</li> <li>Por lo tanto, lo que se renderiza es el src/App.vue</li></ul> <p>App.vue</p> <ul><li>Es un componente</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'./components/HelloWorld.vue'</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">&quot;Vue logo&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;./assets/logo.png&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>HelloWorld msg<span class="token operator">=</span><span class="token string">&quot;Hello Vue 3 + Vite&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
#app <span class="token punctuation">{</span>
  font<span class="token operator">-</span>family<span class="token operator">:</span> Avenir<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans<span class="token operator">-</span>serif<span class="token punctuation">;</span>
  <span class="token operator">-</span>webkit<span class="token operator">-</span>font<span class="token operator">-</span>smoothing<span class="token operator">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token operator">-</span>moz<span class="token operator">-</span>osx<span class="token operator">-</span>font<span class="token operator">-</span>smoothing<span class="token operator">:</span> grayscale<span class="token punctuation">;</span>
  text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
  color<span class="token operator">:</span> #<span class="token number">2</span>c3e50<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token number">60</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre></div><h2 id="script-setup"><a href="#script-setup" class="header-anchor">#</a> script setup</h2> <ul><li>Lo que esta adentro de esa etiqueta, se va al template.</li> <li>Se ejecutará cada vez que se cree una instancia del componente .</li> <li>Al usar script setup, cualquier enlace de nivel superior (incluidas variables, declaraciones de funciones e importaciones) declarado dentro script setup se puede usar directamente en la plantilla</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'./components/HelloWorld.vue'</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="componente-app"><a href="#componente-app" class="header-anchor">#</a> Componente App</h2> <ul><li>Creamos nuestro componente App</li></ul> <p>App.vue</p> <ul><li>Podes usar el snippet vue  (vbase-3-setup)</li> <li>Utilizamos la etiqueta template</li> <li>Lo que contiene la etiqueta template se va a renderizar.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre></div><h3 id="inicializar-servidor"><a href="#inicializar-servidor" class="header-anchor">#</a> Inicializar servidor</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run dev  
</code></pre></div><h2 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h2> <ul><li><a href="https://router.vuejs.org/installation.html#direct-download-cdn" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://router.vuejs.org/guide/" target="_blank" rel="noopener noreferrer">como empezar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install vue<span class="token operator">-</span>router@4
</code></pre></div><h3 id="_1-creamos-la-carpeta-views-dentro-de-src"><a href="#_1-creamos-la-carpeta-views-dentro-de-src" class="header-anchor">#</a> 1. Creamos la carpeta views dentro de src</h3> <ul><li>Tambien se puede llamar routes</li> <li>Aca van todos los componentes que se van a renderizar en las rutas</li></ul> <p>src/views/Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><p>src/views/Login.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><p>src/views/Register.vue</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Las tres rutas son components</p></div> <h3 id="_2-creamos-el-archivo-router-js-en-src"><a href="#_2-creamos-el-archivo-router-js-en-src" class="header-anchor">#</a> 2. Creamos el archivo router.js en src</h3> <ul><li>Crea el router</li> <li>Tiene las configuraciones de las rutas</li> <li>Este archivo especifica que componente debe renderizar en base a la url.</li> <li>El router lo utiliza la app (main.js)</li></ul> <p>src/router.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// createWebHistory = Para evitar el # en la url</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter <span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>

<span class="token comment">// componentes</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./views/Home.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'./views/Login.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Register <span class="token keyword">from</span> <span class="token string">'./views/Register.vue'</span><span class="token punctuation">;</span>

 <span class="token comment">// routes = array de objetos</span>
 <span class="token comment">// cada objeto es una ruta </span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment">// path : ruta   components: componente a renderizar en la ruta</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">&quot;/&quot;</span> <span class="token punctuation">,</span> component<span class="token operator">:</span> Home<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">&quot;/login&quot;</span> <span class="token punctuation">,</span> component<span class="token operator">:</span> Login<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">&quot;/register&quot;</span> <span class="token punctuation">,</span> component<span class="token operator">:</span> Register<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// creamos el router con toda su configuracion </span>
<span class="token comment">// createRouter({rutas , history})</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    routes <span class="token punctuation">,</span>
    history <span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>

</code></pre></div><p>main.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token punctuation">;</span>
<span class="token comment">// use(router) = Que utilize el router</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Con  createWebHistory: http://localhost:3000/login</li> <li>Con createWebHashHistory y sin createWebHistory:  http://localhost:3000/#/login</li></ul></div> <h3 id="_3-configuramos-el-componente-app-para-que-renderice-las-vistas"><a href="#_3-configuramos-el-componente-app-para-que-renderice-las-vistas" class="header-anchor">#</a> 3. Configuramos el componente App para que renderice las vistas</h3> <p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Es como un componente que lo genera el router que renderiza las vistas  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span> scoped<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre></div><h2 id="navbar"><a href="#navbar" class="header-anchor">#</a> Navbar</h2> <ul><li>en lugar de usar la etiqueta a , utiliza la etiqueta router-link</li> <li>el lugar de usar el atributo href , se utiliza el to.</li></ul> <p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> es el equivalente a <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> el to<span class="token operator">=</span><span class="token string">&quot;valor&quot;</span> es equivalente a href<span class="token operator">=</span><span class="token string">&quot;valor&quot;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Home <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>  <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span>Login <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Es como un componente que lo genera el router que renderiza las vistas  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span> scoped<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre></div><h2 id="pinia"><a href="#pinia" class="header-anchor">#</a> Pinia</h2> <ul><li><a href="https://pinia.vuejs.org/" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Pinia es una biblioteca de  Store para Vue, le permite compartir un estado entre componentes/páginas.</li> <li>Aunque Pinia es lo suficientemente bueno para reemplazar a Vuex, reemplazar a Vuex no era su objetivo. Pero luego se volvió tan bueno que el equipo central de Vue.js decidió convertirlo en Vuex 5.</li> <li>Es el equivalente a <a href="https://fedeleva.github.io/aprendizaje/React/context.html" target="_blank" rel="noopener noreferrer">context Api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  de react</li> <li>Permite compartir un estado entre componentes</li> <li>Sirve para implementar un estado global</li> <li><a href="https://blog.logrocket.com/pinia-vs-vuex/" target="_blank" rel="noopener noreferrer">pinia vs vuex<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="instalacion"><a href="#instalacion" class="header-anchor">#</a> Instalacion</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install pinia
</code></pre></div><p>main.js</p> <ul><li>Inicializamos pinia</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token comment">// use(router) = Que utilize el router</span>
<span class="token comment">//use(createPinia()) = Que inicialice pinia</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="state-variables-en-componentes"><a href="#state-variables-en-componentes" class="header-anchor">#</a> State  / Variables en componentes</h2> <ul><li>Creamos la Carpeta stores dentro de src</li> <li>Podemos crear varias stores dentro de esta carpeta</li></ul> <p>src/stores/user.js</p> <ul><li>Vamos a crear una tienda.</li> <li>Todas las tiendan tienen un nombre que las identifica y un objeto con las configuraciones.</li> <li>En las configuraciones se encuentra el estado, las acciones (permite modificar el estado) y los getter (permite obtener el estado de forma computada).</li> <li>Todo lo que contiene el estado se comparte con todos los componentes.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">//defineStore(&quot;nombre&quot; , {configuracion})</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;userStore&quot;</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//state: función flecha que retorna el estado.</span>
    <span class="token function-variable function">state</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
          userData <span class="token operator">:</span> <span class="token string">'nombreusuario@tes.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Home.vue</p> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Para escribir variables dentro de vue(template) es con:</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span><span class="token punctuation">{</span> variable<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home <span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>userStore<span class="token punctuation">.</span>userData<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
  <span class="token comment">// Accedemos a la tienda</span>
  <span class="token comment">// userStore = contiene el objeto que retornaba state</span>
  <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="getter"><a href="#getter" class="header-anchor">#</a> GETTER</h2> <ul><li>Los captadores son solo propiedades computadas detrás de escena, por lo que no es posible pasarles ningún parámetro (solo el State)</li> <li>Sin embargo, puede devolver una función del getter para aceptar cualquier argumento: <a href="https://pinia.vuejs.org/core-concepts/getters.html#passing-arguments-to-getters" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Login.vue</p> <ul><li>Utilizamos los getter(computed) para modificar un valor del estado.</li> <li>El valor modificado no se guardará en la Store. (no modificara el estado)</li> <li>Es un getter que puede modificar el valor devuelto. Ej. te devuelve la información en mayúscula.</li> <li>Hace un cálculo, pero no lo modifica.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>mayuscula<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
  
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
  <span class="token comment">// Accedemos a la tienda</span>
  <span class="token comment">// userStore = contiene el objeto que retornaba state</span>
  <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// computed(callback que retorna el valor)</span>
  <span class="token keyword">const</span> mayuscula <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> userStore<span class="token punctuation">.</span>userData<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="hacemos-lo-mismo-pero-desde-la-tienda"><a href="#hacemos-lo-mismo-pero-desde-la-tienda" class="header-anchor">#</a> Hacemos lo mismo pero desde la tienda</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Los getter siempre deben retornar algo.</p></div> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">//defineStore(&quot;nombre&quot; , {configuracion})</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;userStore&quot;</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//state: función flecha que retorna el estado.</span>
    <span class="token function-variable function">state</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
          userData <span class="token operator">:</span> <span class="token string">'nombreusuario@tes.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
    <span class="token comment">// getters : {  los computed}</span>
    getters<span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token function">mayuscula</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> state<span class="token punctuation">.</span>userData<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Login.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>mayuscula<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
  
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
  <span class="token comment">// Accedemos a la tienda</span>
  <span class="token comment">// userStore = contiene el objeto que retornaba state</span>
  <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// LLamamos al getter mayuscula</span>
  <span class="token keyword">const</span> mayuscula <span class="token operator">=</span> userStore<span class="token punctuation">.</span>mayuscula<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="actions-eventos"><a href="#actions-eventos" class="header-anchor">#</a> ACTIONS  / Eventos</h2> <ul><li>Las acciones son el equivalente de los métodos en los componentes. Se pueden definir con la propiedad actions en defineStore() y son perfectos para definir la lógica empresarial</li> <li>Son para mutar/modificar el estado.</li></ul> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">//defineStore(&quot;nombre&quot; , {configuracion})</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;userStore&quot;</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//state: función flecha que retorna el estado.</span>
    <span class="token function-variable function">state</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
          userData <span class="token operator">:</span> <span class="token string">'nombreusuario@tes.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
    <span class="token comment">// getters : {  los computed}</span>
    getters<span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token function">mayuscula</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> state<span class="token punctuation">.</span>userData<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span>
    <span class="token comment">// actions : {metodos}</span>
    actions <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// con el this accedemos al estado</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> name
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Register.vue</p> <ul><li>Trabajamos con eventos</li></ul> <div class="custom-block tip"><p class="custom-block-title">Evento</p> <ul><li>@evento=”codigo”</li> <li>Al producirse el evento , ejecuta el codigo</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;userStore.registerUser('Registrado')&quot;</span><span class="token operator">&gt;</span>Ingresar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="firebase-9"><a href="#firebase-9" class="header-anchor">#</a> Firebase 9</h2> <ul><li><a href="https://firebase.google.com/docs/web/setup?authuser=0&amp;hl=es" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://console.firebase.google.com/u/0/" target="_blank" rel="noopener noreferrer">consola<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#firebase-9" target="_blank" rel="noopener noreferrer">que es?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="instalacion-2"><a href="#instalacion-2" class="header-anchor">#</a> Instalacion</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install firebase
</code></pre></div><h3 id="configuracion"><a href="#configuracion" class="header-anchor">#</a> Configuracion</h3> <ul><li>Este codigo le deberia aparecer en firebase (mas o menos) (<a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#firebase-9" target="_blank" rel="noopener noreferrer">ver el apartado de firebase en React para obtenerlo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> onAuthStateChanged <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    apiKey<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    authDomain<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    projectId<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    storageBucket<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    appId<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">getFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> db<span class="token punctuation">,</span> auth <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="habilitamos-la-autenticacion"><a href="#habilitamos-la-autenticacion" class="header-anchor">#</a> Habilitamos la autenticacion</h3> <ol><li>Habilitamos la autenticacion de correo electronico/contraseña  en la pagina de firebase</li> <li>Generamos el auth que se va a implementar en todas las autenticaciones ya sea para iniciar sesion o registrarse.</li></ol> <p>firebaseConfig.js</p> <ul><li>Es un Archivo de configuracion que va en src</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Import the functions you need from the SDKs you need</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>getAuth<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span>
<span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  apiKey<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  authDomain<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  projectId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  storageBucket<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize Firebase</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>auth<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="formulario-preventdefault"><a href="#formulario-preventdefault" class="header-anchor">#</a> Formulario / preventDefault()</h2> <p>Register.vue</p> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>@evento.prevent = evento.preventDefault().</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Crear usuario<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;procesando&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h2> <ul><li>Nos permite acceder a todas las propiedades de un elemento del template.</li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#useref" target="_blank" rel="noopener noreferrer">Casi lo mismo que useRef de react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Se le asigna v-model a un elemento/componente del template cuyo valor es la constante que contiene un ref (v-model = “variable const”)</li> <li>A través de v-model se le asigna la referencia a la variable.</li> <li>Esa constante tendría una referencia a ese elemento “HTML”  , por lo tanto se podría decir que es igual a  document.getElementById…. de javascript.</li></ul> <p>Register.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Crear usuario<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>password<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="valores-por-defecto-del-formulario"><a href="#valores-por-defecto-del-formulario" class="header-anchor">#</a> Valores por defecto del formulario</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="validaciones-trim"><a href="#validaciones-trim" class="header-anchor">#</a> Validaciones (Trim)</h2> <div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>el trim (limpia los espacios) se le puede poner al v-model.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Crear usuario<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'llena los campos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="register"><a href="#register" class="header-anchor">#</a> Register</h2> <ul><li>Utilizamos el metodo <a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#createuserwithemailandpassword" target="_blank" rel="noopener noreferrer">createUserWithEmailAndPassword<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>stores/user.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebaseConfig'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;userStore&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        userData<span class="token operator">:</span> <span class="token string">'nombreusuario@tes.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                 <span class="token keyword">const</span> usuario <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                 <span class="token comment">// Accedemos a la propiedad user </span>
                 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usuario<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Register.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'llena los campos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         userStore<span class="token punctuation">.</span><span class="token function">registerUser</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>value<span class="token punctuation">,</span> password<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Te registraste&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Como se puede observar, la propiedad user contiene toda la información del usuario.</p></div> <p>En base a la observacion , podemos hacer algunos cambios :</p> <p>stores/user.js</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><h2 id="userouter-redirrecion"><a href="#userouter-redirrecion" class="header-anchor">#</a> useRouter (Redirrecion)</h2> <p>Register.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token comment">// vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token comment">// store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ref</span>
<span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Creamos el router</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span>  <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'llena los campos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">registerUser</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>value<span class="token punctuation">,</span> password<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token comment">// Redirrecionamos a la pagina raiz ('/') , al home</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="login"><a href="#login" class="header-anchor">#</a> Login</h2> <ul><li>Usamos el metodo <a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#signinwithemailandpassword" target="_blank" rel="noopener noreferrer">signInWithEmailAndPassword<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>stores/user.js</p> <div class="language-js extra-class"><pre class="language-js"><code> actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Iniciamos sesion y sacamos la informacion del usuario(la contiene la propiedad user)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>Login.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Login<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese email&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese password&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Acceso<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token comment">// vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token comment">// store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ref</span>
<span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// router</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span>  <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'llena los campos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>value<span class="token punctuation">,</span> password<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token comment">// Redirrecionamos a la pagina raiz ('/') , al home</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="logout"><a href="#logout" class="header-anchor">#</a> Logout</h2> <ul><li>Usamos el metodo <a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#signout" target="_blank" rel="noopener noreferrer">signOut<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>stores/user.js</p> <div class="language-js extra-class"><pre class="language-js"><code> actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Iniciamos sesion y sacamos la informacion del usuario(la contiene la propiedad user)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">logoutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> es el equivalente a <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> el to<span class="token operator">=</span><span class="token string">&quot;valor&quot;</span> es equivalente a href<span class="token operator">=</span><span class="token string">&quot;valor&quot;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Home <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>  <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span>Login <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;userStore.logoutUser&quot;</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Es como un componente que lo genera el router que renderiza las vistas  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
   <span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./stores/user'</span><span class="token punctuation">;</span>
   <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="redirrecion-con-el-router"><a href="#redirrecion-con-el-router" class="header-anchor">#</a> Redirrecion con el router</h2> <ul><li>El archivo router.js que creamos también tiene los mismos métodos para redirrecionar.</li></ul> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> signOut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebaseConfig'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'../router'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;userStore&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        userData<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Iniciamos sesion y sacamos la informacion del usuario(la contiene la propiedad user)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">logoutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="loading-atributos-dinamicos"><a href="#loading-atributos-dinamicos" class="header-anchor">#</a> Loading – “Atributos” dinamicos</h2> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> signOut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebaseConfig'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'../router'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;userStore&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        userData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        loadingUser<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Iniciamos sesion y sacamos la informacion del usuario(la contiene la propiedad user)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">logoutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Login.vue</p> <div class="custom-block tip"><p class="custom-block-title">Atributos dinamicos</p> <ul><li>Para que se bloquee/desactive el botón mientras se está procesando la información del usuario usamos :disabled=”valor”</li> <li>Solo se bloqueará si el valor es true</li> <li>Usamos los dos puntos(“:”) porque es dinámico. (Esta pendiente del valor, como useState)</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code>            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Acceso<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>Register.vue</p> <div class="language-js extra-class"><pre class="language-js"><code>           <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Crear usuario<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><h2 id="ruta-protegida"><a href="#ruta-protegida" class="header-anchor">#</a> Ruta protegida</h2> <ul><li>La ruta protegida es el Home.</li></ul> <p>user.js</p> <ul><li>Usamos el metodo <a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#onauthstatechanged" target="_blank" rel="noopener noreferrer">onAuthStateChanged<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>onAuthStateChanged tiene un tercer parámetro que es un callback para gestionar el error (recibe el error y lo manipula)</li> <li>onAuthStateChanged es el único que NO DEVUELVE UNA PROMESA , por lo tanto la creamos.</li> <li><a href="https://stackoverflow.com/questions/42762443/how-can-i-unsubscribe-to-onauthstatechanged" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Iniciamos sesion y sacamos la informacion del usuario(la contiene la propiedad user)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">logoutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> unsuscribe <span class="token operator">=</span> <span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token function">unsuscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Como se puede observar, es una función que se ejecuta una sola vez para que deje de estar como observador.</li></ul></div> <p>routes.js</p> <ul><li>El método useUserStore() se debe llamar dentro de un método. (en caso contrario no se garantiza su funcionamiento)</li></ul> <div class="custom-block tip"><p class="custom-block-title">beforeEnter</p> <ul><li>Utilizamos beforeEnter para activar un método antes de que entre a la ruta (al componente)</li> <li>El metodo se ejecutara antes de renderizar el componente.</li> <li>sintaxis: beforeEnter:método</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./views/Home.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'./views/Login.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Register <span class="token keyword">from</span> <span class="token string">'./views/Register.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">requireAuth</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Si existe el usuario</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Que se renderize el component </span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Vaya al login</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>

    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Home<span class="token punctuation">,</span> beforeEnter<span class="token operator">:</span> requireAuth <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Login <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Register <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">,</span>
    history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>La función(método)  RequireAuth es como un middleware.</li> <li>Con el método next redirecciono.</li></ul></div> <h2 id="componentes-y-v-if"><a href="#componentes-y-v-if" class="header-anchor">#</a> Componentes y v-if</h2> <div class="custom-block tip"><p class="custom-block-title">Componentes</p> <p>Como se puede ver, los componentes se renderizan como si fueran una etiqueta html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>componente</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>componente</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <ul><li>Utilizamos el v-if  para especificar cuando se va a renderizar un componente o etiqueta html , en este caso el componente router-link.</li> <li>v-if=”condición”</li> <li>Si la condición es true , se renderizara el componente.</li></ul> <p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> es el equivalente a <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> el to<span class="token operator">=</span><span class="token string">&quot;valor&quot;</span> es equivalente a href<span class="token operator">=</span><span class="token string">&quot;valor&quot;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.userData&quot;</span><span class="token operator">&gt;</span>Home <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>  <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.userData&quot;</span><span class="token operator">&gt;</span>Login <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.userData&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;userStore.logoutUser&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.userData&quot;</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Es como un componente que lo genera el router que renderiza las vistas  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
   <span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./stores/user'</span><span class="token punctuation">;</span>
   <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Si el user(userData) existe , se renderizaran los enlaces de Home y el botón de Logout .</li> <li>Si user(userData) no existe , se renderizaran los enlaces de login y register.</li></ul></div> <h2 id="loading-y-v-else"><a href="#loading-y-v-else" class="header-anchor">#</a> Loading  y v-else</h2> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        userData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        loadingUser<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        loadingSession<span class="token operator">:</span><span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

</code></pre></div><p>router.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">requireAuth</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userStore<span class="token punctuation">.</span>loadingSession <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Si existe el usuario</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Que se renderize el component </span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Vaya al login</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    userStore<span class="token punctuation">.</span>loadingSession <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>nav v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.loadingSession&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.userData&quot;</span><span class="token operator">&gt;</span>Home <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>  <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.userData&quot;</span><span class="token operator">&gt;</span>Login <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.userData&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;userStore.logoutUser&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.userData&quot;</span><span class="token operator">&gt;</span>Logout<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Es como un componente que lo genera el router que renderiza las vistas  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>El nav se mostrara solo si loadingSession es false</li> <li>En caso contrario  (else (v-else) )  , si loadingSession es true ,  se mostrara un párrafo diciendo loading…</li></ul></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <ul><li>El v-else siempre debe estar debajo del if .</li> <li>Si no se puede, se debe crear otro if.</li></ul></div> <h2 id="verificar-cuenta-correo"><a href="#verificar-cuenta-correo" class="header-anchor">#</a> Verificar cuenta correo</h2> <ul><li><a href="https://firebase.google.com/docs/auth/web/manage-users?hl=es&amp;authuser=0#send_a_user_a_verification_email" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Utilizamos el método sendEmailVerification para verificar una cuenta por email</li></ul> <h3 id="en-firebase"><a href="#en-firebase" class="header-anchor">#</a> En FireBase</h3> <ol><li>Entramos a FireBase – Autenticacion – Plantilla</li></ol> <ul><li>Podes modificar la plantilla del correo.</li></ul> <ol start="2"><li>Le cambiamos el idioma</li></ol> <h3 id="en-el-proyecto"><a href="#en-el-proyecto" class="header-anchor">#</a> En el proyecto</h3> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token comment">// Enviamos un email de validacion</span>
                <span class="token comment">//sendEmailVerification(currentUser)</span>
               <span class="token keyword">await</span> <span class="token function">sendEmailVerification</span><span class="token punctuation">(</span>auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">)</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><h3 id="mas-seguridad-a-la-ruta-protegida"><a href="#mas-seguridad-a-la-ruta-protegida" class="header-anchor">#</a> Mas seguridad a la ruta protegida</h3> <ul><li>Pedimos que la cuenta sea verificada para entrar.</li></ul> <p>router.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">requireAuth</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    userStore<span class="token punctuation">.</span>loadingSession <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Si existe el usuario</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>emailVerified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Que se renderize el component </span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Vaya al login</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    userStore<span class="token punctuation">.</span>loadingSession <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Para seguir con el proyecto y la explicación , lo quitamos ya que trabajamos con usuarios ficticios.</p></div> <h2 id="inicializa-cloud-firestore"><a href="#inicializa-cloud-firestore" class="header-anchor">#</a> Inicializa Cloud Firestore</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/quickstart?hl=es#initialize" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="pasos-en-firebase"><a href="#pasos-en-firebase" class="header-anchor">#</a> Pasos en Firebase</h3> <ol><li>Creamos una bd de Firestore en firebase<a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#firestore-bd" target="_blank" rel="noopener noreferrer">ver apartado de react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  en modo test.</li></ol> <ul><li>Mientras mas uso de la bd se haga , mas dinero vas a perder (mas te van a cobrar)</li></ul> <ol start="2"><li>Creamos una colección llamado urls</li></ol> <ul><li>Iniciar colección = Crear colección</li></ul> <div class="custom-block tip"><p class="custom-block-title">Campos de los documentos que se va a utilizar en los ejemplos</p> <ul><li>name: 'https://bluuweb.org',</li> <li>short: 'aDgdGd',</li> <li>user: 'pQycjKGmIKQ2wL4P1jvkAPhH4gh2'</li></ul></div> <h3 id="pasos-en-el-proyecto"><a href="#pasos-en-el-proyecto" class="header-anchor">#</a> Pasos en el proyecto</h3> <p>firebaseConfig.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Import the functions you need from the SDKs you need</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>getAuth<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getFirestore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/firestore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  apiKey<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  authDomain<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  projectId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  storageBucket<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize Firebase</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">getFirestore</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>auth <span class="token punctuation">,</span> db<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="creamos-otra-store-leer-doc"><a href="#creamos-otra-store-leer-doc" class="header-anchor">#</a> Creamos otra store / Leer doc</h2> <p>stores/database.js</p> <ul><li><p><a href="https://firebase.google.com/docs/firestore/query-data/get-data?hl=es#get_multiple_documents_from_a_collection" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Esta vez, a diferencia de la <a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#getdocs" target="_blank" rel="noopener noreferrer">guía de react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, creamos una query(consulta) y se la pasamos al método getDocs (este ejecuta la consulta)</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> query <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/firestore'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../firebaseConfig'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useDatabaseStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'database'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        document<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos una query </span>
                <span class="token comment">// query(metodo collection)</span>
                <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos todos los documentos</span>
                <span class="token comment">//getDocs(query)</span>
                <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
                querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// doc.id = La id del documento</span>
                    <span class="token comment">// doc.data() = devuelve un objeto con toda la informacion del documento (excepto la id)</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home <span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> userStore<span class="token punctuation">.</span>userData<span class="token punctuation">.</span>email <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="where"><a href="#where" class="header-anchor">#</a> WHERE</h2> <ul><li>Usamos el <a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#where" target="_blank" rel="noopener noreferrer">auth.currentUser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> para obtener la información del usuario autenticado.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos una query </span>
                <span class="token comment">// query(metodo collection , metodo where)</span>
                <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos todos los documentos</span>
                <span class="token comment">//getDocs(query)</span>
                <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
                querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// doc.id = La id del documento</span>
                    <span class="token comment">// doc.data() = devuelve un objeto con toda la informacion del documento (excepto la id)</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> 

</code></pre></div><h2 id="v-for"><a href="#v-for" class="header-anchor">#</a> V-for</h2> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos una query </span>
                <span class="token comment">// query(metodo collection , metodo where)</span>
                <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos todos los documentos</span>
                <span class="token comment">//getDocs(query)</span>
                <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
                querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// doc.id = La id del documento</span>
                    <span class="token comment">// doc.data() = devuelve un objeto con toda la informacion del documento (excepto la id)</span>
                   <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                       id<span class="token operator">:</span>doc<span class="token punctuation">.</span>id <span class="token punctuation">,</span> 
                       <span class="token operator">...</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
       <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Recorrerá Cada objeto del array document</li> <li>sintaxis: v-for=”nombre of array”</li> <li>Por cada iterracion , nombre corresponde a un valor del array</li> <li>1 iterracion ---  nombre = array[0] , 2 iterracion --- nombre =   array[1]</li> <li>Por cada iterracion generara una etiqueta li</li> <li>Cada etiqueta tiene el atributo key con un valor único.</li> <li>Como react, cada ítem debe tener una key para ser identificada en el DOM.</li></ul></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>En este ejemplo crea etiquetas li , pero  lo que se genera depende de que componente/etiqueta tenga el v-for</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>el of sirve para recorrer array</p> <p>el in sirve para recorrer objeto</p></div> <h2 id="loading"><a href="#loading" class="header-anchor">#</a> Loading</h2> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        document<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> 
        loadingDoc<span class="token operator">:</span><span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos una query </span>
                <span class="token comment">// query(metodo collection , metodo where)</span>
                <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos todos los documentos</span>
                <span class="token comment">//getDocs(query)</span>
                <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
                querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// doc.id = La id del documento</span>
                    <span class="token comment">// doc.data() = devuelve un objeto con toda la informacion del documento (excepto la id)</span>
                   <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                       id<span class="token operator">:</span>doc<span class="token punctuation">.</span>id <span class="token punctuation">,</span> 
                       <span class="token operator">...</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
       <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre></div><h2 id="reset-store"><a href="#reset-store" class="header-anchor">#</a> Reset Store</h2> <ul><li><a href="https://pinia.vuejs.org/core-concepts/state.html#resetting-the-state" target="_blank" rel="noopener noreferrer">Reiniciar Estado<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://pinia.vuejs.org/core-concepts/actions.html#accessing-other-stores-actions" target="_blank" rel="noopener noreferrer">Usar una tienda dentro de otra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>user.js</p> <div class="custom-block tip"><p class="custom-block-title">Recordatorio</p> <p>El store se debe usar dentro de una función para evitar problemas.</p></div> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">logoutUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Accedemos a la tienda de database</span>
         <span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         databaseStore<span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">signOut</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> unsuscribe <span class="token operator">=</span> <span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                            <span class="token comment">// Accedemos a la tienda de database</span>
         <span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         databaseStore<span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token function">unsuscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>Accedemos a una tienda dentro de otra tienda.</li> <li>Reseteamos el estado de la tienda database.</li></ul></div> <p>Para evitar problemas:</p> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="agregar-doc"><a href="#agregar-doc" class="header-anchor">#</a> Agregar Doc</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/manage-data/add-data?hl=es#add_a_document" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#add-doc" target="_blank" rel="noopener noreferrer">Lo mismo que React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm i nanoid
</code></pre></div><p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code>  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos una query </span>
                <span class="token comment">// query(metodo collection , metodo where)</span>
                <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos todos los documentos</span>
                <span class="token comment">//getDocs(query)</span>
                <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
                querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// doc.id = La id del documento</span>
                    <span class="token comment">// doc.data() = devuelve un objeto con toda la informacion del documento (excepto la id)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        id<span class="token operator">:</span> doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
                        <span class="token operator">...</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">addUrl</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> objetoDoc <span class="token operator">=</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> name<span class="token punctuation">,</span>
                    short<span class="token operator">:</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    user<span class="token operator">:</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">,</span>
                <span class="token punctuation">}</span>

                <span class="token comment">// addDoc(collection , documento)</span>
                <span class="token comment">// el documento es el objeto que se va a insertar en la BD</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">addDoc</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> objetoDoc<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token comment">// cuando se crea el objeto , te devuelve una propiedad con la id</span>
                    <span class="token operator">...</span>objetoDoc<span class="token punctuation">,</span> id<span class="token operator">:</span> docRef<span class="token punctuation">.</span>id
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese url&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;url&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Agregar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
       <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
 
  databaseStore<span class="token punctuation">.</span><span class="token function">addUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="borrar-doc-getdoc"><a href="#borrar-doc-getdoc" class="header-anchor">#</a> Borrar doc / getDoc</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/manage-data/delete-data?hl=es#delete_documents" target="_blank" rel="noopener noreferrer">Eliminar documento<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://firebase.google.com/docs/firestore/query-data/get-data?hl=es#get_a_document" target="_blank" rel="noopener noreferrer">Obtener un documento<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#delete-doc" target="_blank" rel="noopener noreferrer">Eliminar un documento (Explicacion en react)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#redirect-params-en-la-url-getdoc" target="_blank" rel="noopener noreferrer">Obtener un documento (Explicacion en react)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code>actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos una query </span>
                <span class="token comment">// query(metodo collection , metodo where)</span>
                <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos todos los documentos</span>
                <span class="token comment">//getDocs(query)</span>
                <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
                querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// doc.id = La id del documento</span>
                    <span class="token comment">// doc.data() = devuelve un objeto con toda la informacion del documento (excepto la id)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        id<span class="token operator">:</span> doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
                        <span class="token operator">...</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingDoc <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">addUrl</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> objetoDoc <span class="token operator">=</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> name<span class="token punctuation">,</span>
                    short<span class="token operator">:</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    user<span class="token operator">:</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">,</span>
                <span class="token punctuation">}</span>

                <span class="token comment">// addDoc(collection , documento)</span>
                <span class="token comment">// el documento es el objeto que se va a insertar en la BD</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">addDoc</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> objetoDoc<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token comment">// cuando se crea el objeto , te devuelve una propiedad con la id</span>
                    <span class="token operator">...</span>objetoDoc<span class="token punctuation">,</span> id<span class="token operator">:</span> docRef<span class="token punctuation">.</span>id
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">deleteUrl</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//Eliminamos </span>
                <span class="token keyword">await</span> <span class="token function">deleteDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
                    item<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese url&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;url&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Agregar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span>br<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;databaseStore.deleteUrl(item.id)&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre></div><h2 id="variables-en-url-getdoc"><a href="#variables-en-url-getdoc" class="header-anchor">#</a> Variables en Url (getDoc)</h2> <ul><li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#redirect-params-en-la-url-getdoc" target="_blank" rel="noopener noreferrer">Obtener un documento (Explicacion en react)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>router.js</p> <div class="custom-block tip"><p class="custom-block-title">Variable en la Url</p> <ul><li>Se realiza con los dos puntitos seguido del nombre de la variable (“:nombrevariable”)</li></ul> <p>Ejemplo:
/editar/:id</p> <p>Si vamos a la url /editar/484465</p> <p>El valor de la variable id es 484465</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>

    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Home<span class="token punctuation">,</span> beforeEnter<span class="token operator">:</span> requireAuth <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/editar/:id&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Editar<span class="token punctuation">,</span> beforeEnter<span class="token operator">:</span> requireAuth <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Login <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Register <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese url&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;url&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Agregar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span>br<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;databaseStore.deleteUrl(item.id)&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>     
         <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;router.push(`/editar/${item.id}`)&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  databaseStore<span class="token punctuation">.</span><span class="token function">addUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><p>database.js</p> <ul><li><a href="https://firebase.google.com/docs/firestore/query-data/get-data?hl=es#get_a_document" target="_blank" rel="noopener noreferrer">link <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#redirect-params-en-la-url-getdoc" target="_blank" rel="noopener noreferrer">Obtener un documento (Explicacion en react)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">async</span> <span class="token function">leerUrl</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos un documento</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">deleteUrl</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//Eliminamos </span>
                <span class="token keyword">await</span> <span class="token function">deleteDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
                    item<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><h2 id="leer-variable-url-onmounted"><a href="#leer-variable-url-onmounted" class="header-anchor">#</a> Leer variable url / onMounted</h2> <div class="custom-block tip"><p class="custom-block-title">Leer variable de la url</p> <ul><li>Para leer las variables de la url Utilizamos useRoute() que devuelve un objeto.</li> <li>El objeto tiene la propiedad params que contiene otro objeto donde cada propiedad es una variable de la url con su valor correspondiente.</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">onMounted</p> <ul><li>Es un método de vue que recibe un callback.</li> <li>El callback se ejecutara al montarse/renderizarse el componente.</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">Se considera montado después de</p> <ul><li>Se han montado todos sus componentes secundarios síncronos (no incluye componentes asíncronos ni componentes dentro de árboles).</li> <li>Se ha creado su propio árbol DOM y se ha insertado en el contenedor principal. Tenga en cuenta que solo garantiza que el árbol DOM del componente esté en el documento si el contenedor raíz de la aplicación también está en el documento.</li></ul></div> <p>views/Editar.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese url&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;url&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">,</span> ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token comment">// Nos devuelve un objeto para tener acceso a las variables de la url.</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// El callback se ejecuta al montarse el componente.</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// route.params.nombrevariable</span>
     url<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> databaseStore<span class="token punctuation">.</span><span class="token function">leerUrl</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="update-doc"><a href="#update-doc" class="header-anchor">#</a> Update doc</h2> <ul><li><a href="https://firebase.google.com/docs/firestore/manage-data/add-data?hl=es#update-data" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#update-doc" target="_blank" rel="noopener noreferrer">Explicacion en React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">updateUrl</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos un documento</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//updateDoc(referencia documento , {datos a actualizar})</span>
                <span class="token keyword">await</span> <span class="token function">updateDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span>

             <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token operator">...</span>item <span class="token punctuation">,</span> name <span class="token operator">:</span> name<span class="token punctuation">}</span> <span class="token operator">:</span> item<span class="token punctuation">)</span>
            
             router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">deleteUrl</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//Eliminamos </span>
                <span class="token keyword">await</span> <span class="token function">deleteDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
                    item<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>Editar.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Ingrese url&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;url&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">,</span> ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token comment">// Nos devuelve un objeto para tener acceso a las variables de la url.</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   databaseStore<span class="token punctuation">.</span><span class="token function">updateUrl</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token punctuation">,</span> url<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// El callback se ejecuta al montarse el componente.</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// route.params.nombrevariable</span>
     url<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> databaseStore<span class="token punctuation">.</span><span class="token function">leerUrl</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="rules"><a href="#rules" class="header-anchor">#</a> Rules</h2> <ul><li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#regla-de-seguridad" target="_blank" rel="noopener noreferrer">Explicado en la seccion de React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="siempre-comienta-con-service-cloud-firestore"><a href="#siempre-comienta-con-service-cloud-firestore" class="header-anchor">#</a> Siempre comienta con : service cloud.firestore</h3> <ul><li>Sirve para que no se confunda con Cloud Storage.</li> <li>La declaración service cloud.firestore define el alcance de las reglas a Cloud Firestore, lo que evita conflictos entre las reglas de seguridad de Cloud Firestore y las reglas de otros productos, como Cloud Storage.</li></ul> <h3 id="declaracion-match-databases-database-documents"><a href="#declaracion-match-databases-database-documents" class="header-anchor">#</a> Declaracion match /databases/{database}/documents</h3> <ul><li>La declaración match /databases/{database}/documents especifica que las reglas deberían coincidir con cualquier base de datos de Cloud Firestore en el proyecto. Actualmente, cada proyecto tiene solo una base de datos llamada (default).</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <ul><li>No confundir colección con base de datos.</li> <li>En la versión gratis solo tenemos una BD.</li></ul></div> <h3 id="reglas-basicas-de-lectura-y-escritura"><a href="#reglas-basicas-de-lectura-y-escritura" class="header-anchor">#</a> Reglas básicas de lectura y escritura</h3> <ul><li>Las reglas básicas consisten en una declaración match que especifica la ruta de un documento y una expresión allow que describe cuándo se permite la lectura de los datos especificados (documento especificado)</li> <li>Todas las declaraciones de coincidencia deben apuntar a los documentos, no a las colecciones. Una declaración de coincidencia puede apuntar a un documento específico, como en match /coleccion/ID , o usar comodines para apuntar a cualquier documento en la ruta especificada, como en match /coleccion/{variable}.</li> <li>Cuando se evalúan las expresiones allow en la declaración de coincidencia, la variable  se convierte en el nombre del documento(ID) .</li></ul> <h3 id="resultado-final"><a href="#resultado-final" class="header-anchor">#</a> Resultado Final</h3> <div class="language-js extra-class"><pre class="language-js"><code>rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span>firestore <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span>urls<span class="token operator">/</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read<span class="token punctuation">,</span> update<span class="token punctuation">,</span> <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>uid <span class="token operator">==</span> resource<span class="token punctuation">.</span>data<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
      allow create<span class="token operator">:</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>auth <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="deploy"><a href="#deploy" class="header-anchor">#</a> Deploy</h2> <ul><li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#deploy" target="_blank" rel="noopener noreferrer">Explicacion en la seccion de React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">-</span>g firebase<span class="token operator">-</span>tools
firebase login
firebase init
firebase deploy
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">¿ejecución de scripts está deshabilitada en este sistema?</p> <p>Ejecutar windows + R –&gt; gpedit.msc. Ir a Plantillas administrativas&gt; Componentes de Windows&gt; Windows PowerShell&gt; Seleccionar Activar la ejecución de scripts, click derecho, editar. Seleccionar Habilitada y Permitir todos los scripts, Aplicar.</p></div> <h2 id="ant-design-vue"><a href="#ant-design-vue" class="header-anchor">#</a> Ant Design Vue</h2> <div class="custom-block tip"><p class="custom-block-title">unplugin-vue-components</p> <ul><li>Permite utilizar los componentes sin necesidad de importarlos (import)</li> <li>Sirve para no tener tantas importaciones.</li> <li>Podes usar componentes sin necesidad de utilizar el import.</li></ul></div> <h3 id="ant-design-of-vue"><a href="#ant-design-of-vue" class="header-anchor">#</a> Ant Design Of Vue</h3> <ul><li><a href="https://www.antdv.com/docs/vue/introduce" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="instalacion-de-ambos"><a href="#instalacion-de-ambos" class="header-anchor">#</a> Instalacion de ambos</h3> <ol><li>Instalamos los modulos</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install ant<span class="token operator">-</span>design<span class="token operator">-</span>vue –save
npm i unplugin<span class="token operator">-</span>vue<span class="token operator">-</span>components

</code></pre></div><ol start="2"><li>Configuramos vite para trabajar con ant-design y ant design</li></ol> <p>vite.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AntDesignVueResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span><span class="token punctuation">;</span>
<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">AntDesignVueResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <p>Utilizamos unplugin-vue-components en la configuración de ant-design</p></div> <h3 id="listo"><a href="#listo" class="header-anchor">#</a> Listo!!</h3> <ul><li>A partir de ahora podemos usar los componentes que nos brinda andv</li> <li><a href="https://www.antdv.com/components/overview/" target="_blank" rel="noopener noreferrer">Lista de componente<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="componente-a-button"><a href="#componente-a-button" class="header-anchor">#</a> Componente a-button</h3> <h4 id="props"><a href="#props" class="header-anchor">#</a> Props</h4> <ul><li>type  : Especifica la forma del boton</li></ul> <h4 id="ejemplos"><a href="#ejemplos" class="header-anchor">#</a> Ejemplos</h4> <p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>Primary Button<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Observacion</p> <ul><li>En script setup no escribimos nada porque la importación se hace automáticamente gracias a unplugin-vue-components.</li> <li>Con la configuración que hicimos en vite , logramos que el css solo se importe cuando se use los componentes que lo utilice.</li></ul></div> <h2 id="layout"><a href="#layout" class="header-anchor">#</a> Layout</h2> <ul><li><a href="https://www.antdv.com/components/layout" target="_blank" rel="noopener noreferrer">layout<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>El Layout es la forma de distribuir el contenido del sitio web.</li></ul> <h3 id="layout-con-menu"><a href="#layout-con-menu" class="header-anchor">#</a> Layout con Menu</h3> <p>Componentes que utilizamos:</p> <h4 id="a-layout"><a href="#a-layout" class="header-anchor">#</a> A-layout</h4> <ul><li>Todo se envuelve en este componente.</li> <li>Habilita el layout</li></ul> <h4 id="a-layout-header"><a href="#a-layout-header" class="header-anchor">#</a> A-layout-header</h4> <ul><li>Representa la cabecera(header)</li></ul> <h4 id="a-menu"><a href="#a-menu" class="header-anchor">#</a> A-menu</h4> <ul><li>Envuelve todo el menu de navegacion</li></ul> <h5 id="props-2"><a href="#props-2" class="header-anchor">#</a> Props:</h5> <ul><li>v-model:selectedKeys : Sirve para para identificar que a-menu-item esta abierto (en base a la key) y indicarle al usuario que link esta viendo.</li></ul> <h4 id="a-menu-item"><a href="#a-menu-item" class="header-anchor">#</a> A-menu-item</h4> <ul><li>Representa cada enlace(link)</li></ul> <h5 id="props-3"><a href="#props-3" class="header-anchor">#</a> Props:</h5> <ul><li>Key : Sirve para que el componente a-menu pueda identificarla.</li></ul> <h4 id="a-layout-content"><a href="#a-layout-content" class="header-anchor">#</a> a-layout-content</h4> <ul><li>Representa el contenido del sitio web</li></ul> <p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>header v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.loadingSession&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Tiene la props dark y mode <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu theme<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span> mode<span class="token operator">=</span><span class="token string">&quot;horizontal&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ lineHeight: '64px' }&quot;</span>  v<span class="token operator">-</span>model<span class="token operator">:</span>selectedKeys<span class="token operator">=</span><span class="token string">&quot;selectedKeys&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.userData&quot;</span> key<span class="token operator">=</span><span class="token string">&quot;home&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Home <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.userData&quot;</span>  key<span class="token operator">=</span><span class="token string">&quot;login&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> <span class="token operator">&gt;</span>Login <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!userStore.userData&quot;</span>  key<span class="token operator">=</span><span class="token string">&quot;register&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token operator">&gt;</span>Register <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item @click<span class="token operator">=</span><span class="token string">&quot;userStore.logoutUser&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.userData&quot;</span>  key<span class="token operator">=</span><span class="token string">&quot;logout&quot;</span><span class="token operator">&gt;</span>
          Logout
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>content style<span class="token operator">=</span><span class="token string">&quot;padding: 0 50px&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ background: '#fff', padding: '24px', minHeight: '280px' }&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;userStore.loadingSession&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>content<span class="token operator">&gt;</span>


  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> selectedKeys <span class="token operator">=</span>  <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="name-del-router"><a href="#name-del-router" class="header-anchor">#</a> Name del router</h2> <ul><li>En la configuración de las rutas, le podemos asignar un name a cada ruta.</li> <li>Ese name seria como el ID de cada ruta, sirve para identificarla con el router.</li></ul> <p>router.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment">// Le asignamos un nombre(identificador) a cada ruta</span>
    <span class="token comment">// {name : nombre}</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Home<span class="token punctuation">,</span> beforeEnter<span class="token operator">:</span> requireAuth <span class="token punctuation">,</span> 
    name<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/editar/:id&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Editar<span class="token punctuation">,</span> beforeEnter<span class="token operator">:</span> requireAuth <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Login <span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Register <span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'register'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

</code></pre></div><h3 id="tener-acceso-al-name-desde-la-vista"><a href="#tener-acceso-al-name-desde-la-vista" class="header-anchor">#</a> Tener acceso al name desde la vista</h3> <p>App.vue</p> <ul><li><a href="https://stackoverflow.com/questions/63800831/how-to-access-current-route-name-reactively-in-vue-composition-api-in-typescript" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Para acceder al name , se utiliza el useRoute</li></ul> <div class="custom-block tip"><p class="custom-block-title">watch</p> <ul><li>A través del watch (<a href="https://fedeleva.github.io/aprendizaje/React/todoApp.html#localstorage-con-useeffect" target="_blank" rel="noopener noreferrer">similar a useEffect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) estamos pendiente de algo.</li> <li>Watch tiene dos parámetros, una función que devuelve el dato el cual va a estar pendiente y una función.</li> <li>La función del segundo parámetro se ejecutará cada vez que el dato cambio.</li> <li>El watch es para asignar un observador de algo.</li></ul></div> <p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> selectedKeys <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Inicializamos route</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// watch(funcion que devuelve un dato , funcion)</span>
<span class="token comment">// vamos a estar pendiente del dato</span>
<span class="token comment">//route.name = el nombre de la ruta</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  selectedKeys<span class="token punctuation">.</span>value <span class="token operator">=</span>  <span class="token punctuation">[</span>route<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="grid"><a href="#grid" class="header-anchor">#</a> Grid</h2> <ul><li><a href="https://next.antdv.com/components/grid" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Es un sistema de 24 columnas</li></ul> <h3 id="componentes"><a href="#componentes" class="header-anchor">#</a> Componentes:</h3> <h4 id="a-row"><a href="#a-row" class="header-anchor">#</a> a-row</h4> <ul><li>Representa una fila</li></ul> <h4 id="a-col"><a href="#a-col" class="header-anchor">#</a> a-col</h4> <ul><li>Representa una columna</li></ul> <h4 id="props-4"><a href="#props-4" class="header-anchor">#</a> props:</h4> <h5 id="span"><a href="#span" class="header-anchor">#</a> span</h5> <ul><li>Indica la cantidad de columnas que va a ocupar (width)</li></ul> <h5 id="offset"><a href="#offset" class="header-anchor">#</a> offset</h5> <ul><li>Es el margen horizontal</li></ul> <h5 id="xs-sm"><a href="#xs-sm" class="header-anchor">#</a> xs , sm</h5> <ul><li>Es un punto de ruptura para hacerlo responsive , recibe un objeto con el span y offset.</li></ul> <h2 id="formulario"><a href="#formulario" class="header-anchor">#</a> Formulario</h2> <ul><li><a href="https://www.antdv.com/components/form" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="componentes-2"><a href="#componentes-2" class="header-anchor">#</a> Componentes</h3> <h4 id="a-form"><a href="#a-form" class="header-anchor">#</a> a-form</h4> <ul><li>Representa la etiqueta form</li></ul> <h4 id="props-5"><a href="#props-5" class="header-anchor">#</a> Props:</h4> <ul><li>name</li> <li>label-col</li> <li>wrapper</li> <li>model</li> <li>model</li> <li>layout</li> <li>evento @finish (cuando cumple las validaciones)</li> <li>evento @finishFailed (cuando falle las validaciones)</li> <li>etc</li></ul> <h4 id="a-form-item"><a href="#a-form-item" class="header-anchor">#</a> a-form-item</h4> <ul><li>Envuelve un componente a-input</li></ul> <h4 id="props-6"><a href="#props-6" class="header-anchor">#</a> Props:</h4> <ul><li>name</li> <li>label</li> <li>rules (validaciones)</li></ul> <h4 id="a-input"><a href="#a-input" class="header-anchor">#</a> a-input</h4> <ul><li>Representa un input</li> <li>Utiliza un v-model</li></ul> <h4 id="a-input-password"><a href="#a-input-password" class="header-anchor">#</a> a-input-password</h4> <ul><li>Es como el anterior , pero para los password.</li></ul> <h4 id="a-button"><a href="#a-button" class="header-anchor">#</a> a-button</h4> <ul><li>Tiene que contener el props html-type=”submit” para asignarle type=”submit” al button.</li></ul> <p>Login.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token operator">:</span>xs<span class="token operator">=</span><span class="token string">&quot;{ span: 24 }&quot;</span> <span class="token operator">:</span>sm<span class="token operator">=</span><span class="token string">&quot;{ span: 12, offset: 6 }&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;basicLogin&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu correo&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, message: 'Ingresa un email' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span>model<span class="token operator">:</span>value activa un evento del componente <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu password&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, message: 'Ingresa un email' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Ingresar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token comment">// vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token comment">// store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ref</span>
<span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'usuario@tes.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'llena los campos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>value<span class="token punctuation">,</span> password<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="problema"><a href="#problema" class="header-anchor">#</a> Problema</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>El formulario funciona, pero en las validaciones se queda pegado cuando escribimos algo incorrecto y luego lo corregimos (se queda en rojo).</p></div> <ul><li>Para solucionar eso , se pone el props model al componente a-form</li> <li>el props model recibe una propiedad reactive</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Antdv sugiere que usemos reactive en lugar de ref para los formulario.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token operator">:</span>xs<span class="token operator">=</span><span class="token string">&quot;{ span: 24 }&quot;</span> <span class="token operator">:</span>sm<span class="token operator">=</span><span class="token string">&quot;{ span: 12, offset: 6 }&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form @submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;basicLogin&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span>
            <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span>
            <span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu correo&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, message: 'Ingresa un email' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span>model<span class="token operator">:</span>value activa un evento del componente <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu password&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, message: 'Ingresa una contraseña' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.password&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Ingresar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token comment">// vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token comment">// store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Creamos una propiedad reactiva</span>
<span class="token comment">// reactive(objeto)</span>
<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">'123123'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Accedemos al valor del  email y  password del formulario</span>
    <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">loginUser</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>email<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="utilizamos-los-eventos-finish-y-finishfailed-del-componente-a-form"><a href="#utilizamos-los-eventos-finish-y-finishfailed-del-componente-a-form" class="header-anchor">#</a> Utilizamos los eventos Finish y FinishFailed del componente a-form</h3> <h4 id="reglas-para-la-props-rules"><a href="#reglas-para-la-props-rules" class="header-anchor">#</a> Reglas para la props rules</h4> <ul><li>Regla min = Minimo X caracteres</li> <li>Regla whitespace = No acepta espacios en blanco(trim)</li> <li>Regla type = para que el input tenga validaciones HTML  , los valores son lo mismo que el atributo type de un input (type=”email” , type=”text” , etc).</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token operator">:</span>xs<span class="token operator">=</span><span class="token string">&quot;{ span: 24 }&quot;</span> <span class="token operator">:</span>sm<span class="token operator">=</span><span class="token string">&quot;{ span: 12, offset: 6 }&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form name<span class="token operator">=</span><span class="token string">&quot;basicLogin&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;onFinish&quot;</span>
                @finishFailed<span class="token operator">=</span><span class="token string">&quot;onFinishFailed&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu correo&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, type:'email' , whitespace: true, message: 'Ingresa un email' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span>model<span class="token operator">:</span>value activa un evento del componente <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu password&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, whitespace: true, min: 6, message: 'Ingresa una contraseña con minimo 6 caracteres' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.password&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Ingresar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token comment">// vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token comment">// store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Creamos una propiedad reactiva</span>
<span class="token comment">// reactive(objeto)</span>
<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">'123123'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">loginUser</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>email<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">onFinishFailed</span> <span class="token operator">=</span> <span class="token parameter">errorInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="registro-con-repassword"><a href="#registro-con-repassword" class="header-anchor">#</a> Registro con repassword</h2> <p>Register.vue</p> <h4 id="reglas-para-la-props-rules-2"><a href="#reglas-para-la-props-rules-2" class="header-anchor">#</a> Reglas para la props rules</h4> <ul><li>validator : Nos permite realizar una validacion Personalizada.</li> <li>validator : function(reglas , valor) {}</li> <li>la función recibe las reglas y el valor del input.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token operator">:</span>xs<span class="token operator">=</span><span class="token string">&quot;{ span: 24 }&quot;</span> <span class="token operator">:</span>sm<span class="token operator">=</span><span class="token string">&quot;{ span: 12, offset: 6 }&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form name<span class="token operator">=</span><span class="token string">&quot;basicRegister&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;onFinish&quot;</span>
                @finishFailed<span class="token operator">=</span><span class="token string">&quot;onFinishFailed&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu correo&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, type: 'email', whitespace: true, message: 'Ingresa un email' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span>model<span class="token operator">:</span>value activa un evento del componente <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu password&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, whitespace: true, min: 6, message: 'Ingresa una contraseña con minimo 6 caracteres' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.password&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>  
                  <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;repassword&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Repita  password&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{validator : validatePass }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.repassword&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Registrar <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">'123123'</span> <span class="token punctuation">,</span>
    repassword<span class="token operator">:</span><span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">validatePass</span> <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">reglas <span class="token punctuation">,</span> valor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Los mensajes de errores lo ponemos en el Promise.reject()</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>valor <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// Devolvemos un promise rechazada</span>
       <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Repita contraseña'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>valor <span class="token operator">!==</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// Devolvemos un promise rechazada</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'No coinciden las contraseñas'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
  <span class="token comment">// Si esta todo </span>
  <span class="token comment">// Devolvemos un promise con la operacion sastifactoria</span>
   <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">registerUser</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>email<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Verifica tu cuenta de correo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">onFinishFailed</span> <span class="token operator">=</span> <span class="token parameter">errorInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="errores-fire-auth"><a href="#errores-fire-auth" class="header-anchor">#</a> Errores Fire Auth</h2> <ul><li><a href="https://fedeleva.github.io/aprendizaje/React/proyecto.html#refactorizar" target="_blank" rel="noopener noreferrer">Explicacion en la seccion de React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://firebase.google.com/docs/reference/js/auth#autherrorcodes" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="login-2"><a href="#login-2" class="header-anchor">#</a> Login</h3> <p>user.js</p> <ul><li>en el catch, error.code , retorna el mensaje(código) de error</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token keyword">async</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Iniciamos sesion y sacamos la informacion del usuario(la contiene la propiedad user)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{</span> email<span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span> uid<span class="token operator">:</span> user<span class="token punctuation">.</span>uid <span class="token punctuation">}</span><span class="token punctuation">;</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>Login.vue</p> <ul><li>Según el código de error, mostramos cierto mensaje.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">loginUser</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>email<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
  <span class="token comment">// SI no existe el error</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/user-not-found'</span><span class="token operator">:</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;No existe esa cuenta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'auth/wrong-password'</span><span class="token operator">:</span>
             <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Contraseña incorrecta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Intentelo nuevamente&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="message"><a href="#message" class="header-anchor">#</a> Message</h2> <ul><li><a href="https://www.antdv.com/components/message" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>En lugar de alert , vamos a usar los Message que ofrecen ant design</li> <li>Como el Message no es un componente , hay que cargarlo manualmente (hacerle import)</li></ul> <div class="custom-block tip"><p class="custom-block-title">Sugerencia</p> <ul><li>Si usa Vite, puede usar unplugin-vue-components para cargar los componentes. Sin embargo, este complemento solo puede tratar con componentes. Otros, como el mensaje, deben cargarse manualmente:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'ant-design-vue/es/message/style/css'</span><span class="token punctuation">;</span> 

</code></pre></div></div> <p>Importamos los css en main.js</p> <ul><li>De esta manera, todo el sitio web/programa tiene acceso a los css.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token string">'ant-design-vue/es/message/style/css'</span><span class="token punctuation">;</span> 
<span class="token comment">// use(router) = Que utilize el router</span>
<span class="token comment">//use(createPinia()) = Que inicialice pinia</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><p>Login.vue</p> <ul><li>Para mostrar un mensaje es: message.tipodemensaje(“mensaje”);</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>
<span class="token comment">// vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token comment">// store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Creamos una propiedad reactiva</span>
<span class="token comment">// reactive(objeto)</span>
<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">'123123'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">loginUser</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>email<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
    <span class="token comment">// SI no existe el error</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/user-not-found'</span><span class="token operator">:</span>
            <span class="token comment">// Mostrar mensaje </span>
            <span class="token comment">// message.tipomensaje(&quot;mensaje&quot;);</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el correo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'auth/wrong-password'</span><span class="token operator">:</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Contraseña incorrecta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Intentelo mas tarde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">onFinishFailed</span> <span class="token operator">=</span> <span class="token parameter">errorInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="register-2"><a href="#register-2" class="header-anchor">#</a> Register</h2> <p>user.js</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Creamos el usuario</span>
                <span class="token keyword">await</span> <span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
                <span class="token comment">// Enviamos un email de validacion</span>
                <span class="token comment">//sendEmailVerification(currentUser)</span>
               <span class="token keyword">await</span> <span class="token function">sendEmailVerification</span><span class="token punctuation">(</span>auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">)</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
                
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loadingUser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>Register.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token operator">:</span>xs<span class="token operator">=</span><span class="token string">&quot;{ span: 24 }&quot;</span> <span class="token operator">:</span>sm<span class="token operator">=</span><span class="token string">&quot;{ span: 12, offset: 6 }&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form name<span class="token operator">=</span><span class="token string">&quot;basicRegister&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;onFinish&quot;</span>
                @finishFailed<span class="token operator">=</span><span class="token string">&quot;onFinishFailed&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu correo&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, type: 'email', whitespace: true, message: 'Ingresa un email' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span>model<span class="token operator">:</span>value activa un evento del componente <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese tu password&quot;</span>
                    <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ required: true, whitespace: true, min: 6, message: 'Ingresa una contraseña con minimo 6 caracteres' }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.password&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;repassword&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Repita  password&quot;</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;[{ validator: validatePass }]&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.repassword&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Registrar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    email<span class="token operator">:</span> <span class="token string">'usuario@tes.com'</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">'123123'</span><span class="token punctuation">,</span>
    repassword<span class="token operator">:</span> <span class="token string">'123123'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">validatePass</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">reglas<span class="token punctuation">,</span> valor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Los mensajes de errores lo ponemos en el Promise.reject()</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>valor <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Devolvemos un promise rechazada</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Repita contraseña'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>valor <span class="token operator">!==</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Devolvemos un promise rechazada</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'No coinciden las contraseñas'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Si esta todo </span>
    <span class="token comment">// Devolvemos un promise con la operacion sastifactoria</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">registerUser</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>email<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
    <span class="token comment">// SI no existe el error</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Mostrar mensaje </span>
        <span class="token comment">// message.tipomensaje(&quot;mensaje&quot;);</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;Revisa tu correo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'auth/email-already-in-use'</span><span class="token operator">:</span>
            <span class="token comment">// Mostrar mensaje </span>
            <span class="token comment">// message.tipomensaje(&quot;mensaje&quot;);</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Correo ya en uso&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Intentelo mas tarde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">onFinishFailed</span> <span class="token operator">=</span> <span class="token parameter">errorInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="animaciones-de-loading-en-los-botones"><a href="#animaciones-de-loading-en-los-botones" class="header-anchor">#</a> Animaciones de loading en los botones:</h3> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Ingresar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;userStore.loadingUser&quot;</span><span class="token operator">&gt;</span>Registrar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
</code></pre></div><h2 id="componente-addform-renderizar-componente"><a href="#componente-addform-renderizar-componente" class="header-anchor">#</a> Componente AddForm / Renderizar componente</h2> <p>components/AddForm.vue</p> <h4 id="reglas-para-la-props-rules-3"><a href="#reglas-para-la-props-rules-3" class="header-anchor">#</a> Reglas para la props rules</h4> <ul><li>pattern : Sirve para  agregar una expresión regular en la validacion.</li> <li><a href="http://w3.unpocodetodo.info/utiles/regex-ejemplos.php?type=mix" target="_blank" rel="noopener noreferrer">regla regular para urls<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      databaseStore<span class="token punctuation">.</span><span class="token function">addUrl</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;URL agregada&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>a<span class="token operator">-</span>form name<span class="token operator">=</span><span class="token string">&quot;addForm&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;onFinish&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese una URL&quot;</span> <span class="token operator">:</span>rules<span class="token operator">=</span>&quot;<span class="token punctuation">[</span><span class="token punctuation">{</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            whitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">'Ingrese una URL válida'</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https?:\/\/[\w\-]+(\.[\w\-]+)+[/#?]?.*$</span><span class="token regex-delimiter">/</span></span>
        
        <span class="token punctuation">}</span><span class="token punctuation">]</span>&quot;<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.url&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Agregar <span class="token constant">URL</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre></div><p>Home.vue</p> <ul><li>Renderizamos el componente que creamos</li> <li>Al renderizar un componente, se escribe todo en minúscula y se separa con un “-“ cada palabra (te das cuenta cuando se separan las palabras porque esta en camelCase)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Renderizamos el componente AddForm <span class="token operator">--</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>add<span class="token operator">-</span>form<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>add<span class="token operator">-</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span>br<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;databaseStore.deleteUrl(item.id)&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>     
         <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;router.push(`/editar/${item.id}`)&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="le-anadimos-un-loading-y-un-manejo-de-errores-de-firebase"><a href="#le-anadimos-un-loading-y-un-manejo-de-errores-de-firebase" class="header-anchor">#</a> Le añadimos un loading y un manejo de errores de Firebase</h3> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        document<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        loadingDoc<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        loading<span class="token operator">:</span><span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>      <span class="token keyword">async</span> <span class="token function">addUrl</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> objetoDoc <span class="token operator">=</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> name<span class="token punctuation">,</span>
                    short<span class="token operator">:</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    user<span class="token operator">:</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">,</span>
                <span class="token punctuation">}</span>

                <span class="token comment">// addDoc(collection , documento)</span>
                <span class="token comment">// el documento es el objeto que se va a insertar en la BD</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">addDoc</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> objetoDoc<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token comment">// cuando se crea el objeto , te devuelve una propiedad con la id</span>
                    <span class="token operator">...</span>objetoDoc<span class="token punctuation">,</span> id<span class="token operator">:</span> docRef<span class="token punctuation">.</span>id
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                <span class="token keyword">return</span> error<span class="token punctuation">.</span>code
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>AddForm.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> error <span class="token operator">=</span><span class="token keyword">await</span>  databaseStore<span class="token punctuation">.</span><span class="token function">addUrl</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// SI no existe errores</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          formState<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;URL agregada&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
       <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// Manejar errores de Firestore</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Intentelo mas tarde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>a<span class="token operator">-</span>form name<span class="token operator">=</span><span class="token string">&quot;addForm&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;onFinish&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese una URL&quot;</span> <span class="token operator">:</span>rules<span class="token operator">=</span>&quot;<span class="token punctuation">[</span><span class="token punctuation">{</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            whitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">'Ingrese una URL válida'</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https?:\/\/[\w\-]+(\.[\w\-]+)+[/#?]?.*$</span><span class="token regex-delimiter">/</span></span>
        
        <span class="token punctuation">}</span><span class="token punctuation">]</span>&quot;<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.url&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;databaseStore.loading&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;databaseStore.loading&quot;</span><span class="token operator">&gt;</span>Agregar <span class="token constant">URL</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre></div><h2 id="card"><a href="#card" class="header-anchor">#</a> Card</h2> <h3 id="componente-a-card"><a href="#componente-a-card" class="header-anchor">#</a> Componente <a href="https://www.antdv.com/components/card" target="_blank" rel="noopener noreferrer">a-card<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h4 id="props-7"><a href="#props-7" class="header-anchor">#</a> props:</h4> <ul><li>title</li></ul> <h3 id="componente-template"><a href="#componente-template" class="header-anchor">#</a> componente template</h3> <ul><li>Contiene el props #extra</li> <li>Adentro insertamos los botones que van a aparecer al costado de la Card</li></ul> <h3 id="componente-a-space"><a href="#componente-a-space" class="header-anchor">#</a> componente <a href="https://www.antdv.com/components/space" target="_blank" rel="noopener noreferrer">a-space<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ul><li>Sirve para generar un espaciado entre los componentes y que no queden pegados.</li> <li>Se genera un  espaciado en ambos lados(horizontalmente o verticalmente)  en todos los elementos que contiene el componente.</li></ul> <h4 id="props-8"><a href="#props-8" class="header-anchor">#</a> props:</h4> <ul><li>direction : Para especificar en que dirección (horizontal o vertical) queres generar el espaciado. Sin especificar esta props , por defecto es horizontal.</li></ul> <p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Renderizamos el componente AddForm <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>add<span class="token operator">-</span>form<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>add<span class="token operator">-</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>space direction<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> v<span class="token operator">-</span><span class="token keyword">else</span> style<span class="token operator">=</span><span class="token string">&quot;width:100%&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>card <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;item.short&quot;</span>  v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>template #extra<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>a<span class="token operator">-</span>space<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;danger&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;databaseStore.deleteUrl(item.id)&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;router.push(`/editar/${item.id}`)&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>space<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>space<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="confirmar-eliminacion-parametro-en-la-funcion-del-evento"><a href="#confirmar-eliminacion-parametro-en-la-funcion-del-evento" class="header-anchor">#</a> Confirmar Eliminacion / Parametro en la función del evento</h2> <h3 id="componente-a-popfirm"><a href="#componente-a-popfirm" class="header-anchor">#</a> Componente <a href="https://www.antdv.com/components/popconfirm" target="_blank" rel="noopener noreferrer">a-popfirm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ul><li>Envuelve al botón/componente que realiza la acción.</li> <li>Sirve para confirmar o cancelar una acción.</li></ul> <h4 id="props-9"><a href="#props-9" class="header-anchor">#</a> props:</h4> <ul><li>title  : Titulo de la “ventana” , la pregunta que le hacemos al usuario.</li> <li>ok-text  : el Texto del botón yes</li> <li>cancel-text : el Texto del botón no</li> <li>@confirm = evento al confirmar</li> <li>@cancel = evento al cancelar</li></ul> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token keyword">async</span> <span class="token function">deleteUrl</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//Eliminamos </span>
                <span class="token keyword">await</span> <span class="token function">deleteDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
                    item<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                <span class="token keyword">return</span> error<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>Home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Renderizamos el componente AddForm <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>add<span class="token operator">-</span>form<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>add<span class="token operator">-</span>form<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;databaseStore.loadingDoc&quot;</span><span class="token operator">&gt;</span>Loading docs<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>a<span class="token operator">-</span>space direction<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> v<span class="token operator">-</span><span class="token keyword">else</span> style<span class="token operator">=</span><span class="token string">&quot;width:100%&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>card <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;item.short&quot;</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of databaseStore.document&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>template #extra<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>a<span class="token operator">-</span>space<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>a<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">&quot;¿Estas seguro que deseas eliminar?&quot;</span> ok<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">&quot;Si&quot;</span> cancel<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">&quot;No&quot;</span>
            @confirm<span class="token operator">=</span><span class="token string">&quot;confirm(item.id)&quot;</span> @cancel<span class="token operator">=</span><span class="token string">&quot;cancel&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;danger&quot;</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;databaseStore.loading&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;databaseStore.loading&quot;</span><span class="token operator">&gt;</span>Eliminar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>popconfirm<span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;router.push(`/editar/${item.id}`)&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>space<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>space<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
databaseStore<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">confirm</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">await</span> databaseStore<span class="token punctuation">.</span><span class="token function">deleteUrl</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Si no existe el error</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'Se elimino con exito'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'No se elimino'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="editar"><a href="#editar" class="header-anchor">#</a> Editar</h2> <p>database.js</p> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token keyword">async</span> <span class="token function">updateUrl</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// Referencia al documento</span>
                <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;urls&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Obtenemos un documento</span>
                <span class="token keyword">const</span> docSpan <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>docSpan<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No existe el doc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>docSpan<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user <span class="token operator">!==</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No le pertenece ese documento&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//updateDoc(referencia documento , {datos a actualizar})</span>
                <span class="token keyword">await</span> <span class="token function">updateDoc</span><span class="token punctuation">(</span>docRef<span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span>

             <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token operator">...</span>item <span class="token punctuation">,</span> name <span class="token operator">:</span> name<span class="token punctuation">}</span> <span class="token operator">:</span> item<span class="token punctuation">)</span>
            
             router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                <span class="token keyword">return</span> error<span class="token punctuation">.</span>message
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre></div><p>Editar.vue</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Editar <span class="token constant">ID</span><span class="token operator">:</span>  <span class="token punctuation">{</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>form name<span class="token operator">=</span><span class="token string">&quot;editForm&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span> layout<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formState&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;onFinish&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;Ingrese una URL&quot;</span> <span class="token operator">:</span>rules<span class="token operator">=</span>&quot;<span class="token punctuation">[</span><span class="token punctuation">{</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            whitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">'Ingrese una URL válida'</span><span class="token punctuation">,</span>
            pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https?:\/\/[\w\-]+(\.[\w\-]+)+[/#?]?.*$</span><span class="token regex-delimiter">/</span></span>
        
        <span class="token punctuation">}</span><span class="token punctuation">]</span>&quot;<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;formState.url&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> html<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;databaseStore.loading&quot;</span>
                <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;databaseStore.loading&quot;</span><span class="token operator">&gt;</span>Editar<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
    

      
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDatabaseStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores/database'</span><span class="token punctuation">;</span>
<span class="token comment">// Nos devuelve un objeto para tener acceso a las variables de la url.</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> databaseStore <span class="token operator">=</span> <span class="token function">useDatabaseStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> formState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">await</span> databaseStore<span class="token punctuation">.</span><span class="token function">updateUrl</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> formState<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;URL editada&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// Manejar errores de Firestore</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Intentelo mas tarde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// El callback se ejecuta al montarse el componente.</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// route.params.nombrevariable</span>
   <span class="token keyword">const</span> error <span class="token operator">=</span>  formState<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token keyword">await</span> databaseStore<span class="token punctuation">.</span><span class="token function">leerUrl</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/aprendizaje/vue/" class="prev router-link-active">
        Conceptos de Vue
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/aprendizaje/assets/js/app.8f0d4037.js" defer></script><script src="/aprendizaje/assets/js/2.c431ec36.js" defer></script><script src="/aprendizaje/assets/js/62.6b368ae7.js" defer></script>
  </body>
</html>
