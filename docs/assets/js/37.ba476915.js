(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{421:function(a,s,e){"use strict";e.r(s);var t=e(54),n=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"subconsultas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subconsultas"}},[a._v("#")]),a._v(" SubConsultas")]),a._v(" "),e("p",[a._v("Es posible que haya notado que incluso con una consulta completa, hay muchas preguntas que no podemos responder sobre nuestros datos sin una consulta adicional o un procesamiento previo. En estos casos, puede realizar varias consultas y procesar los datos usted mismo, o puede crear una consulta más compleja utilizando subconsultas SQL.")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("Ejemplo")]),a._v(" "),e("p",[a._v("Supongamos que su empresa tiene una lista de todos los asociados de ventas, con datos sobre los ingresos que genera cada asociado y su salario individual. Los tiempos son ajustados y ahora desea saber cuáles de sus Asociados le están costando a la empresa más que el ingreso promedio generado por Asociado.")])]),a._v(" "),e("ol",[e("li",[a._v("Calcular los ingresos promedio que están generando todos los Asociados.")])]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("AVG")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("revenue_generated"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" sales_associates"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("Luego , usando ese resultado , podemos comparar los costos de cada uno de los Asociados con ese valor. Para usarlo como una subconsulta, podemos escribirlo directamente en la cláusula  WHERE de la consulta:")])]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" sales_associates\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" salary "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("AVG")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("revenue_generated"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" sales_associates"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("A medida que se ejecuta la restricción, el salario de cada Asociado se comparará con el valor consultado de la subconsulta interna.")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("Parentesis()")]),a._v(" "),e("p",[a._v("Se puede hacer una subconsulta en cualquier lugar (AVERIGUALO)")]),a._v(" "),e("p",[a._v("Debido a que las subconsultas se pueden anidar, cada subconsulta debe estar completamente encerrada entre paréntesis para establecer la jerarquía adecuada. De lo contrario, las subconsultas pueden hacer referencia a cualquier tabla en la base de datos y hacer uso de las construcciones de una consulta normal (aunque algunas implementaciones no permiten que las subconsultas usen LIMIT o OFFSET).")])]),a._v(" "),e("h2",{attrs:{id:"subconsultas-correlacionadas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subconsultas-correlacionadas"}},[a._v("#")]),a._v(" Subconsultas correlacionadas")]),a._v(" "),e("p",[a._v("Un tipo de subconsulta más potente es la subconsulta correlacionada en la que la consulta interna depende de una columna o alias de la consulta externa. A diferencia de las subconsultas anteriores, cada una de estas consultas internas debe ejecutarse para cada una de las filas de la consulta externa, ya que la consulta interna depende de la fila de consulta externa actual.")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("Ejemplo")]),a._v(" "),e("p",[a._v("En lugar de la lista de Asociados de ventas anterior, imagínese si tiene una lista general de Empleados, sus departamentos (ingeniería, ventas, etc.), ingresos y salario. Esta vez, ahora está buscando en toda la empresa para encontrar empleados que se desempeñen mejor (mas salario) que el promedio en su departamento.")])]),a._v(" "),e("p",[a._v("Para cada empleado, necesitaría calcular su costo en relación con los ingresos promedio generados por todas las personas en su departamento. Para tomar el promedio del departamento, la subconsulta deberá saber en qué departamento se encuentra cada empleado:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" employees\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" salary "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("AVG")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("revenue_generated"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" employees "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("AS")]),a._v(" dept_employees\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" dept_employees"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("department "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" employees"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("department"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("Este tipo de consultas complejas pueden ser poderosas, pero también difíciles de leer y comprender, por lo que debe tener cuidado al usarlas. Si es posible, intente dar alias significativos a las tablas y valores temporales. Además, las subconsultas correlacionadas pueden ser difíciles de optimizar, por lo que las características de rendimiento pueden variar entre diferentes bases de datos.")])]),a._v(" "),e("h2",{attrs:{id:"pruebas-de-existencia"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pruebas-de-existencia"}},[a._v("#")]),a._v(" Pruebas de existencia")]),a._v(" "),e("p",[a._v("El operador IN se usa para probar si el valor de la columna en la fila actual existía en una lista fija de valores. En consultas complejas, esto se puede ampliar utilizando subconsultas para probar si un valor de columna existe en una lista dinámica de valores.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" …\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" mytable\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("column")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("IN")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("IN")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" another_column\n               "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" another_table"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("Al hacer esto, observe que la subconsulta interna debe seleccionar los valores de la columna  o los valores de una expresión para producir una lista con la que se pueda probar el valor de la columna externa. Este tipo de restricción es de gran alcance cuando las restricciones se basan en datos actuales.")])])])}),[],!1,null,null,null);s.default=n.exports}}]);